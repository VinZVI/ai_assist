# Журнал изменений AI-Компаньон

Все значимые изменения в проекте документируются в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
и этот проект следует [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [2025-10-07] - Добавление заглушек для команд /help, /profile, /limits и /premium
### Добавлено
- Реализованы заглушки для команд /help, /profile, /limits и /premium
- Созданы обработчики команд в отдельных файлах app/handlers/help.py, app/handlers/profile.py, app/handlers/limits.py и app/handlers/premium.py
- Добавлены записи в лог-лексиконы для новых обработчиков команд
- Обновлен handlers/__init__.py для регистрации новых роутеров

### Изменено
- Обновлена документация в changelog.md

## [2025-10-07] - Рефакторинг системы команд бота и реализация выбора языка
### Добавлено
- Реализована команда /language для выбора языка интерфейса
- Добавлен обработчик команды выбора языка в отдельном файле app/handlers/language.py
- Созданы тесты для функциональности выбора языка в tests/test_language.py
- Добавлены записи в лексиконы для функциональности выбора языка
- Добавлены записи в лог-лексиконы для функциональности выбора языка

### Изменено
- Обновлена система команд бота для использования описаний из лексиконов вместо hardcoded строк
- Команда /language добавлена в список команд бота
- Улучшена структура импортов в handlers/__init__.py

### Исправлено
- Исправлены ошибки типизации в обработчике команды выбора языка
- Устранены проблемы с доступом к сообщениям callback в обработчике языка

## [2025-10-07] - Завершение рефакторинга лог-лексиконов и исправление команд бота
### Добавлено
- Завершена миграция всех сообщений логирования на модульную систему лог-лексиконов
- Добавлены недостающие константы в лог-лексиконы для всех модулей

### Изменено
- Исправлены ошибки форматирования сообщений в обработчике команды /start
- Обновлены все обработчики для использования централизованной системы лог-лексиконов
- Улучшена структура импортов в лог-лексиконах
- Рефакторинг системы лог-лексиконов: удалены все отдельные файлы, оставлены только en.py и ru.py
- Все константы перемещены в словари в файлах en.py и ru.py

### Исправлено
- Исправлены проблемы с обработкой команд бота из-за неправильных параметров в лог-сообщениях
- Устранены hardcoded строки в лог-сообщениях по всему проекту
- Исправлены ошибки форматирования f-строк в лог-сообщениях

## [2025-10-05] - Настройка CI/CD pipeline и подготовка к продакшену
### Добавлено
- Созданы GitHub Actions workflows для CI/CD
- Добавлен workflow для security scanning
- Добавлен workflow для документации
- Созданы production environment файлы
- Созданы deployment скрипты
- Добавлена поддержка webhook режима

### Изменено
- Обновлена документация (README, Project.md, Tasktracker.md)
- Оптимизирован Dockerfile для продакшена
- Улучшена структура конфигурационных файлов

### Исправлено
- Улучшена безопасность хранения конфигураций

## [2025-10-03] - Расширение модульных лексиконов и констант
### Добавлено
- Созданы дополнительные файлы лексиконов для keyboards, ai_providers и utils модулей
- Созданы дополнительные файлы лог-лексиконов для keyboards, ai_providers и utils модулей
- Обновлены __init__.py файлы для обеспечения обратной совместимости

### Изменено
- Расширена структура модульных лексиконов в app/lexicon/
- Расширена структура модульных лог-лексиконов в app/log_lexicon/

## [2025-10-03] - Рефакторинг лексиконов и констант
### Добавлено
- Создана структура модульных лексиконов в app/lexicon/
- Созданы отдельные файлы лексиконов для start, message и callbacks хендлеров
- Создана структура модульных констант в app/constants/
- Созданы отдельные файлы констант для config и errors
- Создана структура модульных лог-лексиконов в app/log_lexicon/
- Созданы отдельные файлы лог-лексиконов для start, message и callbacks хендлеров

### Изменено
- Обновлены хендлеры для использования модульных лексиконов и констант
- Основные файлы lexicon.py, constants.py и log_lexicon.py помечены как устаревшие с предупреждениями

### Исправлено
- Улучшена структура кодовой базы для лучшей поддерживаемости

## [2025-09-27] - Добавление лог-лексикона и улучшение документации
### Добавлено
- Создан файл app/log_lexicon.py для централизованных сообщений логирования
- Добавлены подробные комментарии к файлам конфигурации

### Изменено
- Обновлена документация в docs/

## [2025-09-20] - Улучшение обработки ошибок AI и рефакторинг
### Добавлено
- Расширенная обработка ошибок для провайдеров AI
- Улучшенная система логирования для AI сервисов

### Изменено
- Рефакторинг обработчиков сообщений
- Улучшена система fallback для AI провайдеров

## [2025-09-15] - Добавление системы премиум-подписки
### Добавлено
- Система премиум-подписки с оплатой через Telegram Stars
- Лимиты для бесплатных пользователей
- Команда /premium для управления подпиской

## [2025-09-12] - Начальная реализация
### Добавлено
- Базовая структура проекта
- Интеграция с Telegram Bot API через aiogram
- Поддержка нескольких AI провайдеров (DeepSeek, OpenRouter)
- Система управления пользователями и диалогами
- Конфигурация через переменные окружения

---

*Версия документа: 1.1*
*Последнее обновление: 2025-10-07*