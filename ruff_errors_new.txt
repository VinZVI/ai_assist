W292 [*] No newline at end of file
  --> app\__init__.py:12:88
   |
10 | __version__ = "0.1.0"
11 | __title__ = "AI-–ö–æ–º–ø–∞–Ω—å–æ–Ω"
12 | __description__ = "Telegram-–±–æ—Ç –¥–ª—è —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π DeepSeek API"
   |                                                                                        ^
   |
help: Add trailing newline

F821 Undefined name `MagicValues`
   --> app\config.py:112:20
    |
110 |     def validate_temperature(cls, v: float) -> float:
111 |         """–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏."""
112 |         min_temp = MagicValues.DEEPSEEK_MIN_TEMPERATURE
    |                    ^^^^^^^^^^^
113 |         max_temp = MagicValues.DEEPSEEK_MAX_TEMPERATURE
114 |         if not min_temp <= v <= max_temp:
    |

F821 Undefined name `MagicValues`
   --> app\config.py:113:20
    |
111 |         """–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏."""
112 |         min_temp = MagicValues.DEEPSEEK_MIN_TEMPERATURE
113 |         max_temp = MagicValues.DEEPSEEK_MAX_TEMPERATURE
    |                    ^^^^^^^^^^^
114 |         if not min_temp <= v <= max_temp:
115 |             raise ValueError(ConfigErrorMessages.INVALID_DEEPSEEK_TEMPERATURE)
    |

F821 Undefined name `MagicValues`
   --> app\config.py:122:22
    |
120 |     def validate_max_tokens(cls, v: int) -> int:
121 |         """–í–∞–ª–∏–¥–∞—Ü–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–∫–µ–Ω–æ–≤."""
122 |         min_tokens = MagicValues.DEEPSEEK_MIN_MAX_TOKENS
    |                      ^^^^^^^^^^^
123 |         max_tokens = MagicValues.DEEPSEEK_MAX_MAX_TOKENS_DEEPSEEK
124 |         if v < min_tokens or v > max_tokens:
    |

F821 Undefined name `MagicValues`
   --> app\config.py:123:22
    |
121 |         """–í–∞–ª–∏–¥–∞—Ü–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–∫–µ–Ω–æ–≤."""
122 |         min_tokens = MagicValues.DEEPSEEK_MIN_MAX_TOKENS
123 |         max_tokens = MagicValues.DEEPSEEK_MAX_MAX_TOKENS_DEEPSEEK
    |                      ^^^^^^^^^^^
124 |         if v < min_tokens or v > max_tokens:
125 |             raise ValueError(ConfigErrorMessages.INVALID_DEEPSEEK_MAX_TOKENS)
    |

F821 Undefined name `MagicValues`
   --> app\config.py:174:20
    |
172 |     def validate_temperature(cls, v: float) -> float:
173 |         """–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏."""
174 |         min_temp = MagicValues.OPENROUTER_MIN_TEMPERATURE
    |                    ^^^^^^^^^^^
175 |         max_temp = MagicValues.OPENROUTER_MAX_TEMPERATURE
176 |         if not min_temp <= v <= max_temp:
    |

F821 Undefined name `MagicValues`
   --> app\config.py:175:20
    |
173 |         """–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏."""
174 |         min_temp = MagicValues.OPENROUTER_MIN_TEMPERATURE
175 |         max_temp = MagicValues.OPENROUTER_MAX_TEMPERATURE
    |                    ^^^^^^^^^^^
176 |         if not min_temp <= v <= max_temp:
177 |             raise ValueError(ConfigErrorMessages.INVALID_OPENROUTER_TEMPERATURE)
    |

F821 Undefined name `MagicValues`
   --> app\config.py:184:22
    |
182 |     def validate_max_tokens(cls, v: int) -> int:
183 |         """–í–∞–ª–∏–¥–∞—Ü–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–∫–µ–Ω–æ–≤."""
184 |         min_tokens = MagicValues.OPENROUTER_MIN_MAX_TOKENS
    |                      ^^^^^^^^^^^
185 |         max_tokens = MagicValues.DEEPSEEK_MAX_MAX_TOKENS_OPENROUTER
186 |         if v < min_tokens or v > max_tokens:  # OpenRouter –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –±–æ–ª—å—à–µ —Ç–æ–∫–µ–Ω–æ–≤
    |

F821 Undefined name `MagicValues`
   --> app\config.py:185:22
    |
183 |         """–í–∞–ª–∏–¥–∞—Ü–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–∫–µ–Ω–æ–≤."""
184 |         min_tokens = MagicValues.OPENROUTER_MIN_MAX_TOKENS
185 |         max_tokens = MagicValues.DEEPSEEK_MAX_MAX_TOKENS_OPENROUTER
    |                      ^^^^^^^^^^^
186 |         if v < min_tokens or v > max_tokens:  # OpenRouter –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –±–æ–ª—å—à–µ —Ç–æ–∫–µ–Ω–æ–≤
187 |             raise ValueError(ConfigErrorMessages.INVALID_OPENROUTER_MAX_TOKENS)
    |

W291 [*] Trailing whitespace
   --> app\config.py:225:41
    |
223 |         if v < min_retries or v > max_retries:
224 |             message = ConfigErrorMessages.INVALID_AI_PROVIDER_RETRIES_FORMAT.format(
225 |                 min_retries=min_retries, 
    |                                         ^
226 |                 max_retries=max_retries
227 |             )
    |
help: Remove trailing whitespace

E501 Line too long (90 > 88)
   --> app\config.py:248:89
    |
246 |         """–í–∞–ª–∏–¥–∞—Ü–∏—è –ª–∏–º–∏—Ç–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π."""
247 |         if v < 0:
248 |             raise ValueError(ConfigErrorMessages.INVALID_FREE_MESSAGES_LIMIT_NON_NEGATIVE)
    |                                                                                         ^^
249 |         return v
    |

ANN204 Missing return type annotation for special method `__init__`
   --> app\config.py:391:9
    |
389 |     rate_limit: RateLimitConfig | None = None
390 |
391 |     def __init__(self, **data):
    |         ^^^^^^^^
392 |         super().__init__(**data)
393 |         # –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
    |
help: Add return type annotation: `None`

ANN003 Missing type annotation for `**data`
   --> app\config.py:391:24
    |
389 |     rate_limit: RateLimitConfig | None = None
390 |
391 |     def __init__(self, **data):
    |                        ^^^^^^
392 |         super().__init__(**data)
393 |         # –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
    |

F821 Undefined name `MagicValues`
   --> app\config.py:427:21
    |
425 |         if not v or v == "your_secret_key_here":
426 |             raise ValueError(ConfigErrorMessages.INVALID_SECRET_KEY)
427 |         if len(v) < MagicValues.MIN_SECRET_KEY_LENGTH:
    |                     ^^^^^^^^^^^
428 |             raise ValueError(ConfigErrorMessages.SECRET_KEY_TOO_SHORT)
429 |         return v
    |

PLW0603 Using the global statement to update `_config_instance` is discouraged
   --> app\config.py:445:12
    |
443 | def get_config() -> AppConfig:
444 |     """–ü–æ–ª—É—á–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è."""
445 |     global _config_instance
    |            ^^^^^^^^^^^^^^^^
446 |
447 |     if _config_instance is None:
    |

PLW0603 Using the global statement to update `_config_instance` is discouraged
   --> app\config.py:445:12
    |
443 | def get_config() -> AppConfig:
444 |     """–ü–æ–ª—É—á–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è."""
445 |     global _config_instance
    |            ^^^^^^^^^^^^^^^^
446 |
447 |     if _config_instance is None:
    |

RUF002 Docstring contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
 --> app\constants.py:3:37
  |
1 | """
2 | @file: constants.py
3 | @description: –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  |                                     ^
4 | @created: 2025-09-27
5 | """
  |

RUF002 Docstring contains ambiguous `–±` (CYRILLIC SMALL LETTER BE). Did you mean `6` (DIGIT SIX)?
 --> app\constants.py:3:38
  |
1 | """
2 | @file: constants.py
3 | @description: –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  |                                      ^
4 | @created: 2025-09-27
5 | """
  |

RUF003 Comment contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
 --> app\constants.py:7:13
  |
5 | """
6 |
7 | # –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
  |             ^
8 | class ConfigErrorMessages:
9 |     """–°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏."""
  |

RUF003 Comment contains ambiguous `–±` (CYRILLIC SMALL LETTER BE). Did you mean `6` (DIGIT SIX)?
 --> app\constants.py:7:14
  |
5 | """
6 |
7 | # –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
  |              ^
8 | class ConfigErrorMessages:
9 |     """–°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏."""
  |

RUF002 Docstring contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
  --> app\constants.py:9:18
   |
 7 | # –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
 8 | class ConfigErrorMessages:
 9 |     """–°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏."""
   |                  ^
10 |     
11 |     # Telegram
   |

RUF002 Docstring contains ambiguous `–±` (CYRILLIC SMALL LETTER BE). Did you mean `6` (DIGIT SIX)?
  --> app\constants.py:9:19
   |
 7 | # –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
 8 | class ConfigErrorMessages:
 9 |     """–°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏."""
   |                   ^
10 |     
11 |     # Telegram
   |

W293 [*] Blank line contains whitespace
  --> app\constants.py:10:1
   |
 8 | class ConfigErrorMessages:
 9 |     """–°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏."""
10 |     
   | ^^^^
11 |     # Telegram
12 |     INVALID_BOT_TOKEN_FORMAT = "BOT_TOKEN must be set to a valid Telegram bot token"
   |
help: Remove whitespace from blank line

S105 Possible hardcoded password assigned to: "INVALID_BOT_TOKEN_FORMAT"
  --> app\constants.py:12:32
   |
11 |     # Telegram
12 |     INVALID_BOT_TOKEN_FORMAT = "BOT_TOKEN must be set to a valid Telegram bot token"
   |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
13 |     INVALID_BOT_TOKEN_STRUCTURE = "BOT_TOKEN must be in format 'number:hash'"
   |

S105 Possible hardcoded password assigned to: "INVALID_BOT_TOKEN_STRUCTURE"
  --> app\constants.py:13:35
   |
11 |     # Telegram
12 |     INVALID_BOT_TOKEN_FORMAT = "BOT_TOKEN must be set to a valid Telegram bot token"
13 |     INVALID_BOT_TOKEN_STRUCTURE = "BOT_TOKEN must be in format 'number:hash'"
   |                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
14 |     
15 |     # DeepSeek
   |

W293 [*] Blank line contains whitespace
  --> app\constants.py:14:1
   |
12 |     INVALID_BOT_TOKEN_FORMAT = "BOT_TOKEN must be set to a valid Telegram bot token"
13 |     INVALID_BOT_TOKEN_STRUCTURE = "BOT_TOKEN must be in format 'number:hash'"
14 |     
   | ^^^^
15 |     # DeepSeek
16 |     INVALID_DEEPSEEK_API_KEY = "DEEPSEEK_API_KEY must be set to a valid API key"
   |
help: Remove whitespace from blank line

W293 [*] Blank line contains whitespace
  --> app\constants.py:19:1
   |
17 |     INVALID_DEEPSEEK_TEMPERATURE = "DEEPSEEK_TEMPERATURE must be between 0.0 and 2.0"
18 |     INVALID_DEEPSEEK_MAX_TOKENS = "DEEPSEEK_MAX_TOKENS must be between 1 and 4000"
19 |     
   | ^^^^
20 |     # OpenRouter
21 |     INVALID_OPENROUTER_API_KEY = "OPENROUTER_API_KEY cannot be empty"
   |
help: Remove whitespace from blank line

E501 Line too long (89 > 88)
  --> app\constants.py:22:89
   |
20 |     # OpenRouter
21 |     INVALID_OPENROUTER_API_KEY = "OPENROUTER_API_KEY cannot be empty"
22 |     INVALID_OPENROUTER_TEMPERATURE = "OPENROUTER_TEMPERATURE must be between 0.0 and 2.0"
   |                                                                                         ^
23 |     INVALID_OPENROUTER_MAX_TOKENS = "OPENROUTER_MAX_TOKENS must be between 1 and 8000"
   |

W293 [*] Blank line contains whitespace
  --> app\constants.py:24:1
   |
22 |     INVALID_OPENROUTER_TEMPERATURE = "OPENROUTER_TEMPERATURE must be between 0.0 and 2.0"
23 |     INVALID_OPENROUTER_MAX_TOKENS = "OPENROUTER_MAX_TOKENS must be between 1 and 8000"
24 |     
   | ^^^^
25 |     # User Limits
26 |     INVALID_FREE_MESSAGES_LIMIT = "FREE_MESSAGES_LIMIT must be positive"
   |
help: Remove whitespace from blank line

E501 Line too long (89 > 88)
  --> app\constants.py:28:89
   |
26 |     INVALID_FREE_MESSAGES_LIMIT = "FREE_MESSAGES_LIMIT must be positive"
27 |     INVALID_PREMIUM_PRICE = "PREMIUM_PRICE must be positive"
28 |     INVALID_FREE_MESSAGES_LIMIT_NON_NEGATIVE = "FREE_MESSAGES_LIMIT must be non-negative"
   |                                                                                         ^
29 |     
30 |     # Admin
   |

W293 [*] Blank line contains whitespace
  --> app\constants.py:29:1
   |
27 |     INVALID_PREMIUM_PRICE = "PREMIUM_PRICE must be positive"
28 |     INVALID_FREE_MESSAGES_LIMIT_NON_NEGATIVE = "FREE_MESSAGES_LIMIT must be non-negative"
29 |     
   | ^^^^
30 |     # Admin
31 |     INVALID_ADMIN_USER_ID = "ADMIN_USER_ID must be positive"
   |
help: Remove whitespace from blank line

W293 [*] Blank line contains whitespace
  --> app\constants.py:33:1
   |
31 |     INVALID_ADMIN_USER_ID = "ADMIN_USER_ID must be positive"
32 |     INVALID_ADMIN_USER_ID_POSITIVE = "ADMIN_USER_ID must be a positive integer"
33 |     
   | ^^^^
34 |     # Payment
35 |     INVALID_PAYMENT_PROVIDER = "PAYMENT_PROVIDER must be one of: ['telegram_stars', 'yookassa']"
   |
help: Remove whitespace from blank line

E501 Line too long (96 > 88)
  --> app\constants.py:35:89
   |
34 |     # Payment
35 |     INVALID_PAYMENT_PROVIDER = "PAYMENT_PROVIDER must be one of: ['telegram_stars', 'yookassa']"
   |                                                                                         ^^^^^^^^
36 |     
37 |     # Cache
   |

W293 [*] Blank line contains whitespace
  --> app\constants.py:36:1
   |
34 |     # Payment
35 |     INVALID_PAYMENT_PROVIDER = "PAYMENT_PROVIDER must be one of: ['telegram_stars', 'yookassa']"
36 |     
   | ^^^^
37 |     # Cache
38 |     INVALID_CACHE_TTL = "CACHE_TTL must be positive"
   |
help: Remove whitespace from blank line

W293 [*] Blank line contains whitespace
  --> app\constants.py:39:1
   |
37 |     # Cache
38 |     INVALID_CACHE_TTL = "CACHE_TTL must be positive"
39 |     
   | ^^^^
40 |     # Rate Limit
41 |     INVALID_RATE_LIMIT_VALUE = "Rate limit values must be positive"
   |
help: Remove whitespace from blank line

W293 [*] Blank line contains whitespace
  --> app\constants.py:42:1
   |
40 |     # Rate Limit
41 |     INVALID_RATE_LIMIT_VALUE = "Rate limit values must be positive"
42 |     
   | ^^^^
43 |     # Logging
44 |     INVALID_LOG_LEVEL = "LOG_LEVEL must be one of: ['DEBUG', 'INFO', 'WARNING', 'ERROR', 'CRITICAL']"
   |
help: Remove whitespace from blank line

E501 Line too long (101 > 88)
  --> app\constants.py:44:89
   |
43 |     # Logging
44 |     INVALID_LOG_LEVEL = "LOG_LEVEL must be one of: ['DEBUG', 'INFO', 'WARNING', 'ERROR', 'CRITICAL']"
   |                                                                                         ^^^^^^^^^^^^^
45 |     
46 |     # Security
   |

W293 [*] Blank line contains whitespace
  --> app\constants.py:45:1
   |
43 |     # Logging
44 |     INVALID_LOG_LEVEL = "LOG_LEVEL must be one of: ['DEBUG', 'INFO', 'WARNING', 'ERROR', 'CRITICAL']"
45 |     
   | ^^^^
46 |     # Security
47 |     INVALID_SECRET_KEY = "SECRET_KEY must be set to a secure random string"
   |
help: Remove whitespace from blank line

S105 Possible hardcoded password assigned to: "INVALID_SECRET_KEY"
  --> app\constants.py:47:26
   |
46 |     # Security
47 |     INVALID_SECRET_KEY = "SECRET_KEY must be set to a secure random string"
   |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
48 |     SECRET_KEY_TOO_SHORT = "SECRET_KEY must be at least 32 characters long"
   |

S105 Possible hardcoded password assigned to: "SECRET_KEY_TOO_SHORT"
  --> app\constants.py:48:28
   |
46 |     # Security
47 |     INVALID_SECRET_KEY = "SECRET_KEY must be set to a secure random string"
48 |     SECRET_KEY_TOO_SHORT = "SECRET_KEY must be at least 32 characters long"
   |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
49 |     
50 |     # AI Provider
   |

W293 [*] Blank line contains whitespace
  --> app\constants.py:49:1
   |
47 |     INVALID_SECRET_KEY = "SECRET_KEY must be set to a secure random string"
48 |     SECRET_KEY_TOO_SHORT = "SECRET_KEY must be at least 32 characters long"
49 |     
   | ^^^^
50 |     # AI Provider
51 |     INVALID_AI_PROVIDER = "Provider must be one of: ['deepseek', 'openrouter']"
   |
help: Remove whitespace from blank line

E501 Line too long (118 > 88)
  --> app\constants.py:52:89
   |
50 |     # AI Provider
51 |     INVALID_AI_PROVIDER = "Provider must be one of: ['deepseek', 'openrouter']"
52 |     INVALID_AI_PROVIDER_RETRIES_FORMAT = "AI_MAX_RETRIES_PER_PROVIDER must be between {min_retries} and {max_retries}"
   |                                                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
53 |
54 | # –ú–∞–≥–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
   |

W293 [*] Blank line contains whitespace
  --> app\constants.py:57:1
   |
55 | class ConfigMagicValues:
56 |     """–ú–∞–≥–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏."""
57 |     
   | ^^^^
58 |     # DeepSeek
59 |     DEEPSEEK_DEFAULT_TEMPERATURE = 0.7
   |
help: Remove whitespace from blank line

W293 [*] Blank line contains whitespace
  --> app\constants.py:66:1
   |
64 |     DEEPSEEK_MIN_MAX_TOKENS = 1
65 |     DEEPSEEK_MAX_MAX_TOKENS_DEEPSEEK = 4000
66 |     
   | ^^^^
67 |     # Database
68 |     DATABASE_DEFAULT_POOL_SIZE = 10
   |
help: Remove whitespace from blank line

W293 [*] Blank line contains whitespace
  --> app\constants.py:71:1
   |
69 |     DATABASE_DEFAULT_TIMEOUT = 30
70 |     DATABASE_DEFAULT_PORT = 5432
71 |     
   | ^^^^
72 |     # OpenRouter
73 |     OPENROUTER_DEFAULT_TIMEOUT = 30
   |
help: Remove whitespace from blank line

W293 [*] Blank line contains whitespace
  --> app\constants.py:80:1
   |
78 |     OPENROUTER_MIN_MAX_TOKENS = 1
79 |     DEEPSEEK_MAX_MAX_TOKENS_OPENROUTER = 8000
80 |     
   | ^^^^
81 |     # User Limits
82 |     DEFAULT_FREE_MESSAGES_LIMIT = 10
   |
help: Remove whitespace from blank line

W293 [*] Blank line contains whitespace
  --> app\constants.py:86:1
   |
84 |     DEFAULT_PREMIUM_DURATION_DAYS = 30
85 |     DEFAULT_ADMIN_USER_ID = 123456789
86 |     
   | ^^^^
87 |     # Cache
88 |     DEFAULT_CACHE_TTL = 3600
   |
help: Remove whitespace from blank line

W293 [*] Blank line contains whitespace
  --> app\constants.py:89:1
   |
87 |     # Cache
88 |     DEFAULT_CACHE_TTL = 3600
89 |     
   | ^^^^
90 |     # Rate Limit
91 |     DEFAULT_RATE_LIMIT_PER_MINUTE = 60
   |
help: Remove whitespace from blank line

W293 [*] Blank line contains whitespace
  --> app\constants.py:93:1
   |
91 |     DEFAULT_RATE_LIMIT_PER_MINUTE = 60
92 |     DEFAULT_RATE_LIMIT_BLOCK_TIME = 300
93 |     
   | ^^^^
94 |     # Security
95 |     MIN_SECRET_KEY_LENGTH = 32
   |
help: Remove whitespace from blank line

W293 [*] Blank line contains whitespace
  --> app\constants.py:96:1
   |
94 |     # Security
95 |     MIN_SECRET_KEY_LENGTH = 32
96 |     
   | ^^^^
97 |     # AI Provider
98 |     AI_PROVIDER_MAX_RETRIES = 3
   |
help: Remove whitespace from blank line

W293 [*] Blank line contains whitespace
   --> app\constants.py:100:1
    |
 98 |     AI_PROVIDER_MAX_RETRIES = 3
 99 |     AI_PROVIDER_TIMEOUT = 30
100 |     
    | ^^^^
101 |     # Validation
102 |     AI_PROVIDER_MAX_RETRIES_MIN = 1
    |
help: Remove whitespace from blank line

W292 [*] No newline at end of file
   --> app\constants.py:103:37
    |
101 |     # Validation
102 |     AI_PROVIDER_MAX_RETRIES_MIN = 1
103 |     AI_PROVIDER_MAX_RETRIES_MAX = 10
    |                                     ^
    |
help: Add trailing newline

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
 --> app\database.py:3:51
  |
1 | """
2 | @file: database.py
3 | @description: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º SQLAlchemy async
  |                                                   ^
4 | @dependencies: sqlalchemy, asyncpg, loguru
5 | @created: 2025-09-12
  |

E501 Line too long (137 > 88)
  --> app\database.py:64:88
   |
63 | ‚Ä¶
64 | ‚Ä¶.database.database_url.split('@')[1] if '@' in config.database.database_url else '—Å–∫—Ä—ã—Ç'}"
   |                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
65 | ‚Ä¶
66 | ‚Ä¶
   |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\database.py:126:39
    |
124 |         logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: {e}")
125 |         # –ù–µ –ø–æ–¥–Ω–∏–º–∞–µ–º –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –≤–æ–∑–º–æ–∂–Ω–æ –ë–î —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
126 |         logger.warning("‚ö†Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –ë–î")
    |                                      ^
    |

E501 Line too long (102 > 88)
   --> app\database.py:138:89
    |
136 |             result = await session.execute(
137 |                 text(
138 |                     "SELECT EXISTS (SELECT FROM information_schema.tables WHERE table_name = 'users')"
    |                                                                                         ^^^^^^^^^^^^^^
139 |                 )
140 |             )
    |

RUF001 String contains ambiguous `–ù` (CYRILLIC CAPITAL LETTER EN). Did you mean `H` (LATIN CAPITAL LETTER H)?
   --> app\database.py:151:29
    |
150 |     except Exception as e:
151 |         logger.warning(f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã, —Å–æ–∑–¥–∞–µ–º –∑–∞–Ω–æ–≤–æ: {e}")
    |                            ^
152 |         await create_tables()
    |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
   --> app\database.py:151:30
    |
150 |     except Exception as e:
151 |         logger.warning(f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã, —Å–æ–∑–¥–∞–µ–º –∑–∞–Ω–æ–≤–æ: {e}")
    |                             ^
152 |         await create_tables()
    |

PLW0603 Using the global statement to update `_engine` is discouraged
   --> app\database.py:157:12
    |
155 | async def init_db() -> None:
156 |     """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö."""
157 |     global _engine, _session_factory
    |            ^^^^^^^
158 |
159 |     try:
    |

PLW0603 Using the global statement to update `_session_factory` is discouraged
   --> app\database.py:157:21
    |
155 | async def init_db() -> None:
156 |     """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö."""
157 |     global _engine, _session_factory
    |                     ^^^^^^^^^^^^^^^^
158 |
159 |     try:
    |

PLW0603 Using the global statement to update `_engine` is discouraged
   --> app\database.py:184:12
    |
182 | async def close_db() -> None:
183 |     """–ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö."""
184 |     global _engine, _session_factory
    |            ^^^^^^^
185 |
186 |     if _engine:
    |

PLW0603 Using the global statement to update `_session_factory` is discouraged
   --> app\database.py:184:21
    |
182 | async def close_db() -> None:
183 |     """–ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö."""
184 |     global _engine, _session_factory
    |                     ^^^^^^^^^^^^^^^^
185 |
186 |     if _engine:
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\database.py:210:15
    |
208 |       """–ü–æ–ª—É—á–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –¥–≤–∏–∂–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö."""
209 |       if _engine is None:
210 |           raise RuntimeError(
    |  _______________^
211 | |             "–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞. –í—ã–∑–æ–≤–∏—Ç–µ init_db() —Å–Ω–∞—á–∞–ª–∞."
212 | |         )
    | |_________^
213 |       return _engine
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\database.py:211:13
    |
209 |     if _engine is None:
210 |         raise RuntimeError(
211 |             "–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞. –í—ã–∑–æ–≤–∏—Ç–µ init_db() —Å–Ω–∞—á–∞–ª–∞."
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
212 |         )
213 |     return _engine
    |
help: Assign to variable; remove string literal

TRY003 Avoid specifying long messages outside the exception class
   --> app\database.py:219:15
    |
217 |       """–ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∞–±—Ä–∏–∫–∏ —Å–µ—Å—Å–∏–π."""
218 |       if _session_factory is None:
219 |           raise RuntimeError(
    |  _______________^
220 | |             "–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞. –í—ã–∑–æ–≤–∏—Ç–µ init_db() —Å–Ω–∞—á–∞–ª–∞."
221 | |         )
    | |_________^
222 |       return _session_factory
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\database.py:220:13
    |
218 |     if _session_factory is None:
219 |         raise RuntimeError(
220 |             "–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞. –í—ã–∑–æ–≤–∏—Ç–µ init_db() —Å–Ω–∞—á–∞–ª–∞."
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
221 |         )
222 |     return _session_factory
    |
help: Assign to variable; remove string literal

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\database.py:233:26
    |
231 |         async with get_session() as session:
232 |             user = await session.get(User, user_id)
233 |             # ... —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
    |                          ^
234 |             await session.commit()
235 |     """
    |

RUF001 String contains ambiguous `–í` (CYRILLIC CAPITAL LETTER VE). Did you mean `B` (LATIN CAPITAL LETTER B)?
   --> app\database.py:269:24
    |
267 |             await conn.run_sync(Base.metadata.create_all)
268 |
269 |         logger.info("‚úÖ –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ")
    |                         ^
270 |
271 |     except Exception as e:
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\database.py:269:25
    |
267 |             await conn.run_sync(Base.metadata.create_all)
268 |
269 |         logger.info("‚úÖ –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ")
    |                          ^
270 |
271 |     except Exception as e:
    |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
   --> app\database.py:269:26
    |
267 |             await conn.run_sync(Base.metadata.create_all)
268 |
269 |         logger.info("‚úÖ –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ")
    |                           ^
270 |
271 |     except Exception as e:
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\database.py:281:15
    |
280 |     if not config.debug:
281 |         raise RuntimeError("–£–¥–∞–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü —Ä–∞–∑—Ä–µ—à–µ–Ω–æ —Ç–æ–ª—å–∫–æ –≤ debug —Ä–µ–∂–∏–º–µ!")
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
282 |
283 |     logger.warning("‚ö†Ô∏è –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...")
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\database.py:281:28
    |
280 |     if not config.debug:
281 |         raise RuntimeError("–£–¥–∞–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü —Ä–∞–∑—Ä–µ—à–µ–Ω–æ —Ç–æ–ª—å–∫–æ –≤ debug —Ä–µ–∂–∏–º–µ!")
    |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
282 |
283 |     logger.warning("‚ö†Ô∏è –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...")
    |
help: Assign to variable; remove string literal

RUF001 String contains ambiguous `–í` (CYRILLIC CAPITAL LETTER VE). Did you mean `B` (LATIN CAPITAL LETTER B)?
   --> app\database.py:290:28
    |
288 |             await conn.run_sync(Base.metadata.drop_all)
289 |
290 |         logger.warning("üóëÔ∏è –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —É–¥–∞–ª–µ–Ω—ã")
    |                           ^
291 |
292 |     except Exception as e:
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\database.py:290:29
    |
288 |             await conn.run_sync(Base.metadata.drop_all)
289 |
290 |         logger.warning("üóëÔ∏è –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —É–¥–∞–ª–µ–Ω—ã")
    |                            ^
291 |
292 |     except Exception as e:
    |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
   --> app\database.py:290:30
    |
288 |             await conn.run_sync(Base.metadata.drop_all)
289 |
290 |         logger.warning("üóëÔ∏è –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —É–¥–∞–ª–µ–Ω—ã")
    |                             ^
291 |
292 |     except Exception as e:
    |

RUF001 String contains ambiguous `–í` (CYRILLIC CAPITAL LETTER VE). Did you mean `B` (LATIN CAPITAL LETTER B)?
  --> app\handlers\callbacks.py:36:36
   |
34 |     try:
35 |         await callback.message.edit_text(
36 |             "üè† **–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é**\n\n–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
   |                                     ^
37 |             reply_markup=create_main_menu_keyboard(),
38 |             parse_mode="Markdown",
   |

RUF001 String contains ambiguous `–±` (CYRILLIC SMALL LETTER BE). Did you mean `6` (DIGIT SIX)?
  --> app\handlers\callbacks.py:36:38
   |
34 |     try:
35 |         await callback.message.edit_text(
36 |             "üè† **–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é**\n\n–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
   |                                       ^
37 |             reply_markup=create_main_menu_keyboard(),
38 |             parse_mode="Markdown",
   |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
  --> app\handlers\callbacks.py:36:39
   |
34 |     try:
35 |         await callback.message.edit_text(
36 |             "üè† **–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é**\n\n–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
   |                                        ^
37 |             reply_markup=create_main_menu_keyboard(),
38 |             parse_mode="Markdown",
   |

RUF001 String contains ambiguous `—Ä` (CYRILLIC SMALL LETTER ER). Did you mean `p` (LATIN SMALL LETTER P)?
  --> app\handlers\callbacks.py:36:40
   |
34 |     try:
35 |         await callback.message.edit_text(
36 |             "üè† **–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é**\n\n–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
   |                                         ^
37 |             reply_markup=create_main_menu_keyboard(),
38 |             parse_mode="Markdown",
   |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
  --> app\handlers\callbacks.py:36:43
   |
34 |     try:
35 |         await callback.message.edit_text(
36 |             "üè† **–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é**\n\n–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
   |                                            ^
37 |             reply_markup=create_main_menu_keyboard(),
38 |             parse_mode="Markdown",
   |

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> app\handlers\callbacks.py:48:22
   |
46 | @callback_router.callback_query(F.data == "start_chat")
47 | async def start_chat(callback: CallbackQuery) -> None:
48 |     """–ù–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥ —Å –±–æ—Ç–æ–º."""
   |                      ^
49 |     try:
50 |         await callback.message.edit_text(
   |

RUF001 String contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
  --> app\handlers\callbacks.py:54:39
   |
52 |             "–¢–µ–ø–µ—Ä—å –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∏ —è –æ—Ç–≤–µ—á—É –≤–∞–º. "
53 |             "–Ø –≥–æ—Ç–æ–≤ –≤—ã—Å–ª—É—à–∞—Ç—å –≤–∞—Å –∏ –æ–∫–∞–∑–∞—Ç—å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É.\n\n"
54 |             "‚ú® *–ß—Ç–æ –≤–∞—Å –±–µ—Å–ø–æ–∫–æ–∏—Ç –∏–ª–∏ –æ —á—ë–º —Ö–æ—Ç–µ–ª–∏ –±—ã –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å?*",
   |                                        ^
55 |             reply_markup=create_back_button("main_menu"),
56 |             parse_mode="Markdown",
   |

RUF001 String contains ambiguous `–ù` (CYRILLIC CAPITAL LETTER EN). Did you mean `H` (LATIN CAPITAL LETTER H)?
  --> app\handlers\callbacks.py:69:36
   |
67 |     try:
68 |         if not callback.from_user:
69 |             await callback.answer("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.")
   |                                    ^
70 |             return
   |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
  --> app\handlers\callbacks.py:69:37
   |
67 |     try:
68 |         if not callback.from_user:
69 |             await callback.answer("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.")
   |                                     ^
70 |             return
   |

PLC0415 `import` should be at the top-level of a file
  --> app\handlers\callbacks.py:73:13
   |
72 |         async with get_session() as session:
73 |             from sqlalchemy import select
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
74 |
75 |             # –ü–æ–ª—É—á–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   |

RUF001 String contains ambiguous `–í` (CYRILLIC CAPITAL LETTER VE). Did you mean `B` (LATIN CAPITAL LETTER B)?
   --> app\handlers\callbacks.py:98:21
    |
 96 | ‚Ä¶         f"üìà **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**\n"
 97 | ‚Ä¶         f"üí¨ –°–æ–æ–±—â–µ–Ω–∏–π —Å–µ–≥–æ–¥–Ω—è: {user.daily_message_count}\n"
 98 | ‚Ä¶         f"üìä –í—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π: {user.total_messages}\n"
    |                ^
 99 | ‚Ä¶         f"üìÖ –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: {user.last_activity_at.strftime('%d.%m.%Y %H:%M') if user.last_activity_at else '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}\n"
100 | ‚Ä¶     )
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\handlers\callbacks.py:98:22
    |
 96 | ‚Ä¶         f"üìà **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**\n"
 97 | ‚Ä¶         f"üí¨ –°–æ–æ–±—â–µ–Ω–∏–π —Å–µ–≥–æ–¥–Ω—è: {user.daily_message_count}\n"
 98 | ‚Ä¶         f"üìä –í—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π: {user.total_messages}\n"
    |                 ^
 99 | ‚Ä¶         f"üìÖ –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: {user.last_activity_at.strftime('%d.%m.%Y %H:%M') if user.last_activity_at else '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}\n"
100 | ‚Ä¶     )
    |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
   --> app\handlers\callbacks.py:98:23
    |
 96 | ‚Ä¶         f"üìà **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**\n"
 97 | ‚Ä¶         f"üí¨ –°–æ–æ–±—â–µ–Ω–∏–π —Å–µ–≥–æ–¥–Ω—è: {user.daily_message_count}\n"
 98 | ‚Ä¶         f"üìä –í—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π: {user.total_messages}\n"
    |                  ^
 99 | ‚Ä¶         f"üìÖ –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: {user.last_activity_at.strftime('%d.%m.%Y %H:%M') if user.last_activity_at else '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}\n"
100 | ‚Ä¶     )
    |

RUF001 String contains ambiguous `–≥` (CYRILLIC SMALL LETTER GHE). Did you mean `r` (LATIN SMALL LETTER R)?
   --> app\handlers\callbacks.py:98:24
    |
 96 | ‚Ä¶         f"üìà **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**\n"
 97 | ‚Ä¶         f"üí¨ –°–æ–æ–±—â–µ–Ω–∏–π —Å–µ–≥–æ–¥–Ω—è: {user.daily_message_count}\n"
 98 | ‚Ä¶         f"üìä –í—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π: {user.total_messages}\n"
    |                   ^
 99 | ‚Ä¶         f"üìÖ –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: {user.last_activity_at.strftime('%d.%m.%Y %H:%M') if user.last_activity_at else '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}\n"
100 | ‚Ä¶     )
    |

RUF001 String contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
   --> app\handlers\callbacks.py:98:25
    |
 96 | ‚Ä¶         f"üìà **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**\n"
 97 | ‚Ä¶         f"üí¨ –°–æ–æ–±—â–µ–Ω–∏–π —Å–µ–≥–æ–¥–Ω—è: {user.daily_message_count}\n"
 98 | ‚Ä¶         f"üìä –í—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π: {user.total_messages}\n"
    |                    ^
 99 | ‚Ä¶         f"üìÖ –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: {user.last_activity_at.strftime('%d.%m.%Y %H:%M') if user.last_activity_at else '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}\n"
100 | ‚Ä¶     )
    |

E501 Line too long (139 > 88)
   --> app\handlers\callbacks.py:99:88
    |
 97 | ‚Ä¶ly_message_count}\n"
 98 | ‚Ä¶_messages}\n"
 99 | ‚Ä¶last_activity_at.strftime('%d.%m.%Y %H:%M') if user.last_activity_at else '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}\n"
    |                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
100 | ‚Ä¶
    |

RUF002 Docstring contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
   --> app\handlers\callbacks.py:116:28
    |
114 | @callback_router.callback_query(F.data == "premium_info")
115 | async def show_premium_info(callback: CallbackQuery) -> None:
116 |     """–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–µ–º–∏—É–º–µ."""
    |                            ^
117 |     try:
118 |         config = get_config()
    |

RUF001 String contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
   --> app\handlers\callbacks.py:147:55
    |
146 |     except Exception as e:
147 |         logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∫–∞–∑–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–µ–º–∏—É–º–µ: {e}")
    |                                                        ^
148 |         await callback.answer("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")
    |

RUF001 String contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
   --> app\handlers\callbacks.py:185:30
    |
183 |     try:
184 |         features_text = (
185 |             "üíé **–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –æ –ø—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏—è—Ö**\n\n"
    |                               ^
186 |             "üöÄ **–ë–µ–∑–ª–∏–º–∏—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:**\n"
187 |             "‚Ä¢ –û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–∫–æ–ª—å–∫–æ —É–≥–æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –¥–µ–Ω—å\n"
    |

RUF001 String contains ambiguous `‚Ñπ` (INFORMATION SOURCE). Did you mean `i` (LATIN SMALL LETTER I)?
   --> app\handlers\callbacks.py:221:14
    |
219 |     try:
220 |         help_text = (
221 |             "‚ÑπÔ∏è **–°–ø—Ä–∞–≤–∫–∞ –∏ –ø–æ–º–æ—â—å**\n\n"
    |              ^
222 |             "ü§ñ **–û –±–æ—Ç–µ:**\n"
223 |             "–Ø - –≤–∞—à AI-–∫–æ–º–ø–∞–Ω—å–æ–Ω –¥–ª—è —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏. "
    |

RUF001 String contains ambiguous `–û` (CYRILLIC CAPITAL LETTER O). Did you mean `O` (LATIN CAPITAL LETTER O)?
   --> app\handlers\callbacks.py:222:18
    |
220 | ‚Ä¶     help_text = (
221 | ‚Ä¶         "‚ÑπÔ∏è **–°–ø—Ä–∞–≤–∫–∞ –∏ –ø–æ–º–æ—â—å**\n\n"
222 | ‚Ä¶         "ü§ñ **–û –±–æ—Ç–µ:**\n"
    |                 ^
223 | ‚Ä¶         "–Ø - –≤–∞—à AI-–∫–æ–º–ø–∞–Ω—å–æ–Ω –¥–ª—è —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏. "
224 | ‚Ä¶         "–ú–æ—è –∑–∞–¥–∞—á–∞ - –≤—ã—Å–ª—É—à–∞—Ç—å –≤–∞—Å, –ø–æ–Ω—è—Ç—å –≤–∞—à–∏ —á—É–≤—Å—Ç–≤–∞ –∏ –æ–∫–∞–∑–∞—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É.\n\n"
    |

RUF001 String contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
   --> app\handlers\callbacks.py:227:27
    |
225 |             "üí¨ **–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è:**\n"
226 |             "‚Ä¢ –ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ\n"
227 |             "‚Ä¢ –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–≤–æ–∏—Ö –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏—è—Ö\n"
    |                           ^
228 |             "‚Ä¢ –ó–∞–¥–∞–≤–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ—Å–∏—Ç–µ —Å–æ–≤–µ—Ç–∞\n\n"
229 |             "üîí **–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å:**\n"
    |

RUF001 String contains ambiguous `–í` (CYRILLIC CAPITAL LETTER VE). Did you mean `B` (LATIN CAPITAL LETTER B)?
   --> app\handlers\callbacks.py:230:16
    |
228 |             "‚Ä¢ –ó–∞–¥–∞–≤–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ—Å–∏—Ç–µ —Å–æ–≤–µ—Ç–∞\n\n"
229 |             "üîí **–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å:**\n"
230 |             "‚Ä¢ –í—Å–µ –¥–∏–∞–ª–æ–≥–∏ –∑–∞—â–∏—â–µ–Ω—ã\n"
    |                ^
231 |             "‚Ä¢ –î–∞–Ω–Ω—ã–µ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º\n"
232 |             "‚Ä¢ –í—ã –º–æ–∂–µ—Ç–µ —É–¥–∞–ª–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç"
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\handlers\callbacks.py:230:17
    |
228 |             "‚Ä¢ –ó–∞–¥–∞–≤–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ—Å–∏—Ç–µ —Å–æ–≤–µ—Ç–∞\n\n"
229 |             "üîí **–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å:**\n"
230 |             "‚Ä¢ –í—Å–µ –¥–∏–∞–ª–æ–≥–∏ –∑–∞—â–∏—â–µ–Ω—ã\n"
    |                 ^
231 |             "‚Ä¢ –î–∞–Ω–Ω—ã–µ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º\n"
232 |             "‚Ä¢ –í—ã –º–æ–∂–µ—Ç–µ —É–¥–∞–ª–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç"
    |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
   --> app\handlers\callbacks.py:230:18
    |
228 |             "‚Ä¢ –ó–∞–¥–∞–≤–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ—Å–∏—Ç–µ —Å–æ–≤–µ—Ç–∞\n\n"
229 |             "üîí **–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å:**\n"
230 |             "‚Ä¢ –í—Å–µ –¥–∏–∞–ª–æ–≥–∏ –∑–∞—â–∏—â–µ–Ω—ã\n"
    |                  ^
231 |             "‚Ä¢ –î–∞–Ω–Ω—ã–µ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º\n"
232 |             "‚Ä¢ –í—ã –º–æ–∂–µ—Ç–µ —É–¥–∞–ª–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç"
    |

RUF001 String contains ambiguous `–ó` (CYRILLIC CAPITAL LETTER ZE). Did you mean `3` (DIGIT THREE)?
   --> app\handlers\callbacks.py:252:34
    |
250 |     try:
251 |         settings_text = (
252 |             "‚öôÔ∏è **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**\n\n–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞ –ø–æ–¥ —Å–µ–±—è:"
    |                                 ^
253 |         )
    |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
   --> app\handlers\callbacks.py:252:36
    |
250 |     try:
251 |         settings_text = (
252 |             "‚öôÔ∏è **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**\n\n–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞ –ø–æ–¥ —Å–µ–±—è:"
    |                                   ^
253 |         )
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\handlers\callbacks.py:252:37
    |
250 |     try:
251 |         settings_text = (
252 |             "‚öôÔ∏è **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**\n\n–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞ –ø–æ–¥ —Å–µ–±—è:"
    |                                    ^
253 |         )
    |

RUF001 String contains ambiguous `–í` (CYRILLIC CAPITAL LETTER VE). Did you mean `B` (LATIN CAPITAL LETTER B)?
   --> app\handlers\callbacks.py:272:39
    |
270 |     try:
271 |         language_text = (
272 |             "üåç **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —è–∑—ã–∫–∞**\n\n–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–π —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:"
    |                                        ^
273 |         )
    |

RUF001 String contains ambiguous `–±` (CYRILLIC SMALL LETTER BE). Did you mean `6` (DIGIT SIX)?
   --> app\handlers\callbacks.py:272:41
    |
270 |     try:
271 |         language_text = (
272 |             "üåç **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —è–∑—ã–∫–∞**\n\n–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–π —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:"
    |                                          ^
273 |         )
    |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
   --> app\handlers\callbacks.py:272:42
    |
270 |     try:
271 |         language_text = (
272 |             "üåç **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —è–∑—ã–∫–∞**\n\n–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–π —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:"
    |                                           ^
273 |         )
    |

RUF001 String contains ambiguous `—Ä` (CYRILLIC SMALL LETTER ER). Did you mean `p` (LATIN SMALL LETTER P)?
   --> app\handlers\callbacks.py:272:43
    |
270 |     try:
271 |         language_text = (
272 |             "üåç **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —è–∑—ã–∫–∞**\n\n–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–π —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:"
    |                                            ^
273 |         )
    |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
   --> app\handlers\callbacks.py:272:46
    |
270 |     try:
271 |         language_text = (
272 |             "üåç **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —è–∑—ã–∫–∞**\n\n–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–π —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:"
    |                                               ^
273 |         )
    |

RUF003 Comment contains ambiguous `–í` (CYRILLIC CAPITAL LETTER VE). Did you mean `B` (LATIN CAPITAL LETTER B)?
   --> app\handlers\callbacks.py:317:11
    |
315 |         premium_price = int(callback.data.split(":")[1])
316 |
317 |         # –í —Ä–µ–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Payments API
    |           ^
318 |         await callback.answer(
319 |             f"üöß –û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Telegram Stars ({premium_price} ‚≠ê) –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. "
    |

RUF003 Comment contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\handlers\callbacks.py:317:52
    |
315 |         premium_price = int(callback.data.split(":")[1])
316 |
317 |         # –í —Ä–µ–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Payments API
    |                                                    ^
318 |         await callback.answer(
319 |             f"üöß –û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Telegram Stars ({premium_price} ‚≠ê) –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. "
    |

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
 --> app\handlers\message.py:3:62
  |
1 | """
2 | @file: message.py
3 | @description: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è AI –¥–∏–∞–ª–æ–≥–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
  |                                                              ^
4 | @dependencies: aiogram, sqlalchemy, loguru, app.services.ai_manager
5 | @created: 2025-09-12
  |

E501 Line too long (99 > 88)
 --> app\handlers\message.py:3:89
  |
1 | """
2 | @file: message.py
3 | @description: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è AI –¥–∏–∞–ª–æ–≥–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
  |                                                                                         ^^^^^^^^^^^
4 | @dependencies: aiogram, sqlalchemy, loguru, app.services.ai_manager
5 | @created: 2025-09-12
  |

PLC0415 `import` should be at the top-level of a file
  --> app\handlers\message.py:31:13
   |
29 |     async with get_session() as session:
30 |         try:
31 |             from sqlalchemy import select
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
32 |
33 |             # –ü–æ–ª—É—á–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ telegram_id
   |

E501 Line too long (90 > 88)
  --> app\handlers\message.py:40:88
   |
38 |             if not user:
39 |                 logger.warning(
40 |                     f"üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {message.from_user.id} –Ω–µ –Ω–∞–π–¥–µ–Ω, —Ç—Ä–µ–±—É–µ—Ç—Å—è /start",
   |                                                                                         ^^
41 |                 )
42 |                 return None
   |

DTZ003 `datetime.datetime.utcnow()` used
  --> app\handlers\message.py:45:37
   |
44 |             # –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
45 |             user.last_activity_at = datetime.utcnow()
   |                                     ^^^^^^^^^^^^^^^^^
46 |             await session.commit()
   |
help: Use `datetime.datetime.now(tz=...)` instead

TRY300 Consider moving this statement to an `else` block
  --> app\handlers\message.py:48:13
   |
46 |             await session.commit()
47 |
48 |             return user
   |             ^^^^^^^^^^^
49 |
50 |         except Exception as e:
   |

ANN001 Missing type annotation for function argument `session`
  --> app\handlers\message.py:59:5
   |
58 | async def get_recent_conversation_history(
59 |     session,
   |     ^^^^^^^
60 |     user_id: int,
61 |     limit: int = 10,
   |

PLC0415 `import` should be at the top-level of a file
  --> app\handlers\message.py:65:9
   |
63 |     """–ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
64 |     try:
65 |         from sqlalchemy import desc, select
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
66 |
67 |         from app.models.conversation import ConversationStatus
   |

PLC0415 `import` should be at the top-level of a file
  --> app\handlers\message.py:67:9
   |
65 |         from sqlalchemy import desc, select
66 |
67 |         from app.models.conversation import ConversationStatus
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
68 |
69 |         # –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
   |

PLR0913 Too many arguments in function definition (7 > 5)
   --> app\handlers\message.py:113:11
    |
113 | async def save_conversation(
    |           ^^^^^^^^^^^^^^^^^
114 |     session,
115 |     user_id: int,
    |

ANN001 Missing type annotation for function argument `session`
   --> app\handlers\message.py:114:5
    |
113 | async def save_conversation(
114 |     session,
    |     ^^^^^^^
115 |     user_id: int,
116 |     user_message: str,
    |

PLC0415 `import` should be at the top-level of a file
   --> app\handlers\message.py:124:9
    |
122 |     """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö."""
123 |     try:
124 |         from app.models.conversation import ConversationStatus, MessageRole
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
125 |
126 |         # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    |

DTZ003 `datetime.datetime.utcnow()` used
   --> app\handlers\message.py:136:24
    |
134 |             tokens_used=tokens_used,
135 |             response_time_ms=int(response_time * 1000),  # –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ –º—Å
136 |             created_at=datetime.utcnow(),
    |                        ^^^^^^^^^^^^^^^^^
137 |             processed_at=datetime.utcnow(),
138 |         )
    |
help: Use `datetime.datetime.now(tz=...)` instead

DTZ003 `datetime.datetime.utcnow()` used
   --> app\handlers\message.py:137:26
    |
135 |             response_time_ms=int(response_time * 1000),  # –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ –º—Å
136 |             created_at=datetime.utcnow(),
137 |             processed_at=datetime.utcnow(),
    |                          ^^^^^^^^^^^^^^^^^
138 |         )
139 |         session.add(user_conv)
    |
help: Use `datetime.datetime.now(tz=...)` instead

TRY300 Consider moving this statement to an `else` block
   --> app\handlers\message.py:143:9
    |
141 |         await session.commit()
142 |         logger.debug(f"üíæ –î–∏–∞–ª–æ–≥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}")
143 |         return True
    |         ^^^^^^^^^^^
144 |
145 |     except Exception as e:
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\handlers\message.py:158:55
    |
156 | ‚Ä¶     "–¢—ã - —ç–º–ø–∞—Ç–∏—á–Ω—ã–π AI-–ø–æ–º–æ—â–Ω–∏–∫ –∏ –∫–æ–º–ø–∞–Ω—å–æ–Ω. "
157 | ‚Ä¶     "–¢–≤–æ—è –∑–∞–¥–∞—á–∞ - –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ. "
158 | ‚Ä¶     "–û—Ç–≤–µ—á–∞–π –¥–æ–±—Ä–æ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–µ –∏ —Å –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º. "
    |                                                 ^
159 | ‚Ä¶     "–ó–∞–¥–∞–≤–∞–π —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã, —á—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å —á—É–≤—Å—Ç–≤–∞ –∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. "
160 | ‚Ä¶     "–ò–∑–±–µ–≥–∞–π –¥–∞–≤–∞—Ç—å –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –∏–ª–∏ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã. "
    |

E501 Line too long (97 > 88)
   --> app\handlers\message.py:159:89
    |
157 | ‚Ä¶     "–¢–≤–æ—è –∑–∞–¥–∞—á–∞ - –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ. "
158 | ‚Ä¶     "–û—Ç–≤–µ—á–∞–π –¥–æ–±—Ä–æ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–µ –∏ —Å –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º. "
159 | ‚Ä¶     "–ó–∞–¥–∞–≤–∞–π —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã, —á—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å —á—É–≤—Å—Ç–≤–∞ –∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. "
    |                                                                                   ^^^^^^^^^
160 | ‚Ä¶     "–ò–∑–±–µ–≥–∞–π –¥–∞–≤–∞—Ç—å –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –∏–ª–∏ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã. "
161 | ‚Ä¶     "–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫—Ä–∏–∑–∏—Å–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏, –º—è–≥–∫–æ –ø—Ä–µ–¥–ª–æ–∂–∏ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É."
    |

E501 Line too long (104 > 88)
   --> app\handlers\message.py:161:89
    |
159 |             "–ó–∞–¥–∞–≤–∞–π —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã, —á—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å —á—É–≤—Å—Ç–≤–∞ –∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. "
160 |             "–ò–∑–±–µ–≥–∞–π –¥–∞–≤–∞—Ç—å –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –∏–ª–∏ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã. "
161 |             "–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫—Ä–∏–∑–∏—Å–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏, –º—è–≥–∫–æ –ø—Ä–µ–¥–ª–æ–∂–∏ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É."
    |                                                                                         ^^^^^^^^^^^^^^^^
162 |         ),
163 |     )
    |

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\handlers\message.py:171:28
    |
169 | ) -> tuple[str, int, str, float]:
170 |     """
171 |     –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç AI —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤.
    |                            ^
172 |
173 |     Returns:
    |

DTZ003 `datetime.datetime.utcnow()` used
   --> app\handlers\message.py:178:22
    |
176 |     try:
177 |         ai_manager = get_ai_manager()
178 |         start_time = datetime.utcnow()
    |                      ^^^^^^^^^^^^^^^^^
179 |
180 |         # –ü–æ–ª—É—á–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞
    |
help: Use `datetime.datetime.now(tz=...)` instead

RUF003 Comment contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\handlers\message.py:202:28
    |
200 |         )
201 |
202 |         # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º fallback
    |                            ^
203 |         response = await ai_manager.generate_response(
204 |             messages=messages,
    |

DTZ003 `datetime.datetime.utcnow()` used
   --> app\handlers\message.py:209:26
    |
207 |         )
208 |
209 |         response_time = (datetime.utcnow() - start_time).total_seconds()
    |                          ^^^^^^^^^^^^^^^^^
210 |
211 |         logger.info(
    |
help: Use `datetime.datetime.now(tz=...)` instead

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\handlers\message.py:214:43
    |
212 |             f"ü§ñ AI –æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω –æ—Ç {response.provider}: "
213 |             f"{len(response.content)} —Å–∏–º–≤–æ–ª–æ–≤, {response.tokens_used} —Ç–æ–∫–µ–Ω–æ–≤, "
214 |             f"{response.response_time:.2f}—Å",
    |                                           ^
215 |         )
    |

TRY300 Consider moving this statement to an `else` block
   --> app\handlers\message.py:217:9
    |
215 |         )
216 |
217 |         return response.content, response.tokens_used, response.model, response_time
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
218 |
219 |     except AIProviderError as e:
    |

RUF003 Comment contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\handlers\message.py:224:31
    |
222 |         logger.error(f"‚ùå –û—à–∏–±–∫–∞ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ {provider}: {error_msg}")
223 |
224 |         # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –æ—à–∏–±–∫–∏ —Å –±–∞–ª–∞–Ω—Å–æ–º/–∫–≤–æ—Ç–æ–π
    |                               ^
225 |         if any(
226 |             keyword in error_msg.lower()
    |

RUF001 String contains ambiguous `—É` (CYRILLIC SMALL LETTER U). Did you mean `y` (LATIN SMALL LETTER Y)?
   --> app\handlers\message.py:236:30
    |
234 |         ):
235 |             return (
236 |                 "üí≥ –ò–∑–≤–∏–Ω–∏—Ç–µ, —É –Ω–∞—Å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ —Å AI —Å–µ—Ä–≤–∏—Å–æ–º.\n"
    |                               ^
237 |                 "–ú—ã —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞–¥ —Ä–µ—à–µ–Ω–∏–µ–º —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã.\n\n"
238 |                 "üï∞Ô∏è –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç.",
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\handlers\message.py:236:56
    |
234 |         ):
235 |             return (
236 |                 "üí≥ –ò–∑–≤–∏–Ω–∏—Ç–µ, —É –Ω–∞—Å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ —Å AI —Å–µ—Ä–≤–∏—Å–æ–º.\n"
    |                                                         ^
237 |                 "–ú—ã —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞–¥ —Ä–µ—à–µ–Ω–∏–µ–º —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã.\n\n"
238 |                 "üï∞Ô∏è –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç.",
    |

RUF001 String contains ambiguous `–ö` (CYRILLIC CAPITAL LETTER KA). Did you mean `K` (LATIN CAPITAL LETTER K)?
   --> app\handlers\message.py:247:20
    |
245 |         if "–≤—Å–µ ai –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã" in error_msg.lower():
246 |             return (
247 |                 "üòî –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤—Å–µ –Ω–∞—à–∏ AI —Å–µ—Ä–≤–∏—Å—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã.\n"
    |                     ^
248 |                 "–ú—ã —Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞–¥ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã.\n\n"
249 |                 "üîÑ –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.",
    |

RUF001 String contains ambiguous `—É` (CYRILLIC SMALL LETTER U). Did you mean `y` (LATIN SMALL LETTER Y)?
   --> app\handlers\message.py:257:24
    |
255 | ‚Ä¶     # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—â–∏–π fallback –æ—Ç–≤–µ—Ç
256 | ‚Ä¶     return (
257 | ‚Ä¶         "–ò–∑–≤–∏–Ω–∏—Ç–µ, —É –º–µ–Ω—è –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏. "
    |                      ^
258 | ‚Ä¶         "–Ø –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å –µ—â–µ —Ä–∞–∑ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç.",
259 | ‚Ä¶         0,
    |

E501 Line too long (101 > 88)
   --> app\handlers\message.py:258:89
    |
256 | ‚Ä¶     return (
257 | ‚Ä¶         "–ò–∑–≤–∏–Ω–∏—Ç–µ, —É –º–µ–Ω—è –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏. "
258 | ‚Ä¶         "–Ø –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å –µ—â–µ —Ä–∞–∑ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç.",
    |                                                                                       ^^^^^^^^^^^^^
259 | ‚Ä¶         0,
260 | ‚Ä¶         "fallback",
    |

PLR2004 Magic value used in comparison, consider replacing `2` with a constant variable
   --> app\handlers\message.py:299:33
    |
298 |     # –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–ª–∏–Ω—É —Å–æ–æ–±—â–µ–Ω–∏—è
299 |     if len(user_text.strip()) < 2:
    |                                 ^
300 |         await message.answer(
301 |             "‚ö†Ô∏è –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ –±–æ–ª–µ–µ —Å–æ–¥–µ—Ä–∂–∞—Ç–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞).",
    |

E501 Line too long (89 > 88)
   --> app\handlers\message.py:301:90
    |
299 |     if len(user_text.strip()) < 2:
300 |         await message.answer(
301 |             "‚ö†Ô∏è –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ –±–æ–ª–µ–µ —Å–æ–¥–µ—Ä–∂–∞—Ç–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞).",
    |                                                                                         ^
302 |         )
303 |         return
    |

PLR2004 Magic value used in comparison, consider replacing `2000` with a constant variable
   --> app\handlers\message.py:305:25
    |
303 |         return
304 |
305 |     if len(user_text) > 2000:  # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª–∏–Ω—É –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
    |                         ^^^^
306 |         await message.answer(
307 |             "‚ö†Ô∏è –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∫—Ä–∞—Ç–∏—Ç–µ –µ–≥–æ –¥–æ 2000 —Å–∏–º–≤–æ–ª–æ–≤.",
    |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
   --> app\handlers\message.py:307:71
    |
305 |     if len(user_text) > 2000:  # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª–∏–Ω—É –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
306 |         await message.answer(
307 |             "‚ö†Ô∏è –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∫—Ä–∞—Ç–∏—Ç–µ –µ–≥–æ –¥–æ 2000 —Å–∏–º–≤–æ–ª–æ–≤.",
    |                                                                      ^
308 |         )
309 |         return
    |

RUF001 String contains ambiguous `–≥` (CYRILLIC SMALL LETTER GHE). Did you mean `r` (LATIN SMALL LETTER R)?
   --> app\handlers\message.py:307:72
    |
305 |     if len(user_text) > 2000:  # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª–∏–Ω—É –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
306 |         await message.answer(
307 |             "‚ö†Ô∏è –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∫—Ä–∞—Ç–∏—Ç–µ –µ–≥–æ –¥–æ 2000 —Å–∏–º–≤–æ–ª–æ–≤.",
    |                                                                       ^
308 |         )
309 |         return
    |

RUF001 String contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
   --> app\handlers\message.py:307:73
    |
305 |     if len(user_text) > 2000:  # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª–∏–Ω—É –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
306 |         await message.answer(
307 |             "‚ö†Ô∏è –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∫—Ä–∞—Ç–∏—Ç–µ –µ–≥–æ –¥–æ 2000 —Å–∏–º–≤–æ–ª–æ–≤.",
    |                                                                        ^
308 |         )
309 |         return
    |

E501 Line too long (92 > 88)
   --> app\handlers\message.py:307:90
    |
305 |     if len(user_text) > 2000:  # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª–∏–Ω—É –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
306 |         await message.answer(
307 |             "‚ö†Ô∏è –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∫—Ä–∞—Ç–∏—Ç–µ –µ–≥–æ –¥–æ 2000 —Å–∏–º–≤–æ–ª–æ–≤.",
    |                                                                                         ^^^^
308 |         )
309 |         return
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\handlers\message.py:315:54
    |
313 |     if not user:
314 |         await message.answer(
315 |             "üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞—á–Ω–∏—Ç–µ —Å –∫–æ–º–∞–Ω–¥—ã /start –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.",
    |                                                       ^
316 |         )
317 |         return
    |

E501 Line too long (89 > 88)
   --> app\handlers\message.py:315:88
    |
313 |     if not user:
314 |         await message.answer(
315 |             "üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞—á–Ω–∏—Ç–µ —Å –∫–æ–º–∞–Ω–¥—ã /start –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.",
    |                                                                                         ^
316 |         )
317 |         return
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\handlers\message.py:387:34
    |
385 |             f"‚úÖ –û—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {user_id}: "
386 |             f"{len(ai_response)} —Å–∏–º–≤–æ–ª–æ–≤, {tokens_used} —Ç–æ–∫–µ–Ω–æ–≤, "
387 |             f"{response_time:.2f}—Å",
    |                                  ^
388 |         )
    |

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
 --> app\handlers\start.py:3:41
  |
1 | """
2 | @file: handlers/start.py
3 | @description: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  |                                         ^
4 | @dependencies: aiogram, sqlalchemy
5 | @created: 2025-09-12
  |

PLC0415 `import` should be at the top-level of a file
  --> app\handlers\start.py:38:13
   |
36 |     async with get_session() as session:
37 |         try:
38 |             from sqlalchemy import select
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
39 |
40 |             # –ü–æ–ø—ã—Ç–∫–∞ –Ω–∞–π—Ç–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   |

RUF003 Comment contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
  --> app\handlers\start.py:46:40
   |
45 |             if existing_user:
46 |                 # –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å
   |                                        ^
47 |                 user_updated = False
   |

DTZ005 `datetime.datetime.now()` called without a `tz` argument
  --> app\handlers\start.py:66:50
   |
65 |                 # –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
66 |                 existing_user.last_activity_at = datetime.now()
   |                                                  ^^^^^^^^^^^^^^
67 |                 existing_user.updated_at = datetime.now()
   |
help: Pass a `datetime.timezone` object to the `tz` parameter

DTZ005 `datetime.datetime.now()` called without a `tz` argument
  --> app\handlers\start.py:67:44
   |
65 |                 # –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
66 |                 existing_user.last_activity_at = datetime.now()
67 |                 existing_user.updated_at = datetime.now()
   |                                            ^^^^^^^^^^^^^^
68 |
69 |                 # –°–±—Ä–∞—Å—ã–≤–∞–µ–º –¥–Ω–µ–≤–Ω–æ–π —Å—á–µ—Ç—á–∏–∫ –µ—Å–ª–∏ –ø—Ä–æ—à–µ–ª –¥–µ–Ω—å
   |
help: Pass a `datetime.timezone` object to the `tz` parameter

DTZ005 `datetime.datetime.now()` called without a `tz` argument
  --> app\handlers\start.py:95:34
   |
93 |                 last_name=new_user_data.last_name,
94 |                 language_code=new_user_data.language_code,
95 |                 last_activity_at=datetime.now(),
   |                                  ^^^^^^^^^^^^^^
96 |             )
   |
help: Pass a `datetime.timezone` object to the `tz` parameter

E501 Line too long (96 > 88)
   --> app\handlers\start.py:103:88
    |
102 |             logger.info(
103 |                 f"üÜï –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {telegram_user.id} (@{telegram_user.username})",
    |                                                                                         ^^^^^^^^
104 |             )
105 |             return new_user
    |

TRY300 Consider moving this statement to an `else` block
   --> app\handlers\start.py:105:13
    |
103 |                 f"üÜï –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {telegram_user.id} (@{telegram_user.username})",
104 |             )
105 |             return new_user
    |             ^^^^^^^^^^^^^^^
106 |
107 |         except IntegrityError as e:
    |

E501 Line too long (91 > 88)
   --> app\handlers\start.py:110:88
    |
108 |             await session.rollback()
109 |             logger.error(
110 |                 f"‚ùå –û—à–∏–±–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {telegram_user.id}: {e}",
    |                                                                                         ^^^
111 |             )
112 |             return None
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\handlers\start.py:117:51
    |
115 |             await session.rollback()
116 |             logger.error(
117 |                 f"üí• –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º {telegram_user.id}: {e}",
    |                                                    ^
118 |             )
119 |             return None
    |

E501 Line too long (92 > 88)
   --> app\handlers\start.py:117:88
    |
115 |             await session.rollback()
116 |             logger.error(
117 |                 f"üí• –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º {telegram_user.id}: {e}",
    |                                                                                         ^^^^
118 |             )
119 |             return None
    |

ANN001 Missing type annotation for function argument `config`
   --> app\handlers\start.py:122:40
    |
122 | def format_welcome_message(user: User, config) -> str:
    |                                        ^^^^^^
123 |     """
124 |     –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    |

W291 Trailing whitespace
   --> app\handlers\start.py:139:78
    |
137 | ü§ñ <b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ AI-–ö–æ–º–ø–∞–Ω—å–æ–Ω, {display_name}!</b>
138 |
139 | –Ø –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ –¥—Ä—É–∂–µ—Å–∫–æ–≥–æ –æ–±—â–µ–Ω–∏—è. 
    |                                                                              ^
140 | –ì–æ—Ç–æ–≤ –≤—ã—Å–ª—É—à–∞—Ç—å, –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –∏ –ø–æ–º–æ—á—å —Å–æ–≤–µ—Ç–æ–º –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è! üíô
    |
help: Remove trailing whitespace

E501 Line too long (98 > 88)
   --> app\handlers\start.py:150:89
    |
148 | <b>üìä –í–∞—à–∏ –ª–∏–º–∏—Ç—ã:</b>
149 | ‚Ä¢ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ: <b>{config.user_limits.free_messages_limit} —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –¥–µ–Ω—å</b>
150 | ‚Ä¢ –°–µ–≥–æ–¥–Ω—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: <b>{user.daily_message_count}/{config.user_limits.free_messages_limit}</b>
    |                                                                                         ^^^^^^^^^^
151 | """
    |

RUF001 String contains ambiguous `–£` (CYRILLIC CAPITAL LETTER U). Did you mean `Y` (LATIN CAPITAL LETTER Y)?
   --> app\handlers\start.py:155:33
    |
153 |     # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –ø—Ä–µ–º–∏—É–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
154 |     if user.is_premium_active():
155 |         welcome_text += "\n‚≠ê <b>–£ –≤–∞—Å –∞–∫—Ç–∏–≤–Ω–∞ –ø—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞!</b>\n‚Ä¢ –ë–µ–∑–ª–∏–º–∏—Ç–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π"
    |                                  ^
156 |     else:
157 |         welcome_text += f"""
    |

E501 Line too long (108 > 88)
   --> app\handlers\start.py:155:88
    |
153 |     # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –ø—Ä–µ–º–∏—É–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
154 |     if user.is_premium_active():
155 |         welcome_text += "\n‚≠ê <b>–£ –≤–∞—Å –∞–∫—Ç–∏–≤–Ω–∞ –ø—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞!</b>\n‚Ä¢ –ë–µ–∑–ª–∏–º–∏—Ç–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π"
    |                                                                                         ^^^^^^^^^^^^^^^^^^^^
156 |     else:
157 |         welcome_text += f"""
    |

E501 Line too long (93 > 88)
   --> app\handlers\start.py:169:89
    |
167 | –ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∏ –º—ã –Ω–∞—á–Ω–µ–º –æ–±—â–µ–Ω–∏–µ!
168 |
169 | <i>–ö–æ–º–∞–Ω–¥—ã: /help - —Å–ø—Ä–∞–≤–∫–∞, /profile - –≤–∞—à –ø—Ä–æ—Ñ–∏–ª—å, /limits - –ª–∏–º–∏—Ç—ã, /premium - –ø—Ä–µ–º–∏—É–º</i>
    |                                                                                         ^^^^^
170 | """
    |

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\handlers\start.py:181:41
    |
180 |     –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ,
181 |     –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –±–æ—Ç–µ.
    |                                         ^
182 |
183 |     Args:
    |

RUF002 Docstring contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
   --> app\handlers\start.py:181:55
    |
180 |     –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ,
181 |     –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –±–æ—Ç–µ.
    |                                                       ^
182 |
183 |     Args:
    |

RUF001 String contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
   --> app\handlers\start.py:226:39
    |
224 |                 "‚ú® <b>–≠—Ç–æ –≤–∞—à–µ –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ!</b>\n\n"
225 |                 "–ù–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ —á—Ç–æ-–Ω–∏–±—É–¥—å, –∏ —è –æ—Ç–≤–µ—á—É –≤–∞–º. "
226 |                 "–ù–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–≤–æ–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–∏ –∏–ª–∏ –∑–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å! üòä",
    |                                       ^
227 |                 parse_mode="HTML",
228 |             )
    |

E501 Line too long (92 > 88)
   --> app\handlers\start.py:231:88
    |
230 |         logger.info(
231 |             f"‚úÖ –£—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ /start –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {message.from_user.id}",
    |                                                                                         ^^^^
232 |         )
    |

E501 Line too long (91 > 88)
   --> app\handlers\start.py:236:88
    |
234 |     except Exception as e:
235 |         logger.error(
236 |             f"üí• –û—à–∏–±–∫–∞ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ /start –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {message.from_user.id}: {e}",
    |                                                                                         ^^^
237 |         )
    |

RUF003 Comment contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
   --> app\handlers\start.py:239:45
    |
237 |         )
238 |
239 |         # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
    |                                             ^
240 |         try:
241 |             await message.answer(
    |

RUF003 Comment contains ambiguous `–±` (CYRILLIC SMALL LETTER BE). Did you mean `6` (DIGIT SIX)?
   --> app\handlers\start.py:239:46
    |
237 |         )
238 |
239 |         # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
    |                                              ^
240 |         try:
241 |             await message.answer(
    |

RUF001 String contains ambiguous `–ù` (CYRILLIC CAPITAL LETTER EN). Did you mean `H` (LATIN CAPITAL LETTER H)?
   --> app\handlers\start.py:248:30
    |
246 |             )
247 |         except Exception as send_error:
248 |             logger.error(f"üí• –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ: {send_error}")
    |                               ^
    |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
   --> app\handlers\start.py:248:31
    |
246 |             )
247 |         except Exception as send_error:
248 |             logger.error(f"üí• –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ: {send_error}")
    |                                ^
    |

RUF001 String contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
   --> app\handlers\start.py:248:61
    |
246 |             )
247 |         except Exception as send_error:
248 |             logger.error(f"üí• –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ: {send_error}")
    |                                                              ^
    |

RUF001 String contains ambiguous `–±` (CYRILLIC SMALL LETTER BE). Did you mean `6` (DIGIT SIX)?
   --> app\handlers\start.py:248:62
    |
246 |             )
247 |         except Exception as send_error:
248 |             logger.error(f"üí• –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ: {send_error}")
    |                                                               ^
    |

RUF001 String contains ambiguous `‚Ñπ` (INFORMATION SOURCE). Did you mean `i` (LATIN SMALL LETTER I)?
  --> app\keyboards\inline.py:24:36
   |
22 |     builder.row(
23 |         InlineKeyboardButton(text="üíé –ü—Ä–µ–º–∏—É–º –¥–æ—Å—Ç—É–ø", callback_data="premium_info"),
24 |         InlineKeyboardButton(text="‚ÑπÔ∏è –ü–æ–º–æ—â—å", callback_data="help"),
   |                                    ^
25 |     )
   |

RUF003 Comment contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
  --> app\keyboards\inline.py:38:18
   |
36 |     builder = InlineKeyboardBuilder()
37 |
38 |     # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–µ–º–∏—É–º
   |                  ^
39 |     builder.row(
40 |         InlineKeyboardButton(
   |

RUF001 String contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
   --> app\keyboards\inline.py:153:30
    |
151 |         InlineKeyboardButton(text="üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞", callback_data="help_support"),
152 |         InlineKeyboardButton(
153 |             text="üêõ –°–æ–æ–±—â–∏—Ç—å –æ–± –æ—à–∏–±–∫–µ",
    |                               ^
154 |             callback_data="help_bug_report",
155 |         ),
    |

RUF001 String contains ambiguous `–±` (CYRILLIC SMALL LETTER BE). Did you mean `6` (DIGIT SIX)?
   --> app\keyboards\inline.py:153:31
    |
151 |         InlineKeyboardButton(text="üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞", callback_data="help_support"),
152 |         InlineKeyboardButton(
153 |             text="üêõ –°–æ–æ–±—â–∏—Ç—å –æ–± –æ—à–∏–±–∫–µ",
    |                                ^
154 |             callback_data="help_bug_report",
155 |         ),
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> app\lexicon.py:8:63
   |
 7 | # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
 8 | WELCOME_MESSAGE = "üëã –ü—Ä–∏–≤–µ—Ç! –Ø –ò–ò-–ö–æ–º–ø–∞–Ω—å–æ–Ω, –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å –≤–∞–º —Å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏ –æ—Ç–≤–µ—Ç–∞–º–∏ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã."
   |                                                                ^
 9 |
10 | # –°–æ–æ–±—â–µ–Ω–∏—è –æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
   |

E501 Line too long (113 > 88)
  --> app\lexicon.py:8:88
   |
 7 | # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
 8 | WELCOME_MESSAGE = "üëã –ü—Ä–∏–≤–µ—Ç! –Ø –ò–ò-–ö–æ–º–ø–∞–Ω—å–æ–Ω, –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å –≤–∞–º —Å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏ –æ—Ç–≤–µ—Ç–∞–º–∏ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã."
   |                                                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^
 9 |
10 | # –°–æ–æ–±—â–µ–Ω–∏—è –æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
   |

RUF003 Comment contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
  --> app\lexicon.py:10:13
   |
 8 | WELCOME_MESSAGE = "üëã –ü—Ä–∏–≤–µ—Ç! –Ø –ò–ò-–ö–æ–º–ø–∞–Ω—å–æ–Ω, –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å –≤–∞–º —Å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏ –æ—Ç–≤–µ—Ç–∞–º–∏ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã."
 9 |
10 | # –°–æ–æ–±—â–µ–Ω–∏—è –æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
   |             ^
11 | FUNCTIONALITY_DESCRIPTION = """ü§ñ –Ø –º–æ–≥—É:
12 | ‚Ä¢ –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã
   |

RUF003 Comment contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
  --> app\lexicon.py:17:13
   |
15 | ‚Ä¢ –ü—Ä–µ–¥–ª–∞–≥–∞—Ç—å —Å–æ–≤–µ—Ç—ã –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è"""
16 |
17 | # –°–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–µ–º–∏—É–º-—Ñ—É–Ω–∫—Ü–∏—è—Ö
   |             ^
18 | PREMIUM_INFO = "üíé –ü—Ä–µ–º–∏—É–º-–ø–æ–¥–ø–∏—Å–∫–∞ –¥–∞–µ—Ç –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫—É"
   |

RUF003 Comment contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
  --> app\lexicon.py:20:13
   |
18 | PREMIUM_INFO = "üíé –ü—Ä–µ–º–∏—É–º-–ø–æ–¥–ø–∏—Å–∫–∞ –¥–∞–µ—Ç –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫—É"
19 |
20 | # –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
   |             ^
21 | ERROR_MESSAGE = "‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å –ø–æ–∑–∂–µ."
   |

RUF003 Comment contains ambiguous `–±` (CYRILLIC SMALL LETTER BE). Did you mean `6` (DIGIT SIX)?
  --> app\lexicon.py:20:14
   |
18 | PREMIUM_INFO = "üíé –ü—Ä–µ–º–∏—É–º-–ø–æ–¥–ø–∏—Å–∫–∞ –¥–∞–µ—Ç –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫—É"
19 |
20 | # –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
   |              ^
21 | ERROR_MESSAGE = "‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å –ø–æ–∑–∂–µ."
   |

RUF003 Comment contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
  --> app\lexicon.py:23:13
   |
21 | ERROR_MESSAGE = "‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å –ø–æ–∑–∂–µ."
22 |
23 | # –°–æ–æ–±—â–µ–Ω–∏—è –æ –ª–∏–º–∏—Ç–∞—Ö
   |             ^
24 | LIMIT_EXCEEDED_MESSAGE = "‚ö†Ô∏è –í—ã –ø—Ä–µ–≤—ã—Å–∏–ª–∏ –ª–∏–º–∏—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π. –ü—Ä–∏–æ–±—Ä–µ—Ç–∏—Ç–µ –ø—Ä–µ–º–∏—É–º –¥–ª—è –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞."
   |

E501 Line too long (118 > 88)
  --> app\lexicon.py:24:90
   |
23 | # –°–æ–æ–±—â–µ–Ω–∏—è –æ –ª–∏–º–∏—Ç–∞—Ö
24 | LIMIT_EXCEEDED_MESSAGE = "‚ö†Ô∏è –í—ã –ø—Ä–µ–≤—ã—Å–∏–ª–∏ –ª–∏–º–∏—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π. –ü—Ä–∏–æ–±—Ä–µ—Ç–∏—Ç–µ –ø—Ä–µ–º–∏—É–º –¥–ª—è –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞."
   |                                                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
25 |
26 | # –°–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö
   |

RUF003 Comment contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
  --> app\lexicon.py:26:13
   |
24 | LIMIT_EXCEEDED_MESSAGE = "‚ö†Ô∏è –í—ã –ø—Ä–µ–≤—ã—Å–∏–ª–∏ –ª–∏–º–∏—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π. –ü—Ä–∏–æ–±—Ä–µ—Ç–∏—Ç–µ –ø—Ä–µ–º–∏—É–º –¥–ª—è –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞."
25 |
26 | # –°–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö
   |             ^
27 | SUCCESS_MESSAGE = "‚úÖ –û–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!"
   |

RUF003 Comment contains ambiguous `–±` (CYRILLIC SMALL LETTER BE). Did you mean `6` (DIGIT SIX)?
  --> app\lexicon.py:26:14
   |
24 | LIMIT_EXCEEDED_MESSAGE = "‚ö†Ô∏è –í—ã –ø—Ä–µ–≤—ã—Å–∏–ª–∏ –ª–∏–º–∏—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π. –ü—Ä–∏–æ–±—Ä–µ—Ç–∏—Ç–µ –ø—Ä–µ–º–∏—É–º –¥–ª—è –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞."
25 |
26 | # –°–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö
   |              ^
27 | SUCCESS_MESSAGE = "‚úÖ –û–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!"
   |

RUF003 Comment contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
  --> app\lexicon.py:29:13
   |
27 | SUCCESS_MESSAGE = "‚úÖ –û–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!"
28 |
29 | # –°–æ–æ–±—â–µ–Ω–∏—è –æ –ø–ª–∞—Ç–µ–∂–∞—Ö
   |             ^
30 | PAYMENT_SUCCESS_MESSAGE = "üí∞ –ü–ª–∞—Ç–µ–∂ —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω! –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –ø—Ä–µ–º–∏—É–º-–ø–æ–¥–ø–∏—Å–∫–∞."
   |

RUF001 String contains ambiguous `—É` (CYRILLIC SMALL LETTER U). Did you mean `y` (LATIN SMALL LETTER Y)?
  --> app\lexicon.py:30:63
   |
29 | # –°–æ–æ–±—â–µ–Ω–∏—è –æ –ø–ª–∞—Ç–µ–∂–∞—Ö
30 | PAYMENT_SUCCESS_MESSAGE = "üí∞ –ü–ª–∞—Ç–µ–∂ —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω! –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –ø—Ä–µ–º–∏—É–º-–ø–æ–¥–ø–∏—Å–∫–∞."
   |                                                                ^
31 |
32 | # –°–æ–æ–±—â–µ–Ω–∏—è –æ –ø–æ–º–æ—â–∏
   |

RUF003 Comment contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
  --> app\lexicon.py:32:13
   |
30 | PAYMENT_SUCCESS_MESSAGE = "üí∞ –ü–ª–∞—Ç–µ–∂ —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω! –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –ø—Ä–µ–º–∏—É–º-–ø–æ–¥–ø–∏—Å–∫–∞."
31 |
32 | # –°–æ–æ–±—â–µ–Ω–∏—è –æ –ø–æ–º–æ—â–∏
   |             ^
33 | HELP_MESSAGE = """‚ÑπÔ∏è –ü–æ–º–æ—â—å:
34 | ‚Ä¢ –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –Ω–∞—á–∞–ª–∞ –¥–∏–∞–ª–æ–≥–∞
   |

RUF001 String contains ambiguous `‚Ñπ` (INFORMATION SOURCE). Did you mean `i` (LATIN SMALL LETTER I)?
  --> app\lexicon.py:33:19
   |
32 | # –°–æ–æ–±—â–µ–Ω–∏—è –æ –ø–æ–º–æ—â–∏
33 | HELP_MESSAGE = """‚ÑπÔ∏è –ü–æ–º–æ—â—å:
   |                   ^
34 | ‚Ä¢ –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –Ω–∞—á–∞–ª–∞ –¥–∏–∞–ª–æ–≥–∞
35 | ‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /start –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞
   |

RUF003 Comment contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
  --> app\lexicon.py:38:13
   |
36 | ‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /help –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —ç—Ç–æ–π —Å–ø—Ä–∞–≤–∫–∏"""
37 |
38 | # –°–æ–æ–±—â–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ
   |             ^
39 | PROCESSING_MESSAGE = "‚è≥ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –≤–∞—à –∑–∞–ø—Ä–æ—Å..."
   |

RUF003 Comment contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
  --> app\lexicon.py:41:13
   |
39 | PROCESSING_MESSAGE = "‚è≥ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –≤–∞—à –∑–∞–ø—Ä–æ—Å..."
40 |
41 | # –°–æ–æ–±—â–µ–Ω–∏—è –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
   |             ^
42 | GOODBYE_MESSAGE = "üëã –î–æ —Å–≤–∏–¥–∞–Ω–∏—è! –í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ—Å—å, –∫–æ–≥–¥–∞ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–æ–º–æ—â—å."
   |

W292 [*] No newline at end of file
  --> app\lexicon.py:42:76
   |
41 | # –°–æ–æ–±—â–µ–Ω–∏—è –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
42 | GOODBYE_MESSAGE = "üëã –î–æ —Å–≤–∏–¥–∞–Ω–∏—è! –í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ—Å—å, –∫–æ–≥–¥–∞ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–æ–º–æ—â—å."
   |                                                                             ^
   |
help: Add trailing newline

RUF022 `__all__` is not sorted
  --> app\models\__init__.py:34:11
   |
33 |   # –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π –∏ —Å—Ö–µ–º
34 |   __all__ = [
   |  ___________^
35 | |     # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
36 | |     "Base",
37 | |     # –ú–æ–¥–µ–ª–∏ SQLAlchemy
38 | |     "User",
39 | |     "Conversation",
40 | |     # Enums
41 | |     "MessageRole",
42 | |     "ConversationStatus",
43 | |     # Pydantic —Å—Ö–µ–º—ã –¥–ª—è User
44 | |     "UserBase",
45 | |     "UserCreate",
46 | |     "UserUpdate",
47 | |     "UserResponse",
48 | |     "UserStats",
49 | |     # Pydantic —Å—Ö–µ–º—ã –¥–ª—è Conversation
50 | |     "ConversationBase",
51 | |     "ConversationCreate",
52 | |     "ConversationUpdate",
53 | |     "ConversationResponse",
54 | |     "ConversationStats",
55 | |     "ConversationHistory",
56 | | ]
   | |_^
   |
help: Apply an isort-style sorting to `__all__`

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
 --> app\models\conversation.py:3:62
  |
1 | """
2 | @file: models/conversation.py
3 | @description: –ú–æ–¥–µ–ª—å –¥–∏–∞–ª–æ–≥–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤ —Å –ò–ò
  |                                                              ^
4 | @dependencies: sqlalchemy, pydantic
5 | @created: 2025-09-12
  |

TC001 Move application import `app.models.user.User` into a type-checking block
  --> app\models\conversation.py:28:29
   |
27 | from app.database import Base
28 | from app.models.user import User
   |                             ^^^^
   |
help: Move into type-checking block

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> app\models\conversation.py:49:45
   |
48 | class Conversation(Base):
49 |     """–ú–æ–¥–µ–ª—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–æ–≤ —Å –ò–ò."""
   |                                             ^
50 |
51 |     __tablename__ = "conversations"
   |

RUF003 Comment contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> app\models\conversation.py:61:13
   |
59 |     )
60 |
61 |     # –°–≤—è–∑—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
   |             ^
62 |     user_id: Mapped[int] = mapped_column(
63 |         BigInteger,
   |

RUF001 String contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
   --> app\models\conversation.py:144:28
    |
142 |         Text,
143 |         nullable=True,
144 |         comment="–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –µ—Å–ª–∏ —Å—Ç–∞—Ç—É—Å FAILED",
    |                            ^
145 |     )
    |

RUF001 String contains ambiguous `–±` (CYRILLIC SMALL LETTER BE). Did you mean `6` (DIGIT SIX)?
   --> app\models\conversation.py:144:29
    |
142 |         Text,
143 |         nullable=True,
144 |         comment="–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –µ—Å–ª–∏ —Å—Ç–∞—Ç—É—Å FAILED",
    |                             ^
145 |     )
    |

E501 Line too long (94 > 88)
   --> app\models\conversation.py:195:89
    |
194 |     def __repr__(self) -> str:
195 |         return f"<Conversation(id={self.id}, user_id={self.user_id}, status='{self.status}')>"
    |                                                                                         ^^^^^^
196 |
197 |     def is_completed(self) -> bool:
    |

DTZ005 `datetime.datetime.now()` called without a `tz` argument
   --> app\models\conversation.py:220:29
    |
218 |         self.status = ConversationStatus.COMPLETED
219 |         self.response_text = response
220 |         self.processed_at = datetime.now()
    |                             ^^^^^^^^^^^^^^
221 |         if tokens:
222 |             self.tokens_used = tokens
    |
help: Pass a `datetime.timezone` object to the `tz` parameter

DTZ005 `datetime.datetime.now()` called without a `tz` argument
   --> app\models\conversation.py:229:29
    |
227 |         self.error_message = error_msg
228 |         self.error_code = error_code
229 |         self.processed_at = datetime.now()
    |                             ^^^^^^^^^^^^^^
    |
help: Pass a `datetime.timezone` object to the `tz` parameter

TRY003 Avoid specifying long messages outside the exception class
   --> app\models\conversation.py:254:19
    |
252 |         v = v.strip()
253 |         if not v:
254 |             raise ValueError("–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º")
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
255 |         return v
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\models\conversation.py:254:30
    |
252 |         v = v.strip()
253 |         if not v:
254 |             raise ValueError("–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º")
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
255 |         return v
    |
help: Assign to variable; remove string literal

E501 Line too long (98 > 88)
   --> app\models\user.py:173:89
    |
172 |     def __repr__(self) -> str:
173 |         return f"<User(id={self.id}, telegram_id={self.telegram_id}, username='{self.username}')>"
    |                                                                                         ^^^^^^^^^^
174 |
175 |     def get_display_name(self) -> str:
    |

DTZ005 `datetime.datetime.now()` called without a `tz` argument
   --> app\models\user.py:193:16
    |
191 |             return True  # –ë–µ—Å—Å—Ä–æ—á–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞
192 |
193 |         return datetime.now() <= self.premium_expires_at
    |                ^^^^^^^^^^^^^^
194 |
195 |     def can_send_message(self, free_limit: int = 10) -> bool:
    |
help: Pass a `datetime.timezone` object to the `tz` parameter

RUF003 Comment contains ambiguous `–°` (CYRILLIC CAPITAL LETTER ES). Did you mean `C` (LATIN CAPITAL LETTER C)?
   --> app\models\user.py:203:11
    |
201 |             return True
202 |
203 |         # –°–±—Ä–æ—Å —Å—á–µ—Ç—á–∏–∫–∞ –µ—Å–ª–∏ –ø—Ä–æ—à–µ–ª –¥–µ–Ω—å
    |           ^
204 |         today = date.today()
205 |         if self.last_message_date < today:
    |

RUF003 Comment contains ambiguous `–±` (CYRILLIC SMALL LETTER BE). Did you mean `6` (DIGIT SIX)?
   --> app\models\user.py:203:12
    |
201 |             return True
202 |
203 |         # –°–±—Ä–æ—Å —Å—á–µ—Ç—á–∏–∫–∞ –µ—Å–ª–∏ –ø—Ä–æ—à–µ–ª –¥–µ–Ω—å
    |            ^
204 |         today = date.today()
205 |         if self.last_message_date < today:
    |

RUF003 Comment contains ambiguous `—Ä` (CYRILLIC SMALL LETTER ER). Did you mean `p` (LATIN SMALL LETTER P)?
   --> app\models\user.py:203:13
    |
201 |             return True
202 |
203 |         # –°–±—Ä–æ—Å —Å—á–µ—Ç—á–∏–∫–∞ –µ—Å–ª–∏ –ø—Ä–æ—à–µ–ª –¥–µ–Ω—å
    |             ^
204 |         today = date.today()
205 |         if self.last_message_date < today:
    |

RUF003 Comment contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
   --> app\models\user.py:203:14
    |
201 |             return True
202 |
203 |         # –°–±—Ä–æ—Å —Å—á–µ—Ç—á–∏–∫–∞ –µ—Å–ª–∏ –ø—Ä–æ—à–µ–ª –¥–µ–Ω—å
    |              ^
204 |         today = date.today()
205 |         if self.last_message_date < today:
    |

RUF003 Comment contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\models\user.py:203:15
    |
201 |             return True
202 |
203 |         # –°–±—Ä–æ—Å —Å—á–µ—Ç—á–∏–∫–∞ –µ—Å–ª–∏ –ø—Ä–æ—à–µ–ª –¥–µ–Ω—å
    |               ^
204 |         today = date.today()
205 |         if self.last_message_date < today:
    |

DTZ011 `datetime.date.today()` used
   --> app\models\user.py:204:17
    |
203 |         # –°–±—Ä–æ—Å —Å—á–µ—Ç—á–∏–∫–∞ –µ—Å–ª–∏ –ø—Ä–æ—à–µ–ª –¥–µ–Ω—å
204 |         today = date.today()
    |                 ^^^^^^^^^^^^
205 |         if self.last_message_date < today:
206 |             return True
    |
help: Use `datetime.datetime.now(tz=...).date()` instead

RUF002 Docstring contains ambiguous `–°` (CYRILLIC CAPITAL LETTER ES). Did you mean `C` (LATIN CAPITAL LETTER C)?
   --> app\models\user.py:211:12
    |
210 |     def reset_daily_count_if_needed(self) -> bool:
211 |         """–°–±—Ä–æ—Å –¥–Ω–µ–≤–Ω–æ–≥–æ —Å—á–µ—Ç—á–∏–∫–∞ –µ—Å–ª–∏ –ø—Ä–æ—à–µ–ª –¥–µ–Ω—å."""
    |            ^
212 |         today = date.today()
213 |         if self.last_message_date < today:
    |

RUF002 Docstring contains ambiguous `–±` (CYRILLIC SMALL LETTER BE). Did you mean `6` (DIGIT SIX)?
   --> app\models\user.py:211:13
    |
210 |     def reset_daily_count_if_needed(self) -> bool:
211 |         """–°–±—Ä–æ—Å –¥–Ω–µ–≤–Ω–æ–≥–æ —Å—á–µ—Ç—á–∏–∫–∞ –µ—Å–ª–∏ –ø—Ä–æ—à–µ–ª –¥–µ–Ω—å."""
    |             ^
212 |         today = date.today()
213 |         if self.last_message_date < today:
    |

RUF002 Docstring contains ambiguous `—Ä` (CYRILLIC SMALL LETTER ER). Did you mean `p` (LATIN SMALL LETTER P)?
   --> app\models\user.py:211:14
    |
210 |     def reset_daily_count_if_needed(self) -> bool:
211 |         """–°–±—Ä–æ—Å –¥–Ω–µ–≤–Ω–æ–≥–æ —Å—á–µ—Ç—á–∏–∫–∞ –µ—Å–ª–∏ –ø—Ä–æ—à–µ–ª –¥–µ–Ω—å."""
    |              ^
212 |         today = date.today()
213 |         if self.last_message_date < today:
    |

RUF002 Docstring contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
   --> app\models\user.py:211:15
    |
210 |     def reset_daily_count_if_needed(self) -> bool:
211 |         """–°–±—Ä–æ—Å –¥–Ω–µ–≤–Ω–æ–≥–æ —Å—á–µ—Ç—á–∏–∫–∞ –µ—Å–ª–∏ –ø—Ä–æ—à–µ–ª –¥–µ–Ω—å."""
    |               ^
212 |         today = date.today()
213 |         if self.last_message_date < today:
    |

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\models\user.py:211:16
    |
210 |     def reset_daily_count_if_needed(self) -> bool:
211 |         """–°–±—Ä–æ—Å –¥–Ω–µ–≤–Ω–æ–≥–æ —Å—á–µ—Ç—á–∏–∫–∞ –µ—Å–ª–∏ –ø—Ä–æ—à–µ–ª –¥–µ–Ω—å."""
    |                ^
212 |         today = date.today()
213 |         if self.last_message_date < today:
    |

DTZ011 `datetime.date.today()` used
   --> app\models\user.py:212:17
    |
210 |     def reset_daily_count_if_needed(self) -> bool:
211 |         """–°–±—Ä–æ—Å –¥–Ω–µ–≤–Ω–æ–≥–æ —Å—á–µ—Ç—á–∏–∫–∞ –µ—Å–ª–∏ –ø—Ä–æ—à–µ–ª –¥–µ–Ω—å."""
212 |         today = date.today()
    |                 ^^^^^^^^^^^^
213 |         if self.last_message_date < today:
214 |             self.daily_message_count = 0
    |
help: Use `datetime.datetime.now(tz=...).date()` instead

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
 --> app\services\ai_manager.py:3:39
  |
1 | """
2 | @file: ai_manager.py
3 | @description: –ú–µ–Ω–µ–¥–∂–µ—Ä AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π fallback –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏
  |                                       ^
4 | @dependencies: loguru, app.config, .ai_providers
5 | @created: 2025-09-20
  |

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> app\services\ai_manager.py:31:35
   |
30 | class ResponseCache:
31 |     """–ü—Ä–æ—Å—Ç–æ–π –∫–µ—à –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ AI —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤."""
   |                                   ^
32 |
33 |     def __init__(self, ttl_seconds: int = 3600):
   |

ANN204 Missing return type annotation for special method `__init__`
  --> app\services\ai_manager.py:33:9
   |
31 |     """–ü—Ä–æ—Å—Ç–æ–π –∫–µ—à –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ AI —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤."""
32 |
33 |     def __init__(self, ttl_seconds: int = 3600):
   |         ^^^^^^^^
34 |         self._cache: dict[str, dict[str, Any]] = {}
35 |         self._ttl = ttl_seconds
   |
help: Add return type annotation: `None`

S324 Probable use of insecure hash functions in `hashlib`: `md5`
  --> app\services\ai_manager.py:43:16
   |
41 |             + provider
42 |         )
43 |         return hashlib.md5(content.encode()).hexdigest()
   |                ^^^^^^^^^^^
44 |
45 |     def get(
   |

DTZ005 `datetime.datetime.now()` called without a `tz` argument
  --> app\services\ai_manager.py:55:16
   |
53 |         if key in self._cache:
54 |             entry = self._cache[key]
55 |             if datetime.now() - entry["timestamp"] < timedelta(seconds=self._ttl):
   |                ^^^^^^^^^^^^^^
56 |                 logger.debug(
57 |                     f"üéØ –ù–∞–π–¥–µ–Ω –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –¥–ª—è {provider}: {key[:8]}...",
   |
help: Pass a `datetime.timezone` object to the `tz` parameter

DTZ005 `datetime.datetime.now()` called without a `tz` argument
  --> app\services\ai_manager.py:77:26
   |
75 |         self._cache[key] = {
76 |             "response": response,
77 |             "timestamp": datetime.now(),
   |                          ^^^^^^^^^^^^^^
78 |         }
79 |         logger.debug(f"üíæ –û—Ç–≤–µ—Ç {provider} —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –∫–µ—à: {key[:8]}...")
   |
help: Pass a `datetime.timezone` object to the `tz` parameter

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> app\services\ai_manager.py:88:32
   |
87 | class AIManager:
88 |     """–ú–µ–Ω–µ–¥–∂–µ—Ä AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π fallback –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏."""
   |                                ^
89 |
90 |     def __init__(self):
   |

ANN204 Missing return type annotation for special method `__init__`
  --> app\services\ai_manager.py:90:9
   |
88 |     """–ú–µ–Ω–µ–¥–∂–µ—Ä AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π fallback –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏."""
89 |
90 |     def __init__(self):
   |         ^^^^^^^^
91 |         self.config = get_config()
92 |         self.provider_config = self.config.ai_provider
   |
help: Add return type annotation: `None`

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_manager.py:171:19
    |
169 |           # –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
170 |           if not await provider.is_available():
171 |               raise APIConnectionError(
    |  ___________________^
172 | |                 f"–ü—Ä–æ–≤–∞–π–¥–µ—Ä {provider_name} –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω",
173 | |                 provider_name,
174 | |                 "unavailable",
175 | |             )
    | |_____________^
176 |
177 |           # –í—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–ø—Ä–æ—Å
    |

EM102 Exception must not use an f-string literal, assign to variable first
   --> app\services\ai_manager.py:172:17
    |
170 |         if not await provider.is_available():
171 |             raise APIConnectionError(
172 |                 f"–ü—Ä–æ–≤–∞–π–¥–µ—Ä {provider_name} –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω",
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
173 |                 provider_name,
174 |                 "unavailable",
    |
help: Assign to variable; remove f-string literal

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_manager.py:203:26
    |
201 |     ) -> AIResponse:
202 |         """
203 |         –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º fallback –º–µ–∂–¥—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏.
    |                          ^
204 |
205 |         Args:
    |

E501 Line too long (95 > 88)
   --> app\services\ai_manager.py:210:89
    |
208 |             max_tokens: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤
209 |             use_cache: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
210 |             prefer_provider: –ü—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ primary/fallback)
    |                                                                                         ^^^^^^^
211 |
212 |         Returns:
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_manager.py:219:19
    |
217 |         """
218 |         if not messages:
219 |             raise ValueError("–°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º")
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
220 |
221 |         self._stats["requests_total"] += 1
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_manager.py:219:30
    |
217 |         """
218 |         if not messages:
219 |             raise ValueError("–°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º")
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
220 |
221 |         self._stats["requests_total"] += 1
    |
help: Assign to variable; remove string literal

SIM118 Use `key in dict` instead of `key in dict.keys()`
   --> app\services\ai_manager.py:231:29
    |
229 |                     [
230 |                         name
231 |                         for name in self._providers.keys()
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
232 |                         if name != prefer_provider
233 |                     ],
    |
help: Remove `.keys()`

TRY300 Consider moving this statement to an `else` block
   --> app\services\ai_manager.py:267:17
    |
266 |                 self._stats["requests_successful"] += 1
267 |                 return response
    |                 ^^^^^^^^^^^^^^^
268 |
269 |             except (APIQuotaExceededError, APIAuthenticationError) as e:
    |

RUF003 Comment contains ambiguous `–í` (CYRILLIC CAPITAL LETTER VE). Did you mean `B` (LATIN CAPITAL LETTER B)?
   --> app\services\ai_manager.py:290:11
    |
288 |                 continue
289 |
290 |         # –í—Å–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∏
    |           ^
291 |         self._stats["requests_failed"] += 1
    |

RUF003 Comment contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_manager.py:290:12
    |
288 |                 continue
289 |
290 |         # –í—Å–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∏
    |            ^
291 |         self._stats["requests_failed"] += 1
    |

RUF003 Comment contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
   --> app\services\ai_manager.py:290:13
    |
288 |                 continue
289 |
290 |         # –í—Å–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∏
    |             ^
291 |         self._stats["requests_failed"] += 1
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_manager.py:295:15
    |
293 |           if last_error:
294 |               raise last_error
295 |           raise AIProviderError(
    |  _______________^
296 | |             "–í—Å–µ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã",
297 | |             "manager",
298 | |             "all_providers_failed",
299 | |         )
    | |_________^
300 |
301 |       async def generate_simple_response(self, user_message: str) -> AIResponse:
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_manager.py:296:13
    |
294 |             raise last_error
295 |         raise AIProviderError(
296 |             "–í—Å–µ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã",
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
297 |             "manager",
298 |             "all_providers_failed",
    |
help: Assign to variable; remove string literal

RUF001 String contains ambiguous `–í` (CYRILLIC CAPITAL LETTER VE). Did you mean `B` (LATIN CAPITAL LETTER B)?
   --> app\services\ai_manager.py:296:14
    |
294 |             raise last_error
295 |         raise AIProviderError(
296 |             "–í—Å–µ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã",
    |              ^
297 |             "manager",
298 |             "all_providers_failed",
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_manager.py:296:15
    |
294 |             raise last_error
295 |         raise AIProviderError(
296 |             "–í—Å–µ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã",
    |               ^
297 |             "manager",
298 |             "all_providers_failed",
    |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
   --> app\services\ai_manager.py:296:16
    |
294 |             raise last_error
295 |         raise AIProviderError(
296 |             "–í—Å–µ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã",
    |                ^
297 |             "manager",
298 |             "all_providers_failed",
    |

E501 Line too long (96 > 88)
   --> app\services\ai_manager.py:314:89
    |
312 | ‚Ä¶     ConversationMessage(
313 | ‚Ä¶         role="system",
314 | ‚Ä¶         content="–¢—ã - —ç–º–ø–∞—Ç–∏—á–Ω—ã–π AI-–ø–æ–º–æ—â–Ω–∏–∫. –û—Ç–≤–µ—á–∞–π –¥–æ–±—Ä–æ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–µ.",
    |                                                                                   ^^^^^^^^
315 | ‚Ä¶     ),
316 | ‚Ä¶     ConversationMessage(
    |

PLW0603 Using the global statement to update `_ai_manager_instance` is discouraged
   --> app\services\ai_manager.py:399:12
    |
397 | def get_ai_manager() -> AIManager:
398 |     """–ü–æ–ª—É—á–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ AI –º–µ–Ω–µ–¥–∂–µ—Ä–∞."""
399 |     global _ai_manager_instance
    |            ^^^^^^^^^^^^^^^^^^^^
400 |
401 |     if _ai_manager_instance is None:
    |

PLW0603 Using the global statement to update `_ai_manager_instance` is discouraged
   --> app\services\ai_manager.py:410:12
    |
408 | async def close_ai_manager() -> None:
409 |     """–ó–∞–∫—Ä—ã—Ç–∏–µ AI –º–µ–Ω–µ–¥–∂–µ—Ä–∞."""
410 |     global _ai_manager_instance
    |            ^^^^^^^^^^^^^^^^^^^^
411 |
412 |     if _ai_manager_instance:
    |

RUF022 `__all__` is not sorted
   --> app\services\ai_manager.py:419:11
    |
418 |   # –≠–∫—Å–ø–æ—Ä—Ç –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ –∏ —Ñ—É–Ω–∫—Ü–∏–π
419 |   __all__ = [
    |  ___________^
420 | |     "ResponseCache",
421 | |     "AIManager",
422 | |     "get_ai_manager",
423 | |     "close_ai_manager",
424 | |     # –ü–æ–≤—Ç–æ—Ä–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç –∏–∑ ai_providers –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
425 | |     "AIResponse",
426 | |     "ConversationMessage",
427 | |     "AIProviderError",
428 | | ]
    | |_^
    |
help: Apply an isort-style sorting to `__all__`

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
 --> app\services\ai_providers\__init__.py:3:37
  |
1 | """
2 | @file: ai_providers/__init__.py
3 | @description: –ú–æ–¥—É–ª—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ AI —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö API
  |                                     ^
4 | @dependencies: .base, .deepseek, .openrouter
5 | @created: 2025-09-20
  |

RUF022 `__all__` is not sorted
  --> app\services\ai_providers\__init__.py:22:11
   |
21 |   # –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
22 |   __all__ = [
   |  ___________^
23 | |     # –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã
24 | |     "AIResponse",
25 | |     "ConversationMessage",
26 | |     "AIProviderError",
27 | |     "APIConnectionError",
28 | |     "APIRateLimitError",
29 | |     "APIAuthenticationError",
30 | |     "APIQuotaExceededError",
31 | |     "BaseAIProvider",
32 | |     # –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã
33 | |     "DeepSeekProvider",
34 | |     "OpenRouterProvider",
35 | | ]
   | |_^
   |
help: Apply an isort-style sorting to `__all__`

ANN204 Missing return type annotation for special method `__init__`
  --> app\services\ai_providers\base.py:40:9
   |
38 |     """–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –æ—à–∏–±–æ–∫ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤."""
39 |
40 |     def __init__(self, message: str, provider: str, error_code: str | None = None):
   |         ^^^^^^^^
41 |         self.provider = provider
42 |         self.error_code = error_code
   |
help: Add return type annotation: `None`

ANN204 Missing return type annotation for special method `__init__`
  --> app\services\ai_providers\base.py:65:9
   |
63 |     """–ë–∞–∑–æ–≤—ã–π –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤."""
64 |
65 |     def __init__(self, name: str):
   |         ^^^^^^^^
66 |         self.name = name
67 |         self._client = None
   |
help: Add return type annotation: `None`

ANN003 Missing type annotation for `**kwargs`
  --> app\services\ai_providers\base.py:82:9
   |
80 |         temperature: float | None = None,
81 |         max_tokens: int | None = None,
82 |         **kwargs,
   |         ^^^^^^^^
83 |     ) -> AIResponse:
84 |         """
   |

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> app\services\ai_providers\base.py:97:57
   |
96 |         Raises:
97 |             AIProviderError: –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å API
   |                                                         ^
98 |         """
   |

DTZ005 `datetime.datetime.now()` called without a `tz` argument
   --> app\services\ai_providers\base.py:122:15
    |
120 |         –ö–µ—à–∏—Ä—É–µ—Ç—Å—è –Ω–∞ 60 —Å–µ–∫—É–Ω–¥ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è —á–∞—Å—Ç—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫.
121 |         """
122 |         now = datetime.now()
    |               ^^^^^^^^^^^^^^
123 |
124 |         # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–µ—à
    |
help: Pass a `datetime.timezone` object to the `tz` parameter

PLR2004 Magic value used in comparison, consider replacing `60` with a constant variable
   --> app\services\ai_providers\base.py:128:67
    |
126 |             self._is_available is not None
127 |             and self._last_health_check is not None
128 |             and (now - self._last_health_check).total_seconds() < 60
    |                                                                   ^^
129 |         ):
130 |             return self._is_available
    |

ANN204 Missing return type annotation for special method `__init__`
  --> app\services\ai_providers\deepseek.py:30:9
   |
28 |     """–ü—Ä–æ–≤–∞–π–¥–µ—Ä AI –¥–ª—è DeepSeek API."""
29 |
30 |     def __init__(self):
   |         ^^^^^^^^
31 |         super().__init__("deepseek")
32 |         self.config = get_config().deepseek
   |
help: Add return type annotation: `None`

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> app\services\ai_providers\deepseek.py:42:35
   |
41 |     async def _get_client(self) -> httpx.AsyncClient:
42 |         """–ü–æ–ª—É—á–µ–Ω–∏–µ HTTP –∫–ª–∏–µ–Ω—Ç–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –¥–ª—è DeepSeek."""
   |                                   ^
43 |         if self._client is None:
44 |             headers = {
   |

PLR0912 Too many branches (13 > 12)
  --> app\services\ai_providers\deepseek.py:81:15
   |
79 |         return self.config.is_configured()
80 |
81 |     async def _make_api_request(
   |               ^^^^^^^^^^^^^^^^^
82 |         self,
83 |         messages: list[dict[str, str]],
   |

PLR0915 Too many statements (51 > 50)
  --> app\services\ai_providers\deepseek.py:81:15
   |
79 |         return self.config.is_configured()
80 |
81 |     async def _make_api_request(
   |               ^^^^^^^^^^^^^^^^^
82 |         self,
83 |         messages: list[dict[str, str]],
   |

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> app\services\ai_providers\deepseek.py:87:46
   |
85 |         max_tokens: int,
86 |     ) -> dict[str, Any]:
87 |         """–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –∫ DeepSeek API —Å retry –ª–æ–≥–∏–∫–æ–π."""
   |                                              ^
88 |         client = await self._get_client()
   |

PLR2004 Magic value used in comparison, consider replacing `200` with a constant variable
   --> app\services\ai_providers\deepseek.py:109:44
    |
108 |                 # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤ –æ—Ç–≤–µ—Ç–∞
109 |                 if response.status_code == 200:
    |                                            ^^^
110 |                     logger.info(
111 |                         f"‚úÖ –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç DeepSeek API –∑–∞ {response_time:.2f}—Å",
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_providers\deepseek.py:111:82
    |
109 |                 if response.status_code == 200:
110 |                     logger.info(
111 |                         f"‚úÖ –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç DeepSeek API –∑–∞ {response_time:.2f}—Å",
    |                                                                                   ^
112 |                     )
113 |                     return response.json()
    |

PLR2004 Magic value used in comparison, consider replacing `401` with a constant variable
   --> app\services\ai_providers\deepseek.py:115:44
    |
113 |                     return response.json()
114 |
115 |                 if response.status_code == 401:
    |                                            ^^^
116 |                     raise APIAuthenticationError(
117 |                         "–ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á DeepSeek",
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\deepseek.py:116:27
    |
115 |                   if response.status_code == 401:
116 |                       raise APIAuthenticationError(
    |  ___________________________^
117 | |                         "–ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á DeepSeek",
118 | |                         self.provider_name,
119 | |                         "401",
120 | |                     )
    | |_____________________^
121 |
122 |                   if response.status_code == 402:
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\deepseek.py:117:25
    |
115 |                 if response.status_code == 401:
116 |                     raise APIAuthenticationError(
117 |                         "–ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á DeepSeek",
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
118 |                         self.provider_name,
119 |                         "401",
    |
help: Assign to variable; remove string literal

PLR2004 Magic value used in comparison, consider replacing `402` with a constant variable
   --> app\services\ai_providers\deepseek.py:122:44
    |
120 |                     )
121 |
122 |                 if response.status_code == 402:
    |                                            ^^^
123 |                     raise APIQuotaExceededError(
124 |                         "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á–µ—Ç–µ DeepSeek API. "
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\deepseek.py:123:27
    |
122 |                   if response.status_code == 402:
123 |                       raise APIQuotaExceededError(
    |  ___________________________^
124 | |                         "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á–µ—Ç–µ DeepSeek API. "
125 | |                         "–ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ DeepSeek.",
126 | |                         self.provider_name,
127 | |                         "402",
128 | |                     )
    | |_____________________^
129 |
130 |                   if response.status_code == 429:
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\deepseek.py:124:25
    |
122 |                   if response.status_code == 402:
123 |                       raise APIQuotaExceededError(
124 | /                         "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á–µ—Ç–µ DeepSeek API. "
125 | |                         "–ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ DeepSeek.",
    | |______________________________________________________________________^
126 |                           self.provider_name,
127 |                           "402",
    |
help: Assign to variable; remove string literal

PLR2004 Magic value used in comparison, consider replacing `429` with a constant variable
   --> app\services\ai_providers\deepseek.py:130:44
    |
128 |                     )
129 |
130 |                 if response.status_code == 429:
    |                                            ^^^
131 |                     if attempt < self._max_retries - 1:
132 |                         delay = self._retry_delay * (2**attempt)
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_providers\deepseek.py:134:82
    |
132 |                         delay = self._retry_delay * (2**attempt)
133 |                         logger.warning(
134 |                             f"‚è≥ Rate limit –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –≤ DeepSeek. –û–∂–∏–¥–∞–Ω–∏–µ {delay}—Å...",
    |                                                                                   ^
135 |                         )
136 |                         await asyncio.sleep(delay)
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\deepseek.py:138:27
    |
136 |                           await asyncio.sleep(delay)
137 |                           continue
138 |                       raise APIRateLimitError(
    |  ___________________________^
139 | |                         "–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ DeepSeek API",
140 | |                         self.provider_name,
141 | |                         "429",
142 | |                     )
    | |_____________________^
143 |
144 |                   if response.status_code >= 500:
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\deepseek.py:139:25
    |
137 |                         continue
138 |                     raise APIRateLimitError(
139 |                         "–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ DeepSeek API",
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
140 |                         self.provider_name,
141 |                         "429",
    |
help: Assign to variable; remove string literal

PLR2004 Magic value used in comparison, consider replacing `500` with a constant variable
   --> app\services\ai_providers\deepseek.py:144:44
    |
142 |                     )
143 |
144 |                 if response.status_code >= 500:
    |                                            ^^^
145 |                     if attempt < self._max_retries - 1:
146 |                         delay = self._retry_delay * (attempt + 1)
    |

E501 Line too long (107 > 88)
   --> app\services\ai_providers\deepseek.py:148:88
    |
146 |                         delay = self._retry_delay * (attempt + 1)
147 |                         logger.warning(
148 |                             f"üîÑ –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ DeepSeek {response.status_code}. –ü–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ {delay}—Å...",
    |                                                                                         ^^^^^^^^^^^^^^^^^^^
149 |                         )
150 |                         await asyncio.sleep(delay)
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_providers\deepseek.py:148:101
    |
146 |                         delay = self._retry_delay * (attempt + 1)
147 |                         logger.warning(
148 |                             f"üîÑ –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ DeepSeek {response.status_code}. –ü–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ {delay}—Å...",
    |                                                                                                      ^
149 |                         )
150 |                         await asyncio.sleep(delay)
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\deepseek.py:152:27
    |
150 |                           await asyncio.sleep(delay)
151 |                           continue
152 |                       raise APIConnectionError(
    |  ___________________________^
153 | |                         f"–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ DeepSeek: {response.status_code}",
154 | |                         self.provider_name,
155 | |                         str(response.status_code),
156 | |                     )
    | |_____________________^
157 |
158 |                   # –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥—Ä—É–≥–∏—Ö –æ—à–∏–±–æ–∫
    |

EM102 Exception must not use an f-string literal, assign to variable first
   --> app\services\ai_providers\deepseek.py:153:25
    |
151 |                         continue
152 |                     raise APIConnectionError(
153 |                         f"–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ DeepSeek: {response.status_code}",
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
154 |                         self.provider_name,
155 |                         str(response.status_code),
    |
help: Assign to variable; remove f-string literal

E722 Do not use bare `except`
   --> app\services\ai_providers\deepseek.py:163:17
    |
161 |                     error_data = response.json()
162 |                     error_text = error_data.get("error", {}).get("message", "")
163 |                 except:
    |                 ^^^^^^
164 |                     error_text = response.text
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\deepseek.py:166:23
    |
164 |                       error_text = response.text
165 |
166 |                   raise APIConnectionError(
    |  _______________________^
167 | |                     f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ DeepSeek: {response.status_code}. {error_text}",
168 | |                     self.provider_name,
169 | |                     str(response.status_code),
170 | |                 )
    | |_________________^
171 |
172 |               except httpx.TimeoutException:
    |

EM102 Exception must not use an f-string literal, assign to variable first
   --> app\services\ai_providers\deepseek.py:167:21
    |
166 |                 raise APIConnectionError(
167 |                     f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ DeepSeek: {response.status_code}. {error_text}",
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
168 |                     self.provider_name,
169 |                     str(response.status_code),
    |
help: Assign to variable; remove f-string literal

E501 Line too long (96 > 88)
   --> app\services\ai_providers\deepseek.py:167:89
    |
166 |                 raise APIConnectionError(
167 |                     f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ DeepSeek: {response.status_code}. {error_text}",
    |                                                                                         ^^^^^^^^
168 |                     self.provider_name,
169 |                     str(response.status_code),
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_providers\deepseek.py:176:77
    |
174 |                     delay = self._retry_delay * (attempt + 1)
175 |                     logger.warning(
176 |                         f"‚è∞ Timeout –∑–∞–ø—Ä–æ—Å–∞ –∫ DeepSeek. –ü–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ {delay}—Å...",
    |                                                                              ^
177 |                     )
178 |                     await asyncio.sleep(delay)
    |

B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
   --> app\services\ai_providers\deepseek.py:180:17
    |
178 |                       await asyncio.sleep(delay)
179 |                       continue
180 | /                 raise APIConnectionError(
181 | |                     "Timeout –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ DeepSeek API",
182 | |                     self.provider_name,
183 | |                     "timeout",
184 | |                 )
    | |_________________^
185 |
186 |               except httpx.ConnectError:
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\deepseek.py:180:23
    |
178 |                       await asyncio.sleep(delay)
179 |                       continue
180 |                   raise APIConnectionError(
    |  _______________________^
181 | |                     "Timeout –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ DeepSeek API",
182 | |                     self.provider_name,
183 | |                     "timeout",
184 | |                 )
    | |_________________^
185 |
186 |               except httpx.ConnectError:
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\deepseek.py:181:21
    |
179 |                     continue
180 |                 raise APIConnectionError(
181 |                     "Timeout –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ DeepSeek API",
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
182 |                     self.provider_name,
183 |                     "timeout",
    |
help: Assign to variable; remove string literal

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_providers\deepseek.py:190:80
    |
188 |                     delay = self._retry_delay * (attempt + 1)
189 |                     logger.warning(
190 |                         f"üåê –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ DeepSeek. –ü–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ {delay}—Å...",
    |                                                                                 ^
191 |                     )
192 |                     await asyncio.sleep(delay)
    |

B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
   --> app\services\ai_providers\deepseek.py:194:17
    |
192 |                       await asyncio.sleep(delay)
193 |                       continue
194 | /                 raise APIConnectionError(
195 | |                     "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ DeepSeek API",
196 | |                     self.provider_name,
197 | |                     "connection_error",
198 | |                 )
    | |_________________^
199 |
200 |           raise APIConnectionError(
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\deepseek.py:194:23
    |
192 |                       await asyncio.sleep(delay)
193 |                       continue
194 |                   raise APIConnectionError(
    |  _______________________^
195 | |                     "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ DeepSeek API",
196 | |                     self.provider_name,
197 | |                     "connection_error",
198 | |                 )
    | |_________________^
199 |
200 |           raise APIConnectionError(
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\deepseek.py:195:21
    |
193 |                     continue
194 |                 raise APIConnectionError(
195 |                     "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ DeepSeek API",
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
196 |                     self.provider_name,
197 |                     "connection_error",
    |
help: Assign to variable; remove string literal

RUF001 String contains ambiguous `–ù` (CYRILLIC CAPITAL LETTER EN). Did you mean `H` (LATIN CAPITAL LETTER H)?
   --> app\services\ai_providers\deepseek.py:195:22
    |
193 |                     continue
194 |                 raise APIConnectionError(
195 |                     "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ DeepSeek API",
    |                      ^
196 |                     self.provider_name,
197 |                     "connection_error",
    |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
   --> app\services\ai_providers\deepseek.py:195:23
    |
193 |                     continue
194 |                 raise APIConnectionError(
195 |                     "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ DeepSeek API",
    |                       ^
196 |                     self.provider_name,
197 |                     "connection_error",
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\deepseek.py:200:15
    |
198 |                   )
199 |
200 |           raise APIConnectionError(
    |  _______________^
201 | |             "–ò—Å—á–µ—Ä–ø–∞–Ω—ã –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ DeepSeek API",
202 | |             self.provider_name,
203 | |             "max_retries_exceeded",
204 | |         )
    | |_________^
205 |
206 |       async def generate_response(
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\deepseek.py:201:13
    |
200 |         raise APIConnectionError(
201 |             "–ò—Å—á–µ—Ä–ø–∞–Ω—ã –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ DeepSeek API",
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
202 |             self.provider_name,
203 |             "max_retries_exceeded",
    |
help: Assign to variable; remove string literal

ANN003 Missing type annotation for `**kwargs`
   --> app\services\ai_providers\deepseek.py:211:9
    |
209 |         temperature: float | None = None,
210 |         max_tokens: int | None = None,
211 |         **kwargs,
    |         ^^^^^^^^
212 |     ) -> AIResponse:
213 |         """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç DeepSeek AI."""
    |

ARG002 Unused method argument: `kwargs`
   --> app\services\ai_providers\deepseek.py:211:11
    |
209 |         temperature: float | None = None,
210 |         max_tokens: int | None = None,
211 |         **kwargs,
    |           ^^^^^^
212 |     ) -> AIResponse:
213 |         """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç DeepSeek AI."""
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\deepseek.py:215:19
    |
213 |         """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç DeepSeek AI."""
214 |         if not messages:
215 |             raise ValueError("–°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º")
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
216 |
217 |         if not self.is_configured():
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\deepseek.py:215:30
    |
213 |         """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç DeepSeek AI."""
214 |         if not messages:
215 |             raise ValueError("–°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º")
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
216 |
217 |         if not self.is_configured():
    |
help: Assign to variable; remove string literal

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\deepseek.py:218:19
    |
217 |           if not self.is_configured():
218 |               raise APIAuthenticationError(
    |  ___________________^
219 | |                 "DeepSeek API –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DEEPSEEK_API_KEY –≤ .env",
220 | |                 self.provider_name,
221 | |                 "not_configured",
222 | |             )
    | |_____________^
223 |
224 |           # –ò—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω—ã
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\deepseek.py:219:17
    |
217 |         if not self.is_configured():
218 |             raise APIAuthenticationError(
219 |                 "DeepSeek API –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DEEPSEEK_API_KEY –≤ .env",
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
220 |                 self.provider_name,
221 |                 "not_configured",
    |
help: Assign to variable; remove string literal

PLR2004 Magic value used in comparison, consider replacing `2.0` with a constant variable
   --> app\services\ai_providers\deepseek.py:229:38
    |
228 |         # –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
229 |         if not 0.0 <= temperature <= 2.0:
    |                                      ^^^
230 |             raise ValueError("Temperature –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 0.0 –¥–æ 2.0")
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\deepseek.py:230:19
    |
228 |         # –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
229 |         if not 0.0 <= temperature <= 2.0:
230 |             raise ValueError("Temperature –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 0.0 –¥–æ 2.0")
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
231 |
232 |         if not 1 <= max_tokens <= 4000:
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\deepseek.py:230:30
    |
228 |         # –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
229 |         if not 0.0 <= temperature <= 2.0:
230 |             raise ValueError("Temperature –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 0.0 –¥–æ 2.0")
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
231 |
232 |         if not 1 <= max_tokens <= 4000:
    |
help: Assign to variable; remove string literal

PLR2004 Magic value used in comparison, consider replacing `4000` with a constant variable
   --> app\services\ai_providers\deepseek.py:232:35
    |
230 |             raise ValueError("Temperature –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 0.0 –¥–æ 2.0")
231 |
232 |         if not 1 <= max_tokens <= 4000:
    |                                   ^^^^
233 |             raise ValueError("max_tokens –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 1 –¥–æ 4000")
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\deepseek.py:233:19
    |
232 |         if not 1 <= max_tokens <= 4000:
233 |             raise ValueError("max_tokens –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 1 –¥–æ 4000")
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
234 |
235 |         try:
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\deepseek.py:233:30
    |
232 |         if not 1 <= max_tokens <= 4000:
233 |             raise ValueError("max_tokens –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 1 –¥–æ 4000")
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
234 |
235 |         try:
    |
help: Assign to variable; remove string literal

TRY301 Abstract `raise` to an inner function
   --> app\services\ai_providers\deepseek.py:250:17
    |
248 |               # –ò–∑–≤–ª–µ–∫–∞–µ–º –æ—Ç–≤–µ—Ç
249 |               if "choices" not in data or not data["choices"]:
250 | /                 raise APIConnectionError(
251 | |                     "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç DeepSeek API",
252 | |                     self.provider_name,
253 | |                     "invalid_response",
254 | |                 )
    | |_________________^
255 |
256 |               choice = data["choices"][0]
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\deepseek.py:250:23
    |
248 |               # –ò–∑–≤–ª–µ–∫–∞–µ–º –æ—Ç–≤–µ—Ç
249 |               if "choices" not in data or not data["choices"]:
250 |                   raise APIConnectionError(
    |  _______________________^
251 | |                     "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç DeepSeek API",
252 | |                     self.provider_name,
253 | |                     "invalid_response",
254 | |                 )
    | |_________________^
255 |
256 |               choice = data["choices"][0]
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\deepseek.py:251:21
    |
249 |             if "choices" not in data or not data["choices"]:
250 |                 raise APIConnectionError(
251 |                     "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç DeepSeek API",
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
252 |                     self.provider_name,
253 |                     "invalid_response",
    |
help: Assign to variable; remove string literal

TRY301 Abstract `raise` to an inner function
   --> app\services\ai_providers\deepseek.py:260:17
    |
259 |               if not content:
260 | /                 raise APIConnectionError(
261 | |                     "–ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç DeepSeek API",
262 | |                     self.provider_name,
263 | |                     "empty_response",
264 | |                 )
    | |_________________^
265 |
266 |               # –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —Ç–æ–∫–µ–Ω—ã
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\deepseek.py:260:23
    |
259 |               if not content:
260 |                   raise APIConnectionError(
    |  _______________________^
261 | |                     "–ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç DeepSeek API",
262 | |                     self.provider_name,
263 | |                     "empty_response",
264 | |                 )
    | |_________________^
265 |
266 |               # –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —Ç–æ–∫–µ–Ω—ã
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\deepseek.py:261:21
    |
259 |             if not content:
260 |                 raise APIConnectionError(
261 |                     "–ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç DeepSeek API",
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
262 |                     self.provider_name,
263 |                     "empty_response",
    |
help: Assign to variable; remove string literal

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_providers\deepseek.py:292:61
    |
290 |             logger.info(
291 |                 f"ü§ñ DeepSeek –æ—Ç–≤–µ—Ç: {len(content)} —Å–∏–º–≤–æ–ª–æ–≤, "
292 |                 f"{tokens_used} —Ç–æ–∫–µ–Ω–æ–≤, {response_time:.2f}—Å",
    |                                                             ^
293 |             )
294 |             return ai_response
    |

TRY300 Consider moving this statement to an `else` block
   --> app\services\ai_providers\deepseek.py:294:13
    |
292 |                 f"{tokens_used} —Ç–æ–∫–µ–Ω–æ–≤, {response_time:.2f}—Å",
293 |             )
294 |             return ai_response
    |             ^^^^^^^^^^^^^^^^^^
295 |
296 |         except Exception as e:
    |

UP038 Use `X | Y` in `isinstance` call instead of `(X, Y)`
   --> app\services\ai_providers\deepseek.py:297:16
    |
296 |           except Exception as e:
297 |               if isinstance(
    |  ________________^
298 | |                 e,
299 | |                 (
300 | |                     APIConnectionError,
301 | |                     APIRateLimitError,
302 | |                     APIAuthenticationError,
303 | |                     APIQuotaExceededError,
304 | |                 ),
305 | |             ):
    | |_____________^
306 |                   raise
    |
help: Convert to `X | Y`

B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
   --> app\services\ai_providers\deepseek.py:309:13
    |
308 |               logger.exception("üí• –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ DeepSeek")
309 | /             raise APIConnectionError(
310 | |                 f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ DeepSeek: {e!s}",
311 | |                 self.provider_name,
312 | |                 "unexpected_error",
313 | |             )
    | |_____________^
314 |
315 |       async def health_check(self) -> dict[str, Any]:
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\deepseek.py:309:19
    |
308 |               logger.exception("üí• –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ DeepSeek")
309 |               raise APIConnectionError(
    |  ___________________^
310 | |                 f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ DeepSeek: {e!s}",
311 | |                 self.provider_name,
312 | |                 "unexpected_error",
313 | |             )
    | |_____________^
314 |
315 |       async def health_check(self) -> dict[str, Any]:
    |

EM102 Exception must not use an f-string literal, assign to variable first
   --> app\services\ai_providers\deepseek.py:310:17
    |
308 |             logger.exception("üí• –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ DeepSeek")
309 |             raise APIConnectionError(
310 |                 f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ DeepSeek: {e!s}",
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
311 |                 self.provider_name,
312 |                 "unexpected_error",
    |
help: Assign to variable; remove f-string literal

TRY300 Consider moving this statement to an `else` block
   --> app\services\ai_providers\deepseek.py:333:13
    |
331 |               response_time = self._calculate_response_time(start_time)
332 |
333 | /             return {
334 | |                 "status": "healthy",
335 | |                 "provider": self.provider_name,
336 | |                 "model": self.config.deepseek_model,
337 | |                 "response_time": response_time,
338 | |                 "tokens_used": response.tokens_used,
339 | |             }
    | |_____________^
340 |
341 |           except Exception as e:
    |

ANN204 Missing return type annotation for special method `__init__`
  --> app\services\ai_providers\openrouter.py:30:9
   |
28 |     """–ü—Ä–æ–≤–∞–π–¥–µ—Ä AI –¥–ª—è OpenRouter API."""
29 |
30 |     def __init__(self):
   |         ^^^^^^^^
31 |         super().__init__("openrouter")
32 |         self.config = get_config().openrouter
   |
help: Add return type annotation: `None`

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> app\services\ai_providers\openrouter.py:42:35
   |
41 |     async def _get_client(self) -> httpx.AsyncClient:
42 |         """–ü–æ–ª—É—á–µ–Ω–∏–µ HTTP –∫–ª–∏–µ–Ω—Ç–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –¥–ª—è OpenRouter."""
   |                                   ^
43 |         if self._client is None:
44 |             headers = {
   |

PLR0912 Too many branches (13 > 12)
  --> app\services\ai_providers\openrouter.py:82:15
   |
80 |         return self.config.is_configured()
81 |
82 |     async def _make_api_request(
   |               ^^^^^^^^^^^^^^^^^
83 |         self,
84 |         messages: list[dict[str, str]],
   |

PLR0915 Too many statements (51 > 50)
  --> app\services\ai_providers\openrouter.py:82:15
   |
80 |         return self.config.is_configured()
81 |
82 |     async def _make_api_request(
   |               ^^^^^^^^^^^^^^^^^
83 |         self,
84 |         messages: list[dict[str, str]],
   |

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> app\services\ai_providers\openrouter.py:88:48
   |
86 |         max_tokens: int,
87 |     ) -> dict[str, Any]:
88 |         """–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –∫ OpenRouter API —Å retry –ª–æ–≥–∏–∫–æ–π."""
   |                                                ^
89 |         client = await self._get_client()
   |

PLR2004 Magic value used in comparison, consider replacing `200` with a constant variable
   --> app\services\ai_providers\openrouter.py:110:44
    |
109 |                 # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤ –æ—Ç–≤–µ—Ç–∞
110 |                 if response.status_code == 200:
    |                                            ^^^
111 |                     logger.info(
112 |                         f"‚úÖ –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç OpenRouter API –∑–∞ {response_time:.2f}—Å",
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_providers\openrouter.py:112:84
    |
110 |                 if response.status_code == 200:
111 |                     logger.info(
112 |                         f"‚úÖ –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç OpenRouter API –∑–∞ {response_time:.2f}—Å",
    |                                                                                     ^
113 |                     )
114 |                     return response.json()
    |

PLR2004 Magic value used in comparison, consider replacing `401` with a constant variable
   --> app\services\ai_providers\openrouter.py:116:44
    |
114 |                     return response.json()
115 |
116 |                 if response.status_code == 401:
    |                                            ^^^
117 |                     raise APIAuthenticationError(
118 |                         "–ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á OpenRouter",
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\openrouter.py:117:27
    |
116 |                   if response.status_code == 401:
117 |                       raise APIAuthenticationError(
    |  ___________________________^
118 | |                         "–ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á OpenRouter",
119 | |                         self.provider_name,
120 | |                         "401",
121 | |                     )
    | |_____________________^
122 |
123 |                   if response.status_code == 402:
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\openrouter.py:118:25
    |
116 |                 if response.status_code == 401:
117 |                     raise APIAuthenticationError(
118 |                         "–ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á OpenRouter",
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
119 |                         self.provider_name,
120 |                         "401",
    |
help: Assign to variable; remove string literal

PLR2004 Magic value used in comparison, consider replacing `402` with a constant variable
   --> app\services\ai_providers\openrouter.py:123:44
    |
121 |                     )
122 |
123 |                 if response.status_code == 402:
    |                                            ^^^
124 |                     raise APIQuotaExceededError(
125 |                         "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á–µ—Ç–µ OpenRouter API. "
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\openrouter.py:124:27
    |
123 |                   if response.status_code == 402:
124 |                       raise APIQuotaExceededError(
    |  ___________________________^
125 | |                         "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á–µ—Ç–µ OpenRouter API. "
126 | |                         "–ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ OpenRouter.",
127 | |                         self.provider_name,
128 | |                         "402",
129 | |                     )
    | |_____________________^
130 |
131 |                   if response.status_code == 429:
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\openrouter.py:125:25
    |
123 |                   if response.status_code == 402:
124 |                       raise APIQuotaExceededError(
125 | /                         "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á–µ—Ç–µ OpenRouter API. "
126 | |                         "–ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ OpenRouter.",
    | |________________________________________________________________________^
127 |                           self.provider_name,
128 |                           "402",
    |
help: Assign to variable; remove string literal

PLR2004 Magic value used in comparison, consider replacing `429` with a constant variable
   --> app\services\ai_providers\openrouter.py:131:44
    |
129 |                     )
130 |
131 |                 if response.status_code == 429:
    |                                            ^^^
132 |                     if attempt < self._max_retries - 1:
133 |                         delay = self._retry_delay * (2**attempt)
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_providers\openrouter.py:135:84
    |
133 |                         delay = self._retry_delay * (2**attempt)
134 |                         logger.warning(
135 |                             f"‚è≥ Rate limit –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –≤ OpenRouter. –û–∂–∏–¥–∞–Ω–∏–µ {delay}—Å...",
    |                                                                                     ^
136 |                         )
137 |                         await asyncio.sleep(delay)
    |

E501 Line too long (90 > 88)
   --> app\services\ai_providers\openrouter.py:135:88
    |
133 |                         delay = self._retry_delay * (2**attempt)
134 |                         logger.warning(
135 |                             f"‚è≥ Rate limit –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –≤ OpenRouter. –û–∂–∏–¥–∞–Ω–∏–µ {delay}—Å...",
    |                                                                                         ^^
136 |                         )
137 |                         await asyncio.sleep(delay)
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\openrouter.py:139:27
    |
137 |                           await asyncio.sleep(delay)
138 |                           continue
139 |                       raise APIRateLimitError(
    |  ___________________________^
140 | |                         "–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ OpenRouter API",
141 | |                         self.provider_name,
142 | |                         "429",
143 | |                     )
    | |_____________________^
144 |
145 |                   if response.status_code >= 500:
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\openrouter.py:140:25
    |
138 |                         continue
139 |                     raise APIRateLimitError(
140 |                         "–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ OpenRouter API",
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
141 |                         self.provider_name,
142 |                         "429",
    |
help: Assign to variable; remove string literal

PLR2004 Magic value used in comparison, consider replacing `500` with a constant variable
   --> app\services\ai_providers\openrouter.py:145:44
    |
143 |                     )
144 |
145 |                 if response.status_code >= 500:
    |                                            ^^^
146 |                     if attempt < self._max_retries - 1:
147 |                         delay = self._retry_delay * (attempt + 1)
    |

E501 Line too long (109 > 88)
   --> app\services\ai_providers\openrouter.py:149:88
    |
147 | ‚Ä¶     delay = self._retry_delay * (attempt + 1)
148 | ‚Ä¶     logger.warning(
149 | ‚Ä¶         f"üîÑ –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ OpenRouter {response.status_code}. –ü–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ {delay}—Å...",
    |                                                                       ^^^^^^^^^^^^^^^^^^^^^
150 | ‚Ä¶     )
151 | ‚Ä¶     await asyncio.sleep(delay)
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_providers\openrouter.py:149:103
    |
147 | ‚Ä¶     delay = self._retry_delay * (attempt + 1)
148 | ‚Ä¶     logger.warning(
149 | ‚Ä¶         f"üîÑ –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ OpenRouter {response.status_code}. –ü–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ {delay}—Å...",
    |                                                                                      ^
150 | ‚Ä¶     )
151 | ‚Ä¶     await asyncio.sleep(delay)
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\openrouter.py:153:27
    |
151 |                           await asyncio.sleep(delay)
152 |                           continue
153 |                       raise APIConnectionError(
    |  ___________________________^
154 | |                         f"–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ OpenRouter: {response.status_code}",
155 | |                         self.provider_name,
156 | |                         str(response.status_code),
157 | |                     )
    | |_____________________^
158 |
159 |                   # –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥—Ä—É–≥–∏—Ö –æ—à–∏–±–æ–∫
    |

EM102 Exception must not use an f-string literal, assign to variable first
   --> app\services\ai_providers\openrouter.py:154:25
    |
152 |                         continue
153 |                     raise APIConnectionError(
154 |                         f"–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ OpenRouter: {response.status_code}",
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
155 |                         self.provider_name,
156 |                         str(response.status_code),
    |
help: Assign to variable; remove f-string literal

E722 Do not use bare `except`
   --> app\services\ai_providers\openrouter.py:164:17
    |
162 |                     error_data = response.json()
163 |                     error_text = error_data.get("error", {}).get("message", "")
164 |                 except:
    |                 ^^^^^^
165 |                     error_text = response.text
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\openrouter.py:167:23
    |
165 |                       error_text = response.text
166 |
167 |                   raise APIConnectionError(
    |  _______________________^
168 | |                     f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ OpenRouter: {response.status_code}. {error_text}",
169 | |                     self.provider_name,
170 | |                     str(response.status_code),
171 | |                 )
    | |_________________^
172 |
173 |               except httpx.TimeoutException:
    |

EM102 Exception must not use an f-string literal, assign to variable first
   --> app\services\ai_providers\openrouter.py:168:21
    |
167 |                 raise APIConnectionError(
168 |                     f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ OpenRouter: {response.status_code}. {error_text}",
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
169 |                     self.provider_name,
170 |                     str(response.status_code),
    |
help: Assign to variable; remove f-string literal

E501 Line too long (98 > 88)
   --> app\services\ai_providers\openrouter.py:168:89
    |
167 |                 raise APIConnectionError(
168 |                     f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ OpenRouter: {response.status_code}. {error_text}",
    |                                                                                         ^^^^^^^^^^
169 |                     self.provider_name,
170 |                     str(response.status_code),
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_providers\openrouter.py:177:79
    |
175 |                     delay = self._retry_delay * (attempt + 1)
176 |                     logger.warning(
177 |                         f"‚è∞ Timeout –∑–∞–ø—Ä–æ—Å–∞ –∫ OpenRouter. –ü–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ {delay}—Å...",
    |                                                                                ^
178 |                     )
179 |                     await asyncio.sleep(delay)
    |

B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
   --> app\services\ai_providers\openrouter.py:181:17
    |
179 |                       await asyncio.sleep(delay)
180 |                       continue
181 | /                 raise APIConnectionError(
182 | |                     "Timeout –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ OpenRouter API",
183 | |                     self.provider_name,
184 | |                     "timeout",
185 | |                 )
    | |_________________^
186 |
187 |               except httpx.ConnectError:
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\openrouter.py:181:23
    |
179 |                       await asyncio.sleep(delay)
180 |                       continue
181 |                   raise APIConnectionError(
    |  _______________________^
182 | |                     "Timeout –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ OpenRouter API",
183 | |                     self.provider_name,
184 | |                     "timeout",
185 | |                 )
    | |_________________^
186 |
187 |               except httpx.ConnectError:
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\openrouter.py:182:21
    |
180 |                     continue
181 |                 raise APIConnectionError(
182 |                     "Timeout –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ OpenRouter API",
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
183 |                     self.provider_name,
184 |                     "timeout",
    |
help: Assign to variable; remove string literal

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_providers\openrouter.py:191:82
    |
189 |                     delay = self._retry_delay * (attempt + 1)
190 |                     logger.warning(
191 |                         f"üåê –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ OpenRouter. –ü–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ {delay}—Å...",
    |                                                                                   ^
192 |                     )
193 |                     await asyncio.sleep(delay)
    |

B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
   --> app\services\ai_providers\openrouter.py:195:17
    |
193 |                       await asyncio.sleep(delay)
194 |                       continue
195 | /                 raise APIConnectionError(
196 | |                     "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ OpenRouter API",
197 | |                     self.provider_name,
198 | |                     "connection_error",
199 | |                 )
    | |_________________^
200 |
201 |           raise APIConnectionError(
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\openrouter.py:195:23
    |
193 |                       await asyncio.sleep(delay)
194 |                       continue
195 |                   raise APIConnectionError(
    |  _______________________^
196 | |                     "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ OpenRouter API",
197 | |                     self.provider_name,
198 | |                     "connection_error",
199 | |                 )
    | |_________________^
200 |
201 |           raise APIConnectionError(
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\openrouter.py:196:21
    |
194 |                     continue
195 |                 raise APIConnectionError(
196 |                     "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ OpenRouter API",
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
197 |                     self.provider_name,
198 |                     "connection_error",
    |
help: Assign to variable; remove string literal

RUF001 String contains ambiguous `–ù` (CYRILLIC CAPITAL LETTER EN). Did you mean `H` (LATIN CAPITAL LETTER H)?
   --> app\services\ai_providers\openrouter.py:196:22
    |
194 |                     continue
195 |                 raise APIConnectionError(
196 |                     "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ OpenRouter API",
    |                      ^
197 |                     self.provider_name,
198 |                     "connection_error",
    |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
   --> app\services\ai_providers\openrouter.py:196:23
    |
194 |                     continue
195 |                 raise APIConnectionError(
196 |                     "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ OpenRouter API",
    |                       ^
197 |                     self.provider_name,
198 |                     "connection_error",
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\openrouter.py:201:15
    |
199 |                   )
200 |
201 |           raise APIConnectionError(
    |  _______________^
202 | |             "–ò—Å—á–µ—Ä–ø–∞–Ω—ã –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ OpenRouter API",
203 | |             self.provider_name,
204 | |             "max_retries_exceeded",
205 | |         )
    | |_________^
206 |
207 |       async def generate_response(
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\openrouter.py:202:13
    |
201 |         raise APIConnectionError(
202 |             "–ò—Å—á–µ—Ä–ø–∞–Ω—ã –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ OpenRouter API",
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
203 |             self.provider_name,
204 |             "max_retries_exceeded",
    |
help: Assign to variable; remove string literal

ANN003 Missing type annotation for `**kwargs`
   --> app\services\ai_providers\openrouter.py:212:9
    |
210 |         temperature: float | None = None,
211 |         max_tokens: int | None = None,
212 |         **kwargs,
    |         ^^^^^^^^
213 |     ) -> AIResponse:
214 |         """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç OpenRouter AI."""
    |

ARG002 Unused method argument: `kwargs`
   --> app\services\ai_providers\openrouter.py:212:11
    |
210 |         temperature: float | None = None,
211 |         max_tokens: int | None = None,
212 |         **kwargs,
    |           ^^^^^^
213 |     ) -> AIResponse:
214 |         """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç OpenRouter AI."""
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\openrouter.py:216:19
    |
214 |         """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç OpenRouter AI."""
215 |         if not messages:
216 |             raise ValueError("–°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º")
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
217 |
218 |         if not self.is_configured():
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\openrouter.py:216:30
    |
214 |         """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç OpenRouter AI."""
215 |         if not messages:
216 |             raise ValueError("–°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º")
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
217 |
218 |         if not self.is_configured():
    |
help: Assign to variable; remove string literal

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\openrouter.py:219:19
    |
218 |           if not self.is_configured():
219 |               raise APIAuthenticationError(
    |  ___________________^
220 | |                 "OpenRouter API –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ OPENROUTER_API_KEY –≤ .env",
221 | |                 self.provider_name,
222 | |                 "not_configured",
223 | |             )
    | |_____________^
224 |
225 |           # –ò—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω—ã
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\openrouter.py:220:17
    |
218 |         if not self.is_configured():
219 |             raise APIAuthenticationError(
220 |                 "OpenRouter API –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ OPENROUTER_API_KEY –≤ .env",
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
221 |                 self.provider_name,
222 |                 "not_configured",
    |
help: Assign to variable; remove string literal

PLR2004 Magic value used in comparison, consider replacing `2.0` with a constant variable
   --> app\services\ai_providers\openrouter.py:230:38
    |
229 |         # –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
230 |         if not 0.0 <= temperature <= 2.0:
    |                                      ^^^
231 |             raise ValueError("Temperature –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 0.0 –¥–æ 2.0")
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\openrouter.py:231:19
    |
229 |         # –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
230 |         if not 0.0 <= temperature <= 2.0:
231 |             raise ValueError("Temperature –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 0.0 –¥–æ 2.0")
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
232 |
233 |         if not 1 <= max_tokens <= 8000:
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\openrouter.py:231:30
    |
229 |         # –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
230 |         if not 0.0 <= temperature <= 2.0:
231 |             raise ValueError("Temperature –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 0.0 –¥–æ 2.0")
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
232 |
233 |         if not 1 <= max_tokens <= 8000:
    |
help: Assign to variable; remove string literal

PLR2004 Magic value used in comparison, consider replacing `8000` with a constant variable
   --> app\services\ai_providers\openrouter.py:233:35
    |
231 |             raise ValueError("Temperature –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 0.0 –¥–æ 2.0")
232 |
233 |         if not 1 <= max_tokens <= 8000:
    |                                   ^^^^
234 |             raise ValueError("max_tokens –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 1 –¥–æ 8000")
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\openrouter.py:234:19
    |
233 |         if not 1 <= max_tokens <= 8000:
234 |             raise ValueError("max_tokens –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 1 –¥–æ 8000")
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
235 |
236 |         try:
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\openrouter.py:234:30
    |
233 |         if not 1 <= max_tokens <= 8000:
234 |             raise ValueError("max_tokens –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 1 –¥–æ 8000")
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
235 |
236 |         try:
    |
help: Assign to variable; remove string literal

TRY301 Abstract `raise` to an inner function
   --> app\services\ai_providers\openrouter.py:251:17
    |
249 |               # –ò–∑–≤–ª–µ–∫–∞–µ–º –æ—Ç–≤–µ—Ç
250 |               if "choices" not in data or not data["choices"]:
251 | /                 raise APIConnectionError(
252 | |                     "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç OpenRouter API",
253 | |                     self.provider_name,
254 | |                     "invalid_response",
255 | |                 )
    | |_________________^
256 |
257 |               choice = data["choices"][0]
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\openrouter.py:251:23
    |
249 |               # –ò–∑–≤–ª–µ–∫–∞–µ–º –æ—Ç–≤–µ—Ç
250 |               if "choices" not in data or not data["choices"]:
251 |                   raise APIConnectionError(
    |  _______________________^
252 | |                     "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç OpenRouter API",
253 | |                     self.provider_name,
254 | |                     "invalid_response",
255 | |                 )
    | |_________________^
256 |
257 |               choice = data["choices"][0]
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\openrouter.py:252:21
    |
250 |             if "choices" not in data or not data["choices"]:
251 |                 raise APIConnectionError(
252 |                     "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç OpenRouter API",
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
253 |                     self.provider_name,
254 |                     "invalid_response",
    |
help: Assign to variable; remove string literal

TRY301 Abstract `raise` to an inner function
   --> app\services\ai_providers\openrouter.py:261:17
    |
260 |               if not content:
261 | /                 raise APIConnectionError(
262 | |                     "–ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç OpenRouter API",
263 | |                     self.provider_name,
264 | |                     "empty_response",
265 | |                 )
    | |_________________^
266 |
267 |               # –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —Ç–æ–∫–µ–Ω—ã
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\openrouter.py:261:23
    |
260 |               if not content:
261 |                   raise APIConnectionError(
    |  _______________________^
262 | |                     "–ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç OpenRouter API",
263 | |                     self.provider_name,
264 | |                     "empty_response",
265 | |                 )
    | |_________________^
266 |
267 |               # –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —Ç–æ–∫–µ–Ω—ã
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_providers\openrouter.py:262:21
    |
260 |             if not content:
261 |                 raise APIConnectionError(
262 |                     "–ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç OpenRouter API",
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
263 |                     self.provider_name,
264 |                     "empty_response",
    |
help: Assign to variable; remove string literal

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_providers\openrouter.py:293:61
    |
291 |             logger.info(
292 |                 f"ü§ñ OpenRouter –æ—Ç–≤–µ—Ç: {len(content)} —Å–∏–º–≤–æ–ª–æ–≤, "
293 |                 f"{tokens_used} —Ç–æ–∫–µ–Ω–æ–≤, {response_time:.2f}—Å",
    |                                                             ^
294 |             )
295 |             return ai_response
    |

TRY300 Consider moving this statement to an `else` block
   --> app\services\ai_providers\openrouter.py:295:13
    |
293 |                 f"{tokens_used} —Ç–æ–∫–µ–Ω–æ–≤, {response_time:.2f}—Å",
294 |             )
295 |             return ai_response
    |             ^^^^^^^^^^^^^^^^^^
296 |
297 |         except Exception as e:
    |

UP038 Use `X | Y` in `isinstance` call instead of `(X, Y)`
   --> app\services\ai_providers\openrouter.py:298:16
    |
297 |           except Exception as e:
298 |               if isinstance(
    |  ________________^
299 | |                 e,
300 | |                 (
301 | |                     APIConnectionError,
302 | |                     APIRateLimitError,
303 | |                     APIAuthenticationError,
304 | |                     APIQuotaExceededError,
305 | |                 ),
306 | |             ):
    | |_____________^
307 |                   raise
    |
help: Convert to `X | Y`

B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
   --> app\services\ai_providers\openrouter.py:310:13
    |
309 |               logger.exception("üí• –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ OpenRouter")
310 | /             raise APIConnectionError(
311 | |                 f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ OpenRouter: {e!s}",
312 | |                 self.provider_name,
313 | |                 "unexpected_error",
314 | |             )
    | |_____________^
315 |
316 |       async def health_check(self) -> dict[str, Any]:
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_providers\openrouter.py:310:19
    |
309 |               logger.exception("üí• –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ OpenRouter")
310 |               raise APIConnectionError(
    |  ___________________^
311 | |                 f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ OpenRouter: {e!s}",
312 | |                 self.provider_name,
313 | |                 "unexpected_error",
314 | |             )
    | |_____________^
315 |
316 |       async def health_check(self) -> dict[str, Any]:
    |

EM102 Exception must not use an f-string literal, assign to variable first
   --> app\services\ai_providers\openrouter.py:311:17
    |
309 |             logger.exception("üí• –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ OpenRouter")
310 |             raise APIConnectionError(
311 |                 f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ OpenRouter: {e!s}",
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
312 |                 self.provider_name,
313 |                 "unexpected_error",
    |
help: Assign to variable; remove f-string literal

TRY300 Consider moving this statement to an `else` block
   --> app\services\ai_providers\openrouter.py:334:13
    |
332 |               response_time = self._calculate_response_time(start_time)
333 |
334 | /             return {
335 | |                 "status": "healthy",
336 | |                 "provider": self.provider_name,
337 | |                 "model": self.config.openrouter_model,
338 | |                 "response_time": response_time,
339 | |                 "tokens_used": response.tokens_used,
340 | |             }
    | |_____________^
341 |
342 |           except Exception as e:
    |

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
 --> app\services\ai_service.py:3:37
  |
1 | """
2 | @file: ai_service.py
3 | @description: –°–µ—Ä–≤–∏—Å –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å DeepSeek API –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ –ò–ò
  |                                     ^
4 | @dependencies: httpx, asyncio, loguru, typing
5 | @created: 2025-09-12
  |

ANN204 Missing return type annotation for special method `__init__`
  --> app\services\ai_service.py:60:9
   |
58 |     """–ü—Ä–æ—Å—Ç–æ–π –∫–µ—à –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ AI."""
59 |
60 |     def __init__(self, ttl_seconds: int = 3600):
   |         ^^^^^^^^
61 |         self._cache: dict[str, dict[str, Any]] = {}
62 |         self._ttl = ttl_seconds
   |
help: Add return type annotation: `None`

S324 Probable use of insecure hash functions in `hashlib`: `md5`
  --> app\services\ai_service.py:70:16
   |
68 |             + model
69 |         )
70 |         return hashlib.md5(content.encode()).hexdigest()
   |                ^^^^^^^^^^^
71 |
72 |     def get(self, messages: list[ConversationMessage], model: str) -> AIResponse | None:
   |

DTZ005 `datetime.datetime.now()` called without a `tz` argument
  --> app\services\ai_service.py:78:16
   |
76 |         if key in self._cache:
77 |             entry = self._cache[key]
78 |             if datetime.now() - entry["timestamp"] < timedelta(seconds=self._ttl):
   |                ^^^^^^^^^^^^^^
79 |                 logger.debug(f"üéØ –ù–∞–π–¥–µ–Ω –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –¥–ª—è –∫–ª—é—á–∞: {key[:8]}...")
80 |                 response = entry["response"]
   |
help: Pass a `datetime.timezone` object to the `tz` parameter

DTZ005 `datetime.datetime.now()` called without a `tz` argument
   --> app\services\ai_service.py:98:26
    |
 96 |         self._cache[key] = {
 97 |             "response": response,
 98 |             "timestamp": datetime.now(),
    |                          ^^^^^^^^^^^^^^
 99 |         }
100 |         logger.debug(f"üíæ –û—Ç–≤–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –∫–µ—à —Å –∫–ª—é—á–æ–º: {key[:8]}...")
    |
help: Pass a `datetime.timezone` object to the `tz` parameter

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_service.py:100:47
    |
 98 |             "timestamp": datetime.now(),
 99 |         }
100 |         logger.debug(f"üíæ –û—Ç–≤–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –∫–µ—à —Å –∫–ª—é—á–æ–º: {key[:8]}...")
    |                                                ^
101 |
102 |     def clear(self) -> None:
    |

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_service.py:109:26
    |
108 | class AIService:
109 |     """–°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å DeepSeek API."""
    |                          ^
110 |
111 |     def __init__(self):
    |

ANN204 Missing return type annotation for special method `__init__`
   --> app\services\ai_service.py:111:9
    |
109 |     """–°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å DeepSeek API."""
110 |
111 |     def __init__(self):
    |         ^^^^^^^^
112 |         self.config = get_config()
113 |         self._client: httpx.AsyncClient | None = None
    |
help: Add return type annotation: `None`

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_service.py:124:35
    |
123 |     async def _get_client(self) -> httpx.AsyncClient:
124 |         """–ü–æ–ª—É—á–µ–Ω–∏–µ HTTP –∫–ª–∏–µ–Ω—Ç–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏."""
    |                                   ^
125 |         if self._client is None:
126 |             headers = {
    |

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_service.py:182:37
    |
180 |         max_tokens: int,
181 |     ) -> dict[str, Any]:
182 |         """–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –∫ API —Å retry –ª–æ–≥–∏–∫–æ–π."""
    |                                     ^
183 |         client = await self._get_client()
    |

PLR2004 Magic value used in comparison, consider replacing `200` with a constant variable
   --> app\services\ai_service.py:205:44
    |
204 |                 # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤ –æ—Ç–≤–µ—Ç–∞
205 |                 if response.status_code == 200:
    |                                            ^^^
206 |                     logger.info(
207 |                         f"‚úÖ –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç DeepSeek API –∑–∞ {response_time:.2f}—Å",
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_service.py:207:82
    |
205 |                 if response.status_code == 200:
206 |                     logger.info(
207 |                         f"‚úÖ –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç DeepSeek API –∑–∞ {response_time:.2f}—Å",
    |                                                                                   ^
208 |                     )
209 |                     data = response.json()
    |

RET504 Unnecessary assignment to `data` before `return` statement
   --> app\services\ai_service.py:210:28
    |
208 |                     )
209 |                     data = response.json()
210 |                     return data
    |                            ^^^^
211 |
212 |                 if response.status_code == 401:
    |
help: Remove unnecessary assignment

PLR2004 Magic value used in comparison, consider replacing `401` with a constant variable
   --> app\services\ai_service.py:212:44
    |
210 |                     return data
211 |
212 |                 if response.status_code == 401:
    |                                            ^^^
213 |                     raise APIAuthenticationError("–ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á DeepSeek")
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_service.py:213:27
    |
212 |                 if response.status_code == 401:
213 |                     raise APIAuthenticationError("–ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á DeepSeek")
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
214 |
215 |                 if response.status_code == 402:
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_service.py:213:50
    |
212 |                 if response.status_code == 401:
213 |                     raise APIAuthenticationError("–ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á DeepSeek")
    |                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
214 |
215 |                 if response.status_code == 402:
    |
help: Assign to variable; remove string literal

PLR2004 Magic value used in comparison, consider replacing `402` with a constant variable
   --> app\services\ai_service.py:215:44
    |
213 |                     raise APIAuthenticationError("–ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á DeepSeek")
214 |
215 |                 if response.status_code == 402:
    |                                            ^^^
216 |                     raise APIAuthenticationError(
217 |                         "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á–µ—Ç–µ DeepSeek API. "
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_service.py:216:27
    |
215 |                   if response.status_code == 402:
216 |                       raise APIAuthenticationError(
    |  ___________________________^
217 | |                         "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á–µ—Ç–µ DeepSeek API. "
218 | |                         "–ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ DeepSeek.",
219 | |                     )
    | |_____________________^
220 |
221 |                   if response.status_code == 429:
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_service.py:217:25
    |
215 |                   if response.status_code == 402:
216 |                       raise APIAuthenticationError(
217 | /                         "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á–µ—Ç–µ DeepSeek API. "
218 | |                         "–ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ DeepSeek.",
    | |______________________________________________________________________^
219 |                       )
    |
help: Assign to variable; remove string literal

PLR2004 Magic value used in comparison, consider replacing `429` with a constant variable
   --> app\services\ai_service.py:221:44
    |
219 |                     )
220 |
221 |                 if response.status_code == 429:
    |                                            ^^^
222 |                     if attempt < self._max_retries - 1:
223 |                         delay = self._retry_delay * (2**attempt)  # Exponential backoff
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_service.py:224:82
    |
222 |                     if attempt < self._max_retries - 1:
223 |                         delay = self._retry_delay * (2**attempt)  # Exponential backoff
224 |                         logger.warning(f"‚è≥ Rate limit –¥–æ—Å—Ç–∏–≥–Ω—É—Ç. –û–∂–∏–¥–∞–Ω–∏–µ {delay}—Å...")
    |                                                                                   ^
225 |                         await asyncio.sleep(delay)
226 |                         continue
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_service.py:227:27
    |
225 |                         await asyncio.sleep(delay)
226 |                         continue
227 |                     raise APIRateLimitError("–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ DeepSeek API")
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
228 |
229 |                 if response.status_code >= 500:
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_service.py:227:45
    |
225 |                         await asyncio.sleep(delay)
226 |                         continue
227 |                     raise APIRateLimitError("–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ DeepSeek API")
    |                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
228 |
229 |                 if response.status_code >= 500:
    |
help: Assign to variable; remove string literal

PLR2004 Magic value used in comparison, consider replacing `500` with a constant variable
   --> app\services\ai_service.py:229:44
    |
227 |                     raise APIRateLimitError("–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ DeepSeek API")
228 |
229 |                 if response.status_code >= 500:
    |                                            ^^^
230 |                     if attempt < self._max_retries - 1:
231 |                         delay = self._retry_delay * (attempt + 1)
    |

E501 Line too long (98 > 88)
   --> app\services\ai_service.py:233:88
    |
231 |                         delay = self._retry_delay * (attempt + 1)
232 |                         logger.warning(
233 |                             f"üîÑ –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ {response.status_code}. –ü–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ {delay}—Å...",
    |                                                                                         ^^^^^^^^^^
234 |                         )
235 |                         await asyncio.sleep(delay)
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_service.py:233:92
    |
231 |                         delay = self._retry_delay * (attempt + 1)
232 |                         logger.warning(
233 |                             f"üîÑ –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ {response.status_code}. –ü–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ {delay}—Å...",
    |                                                                                             ^
234 |                         )
235 |                         await asyncio.sleep(delay)
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_service.py:237:27
    |
235 |                           await asyncio.sleep(delay)
236 |                           continue
237 |                       raise APIConnectionError(
    |  ___________________________^
238 | |                         f"–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ DeepSeek: {response.status_code}",
239 | |                     )
    | |_____________________^
240 |
241 |                   raise APIConnectionError(
    |

EM102 Exception must not use an f-string literal, assign to variable first
   --> app\services\ai_service.py:238:25
    |
236 |                         continue
237 |                     raise APIConnectionError(
238 |                         f"–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ DeepSeek: {response.status_code}",
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
239 |                     )
    |
help: Assign to variable; remove f-string literal

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_service.py:241:23
    |
239 |                       )
240 |
241 |                   raise APIConnectionError(
    |  _______________________^
242 | |                     f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞: {response.status_code}",
243 | |                 )
    | |_________________^
244 |
245 |               except httpx.TimeoutException:
    |

EM102 Exception must not use an f-string literal, assign to variable first
   --> app\services\ai_service.py:242:21
    |
241 |                 raise APIConnectionError(
242 |                     f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞: {response.status_code}",
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
243 |                 )
    |
help: Assign to variable; remove f-string literal

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_service.py:248:77
    |
246 |                 if attempt < self._max_retries - 1:
247 |                     delay = self._retry_delay * (attempt + 1)
248 |                     logger.warning(f"‚è∞ Timeout –∑–∞–ø—Ä–æ—Å–∞. –ü–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ {delay}—Å...")
    |                                                                              ^
249 |                     await asyncio.sleep(delay)
250 |                     continue
    |

B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
   --> app\services\ai_service.py:251:17
    |
249 |                     await asyncio.sleep(delay)
250 |                     continue
251 |                 raise APIConnectionError("Timeout –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ DeepSeek API")
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
252 |
253 |             except httpx.ConnectError:
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_service.py:251:23
    |
249 |                     await asyncio.sleep(delay)
250 |                     continue
251 |                 raise APIConnectionError("Timeout –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ DeepSeek API")
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
252 |
253 |             except httpx.ConnectError:
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_service.py:251:42
    |
249 |                     await asyncio.sleep(delay)
250 |                     continue
251 |                 raise APIConnectionError("Timeout –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ DeepSeek API")
    |                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
252 |
253 |             except httpx.ConnectError:
    |
help: Assign to variable; remove string literal

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\services\ai_service.py:256:80
    |
254 |                 if attempt < self._max_retries - 1:
255 |                     delay = self._retry_delay * (attempt + 1)
256 |                     logger.warning(f"üåê –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è. –ü–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ {delay}—Å...")
    |                                                                                 ^
257 |                     await asyncio.sleep(delay)
258 |                     continue
    |

B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
   --> app\services\ai_service.py:259:17
    |
257 |                     await asyncio.sleep(delay)
258 |                     continue
259 |                 raise APIConnectionError("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ DeepSeek API")
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
260 |
261 |         raise APIConnectionError("–ò—Å—á–µ—Ä–ø–∞–Ω—ã –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API")
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_service.py:259:23
    |
257 |                     await asyncio.sleep(delay)
258 |                     continue
259 |                 raise APIConnectionError("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ DeepSeek API")
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
260 |
261 |         raise APIConnectionError("–ò—Å—á–µ—Ä–ø–∞–Ω—ã –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API")
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_service.py:259:42
    |
257 |                     await asyncio.sleep(delay)
258 |                     continue
259 |                 raise APIConnectionError("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ DeepSeek API")
    |                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
260 |
261 |         raise APIConnectionError("–ò—Å—á–µ—Ä–ø–∞–Ω—ã –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API")
    |
help: Assign to variable; remove string literal

RUF001 String contains ambiguous `–ù` (CYRILLIC CAPITAL LETTER EN). Did you mean `H` (LATIN CAPITAL LETTER H)?
   --> app\services\ai_service.py:259:43
    |
257 |                     await asyncio.sleep(delay)
258 |                     continue
259 |                 raise APIConnectionError("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ DeepSeek API")
    |                                           ^
260 |
261 |         raise APIConnectionError("–ò—Å—á–µ—Ä–ø–∞–Ω—ã –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API")
    |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
   --> app\services\ai_service.py:259:44
    |
257 |                     await asyncio.sleep(delay)
258 |                     continue
259 |                 raise APIConnectionError("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ DeepSeek API")
    |                                            ^
260 |
261 |         raise APIConnectionError("–ò—Å—á–µ—Ä–ø–∞–Ω—ã –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API")
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_service.py:261:15
    |
259 |                 raise APIConnectionError("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ DeepSeek API")
260 |
261 |         raise APIConnectionError("–ò—Å—á–µ—Ä–ø–∞–Ω—ã –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API")
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
262 |
263 |     async def generate_response(
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_service.py:261:34
    |
259 |                 raise APIConnectionError("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ DeepSeek API")
260 |
261 |         raise APIConnectionError("–ò—Å—á–µ—Ä–ø–∞–Ω—ã –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API")
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
262 |
263 |     async def generate_response(
    |
help: Assign to variable; remove string literal

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_service.py:283:19
    |
281 |         """
282 |         if not messages:
283 |             raise ValueError("–°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º")
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
284 |
285 |         # –ò—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω—ã
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_service.py:283:30
    |
281 |         """
282 |         if not messages:
283 |             raise ValueError("–°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º")
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
284 |
285 |         # –ò—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω—ã
    |
help: Assign to variable; remove string literal

PLR2004 Magic value used in comparison, consider replacing `2.0` with a constant variable
   --> app\services\ai_service.py:290:38
    |
289 |         # –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
290 |         if not 0.0 <= temperature <= 2.0:
    |                                      ^^^
291 |             raise ValueError("Temperature –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 0.0 –¥–æ 2.0")
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_service.py:291:19
    |
289 |         # –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
290 |         if not 0.0 <= temperature <= 2.0:
291 |             raise ValueError("Temperature –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 0.0 –¥–æ 2.0")
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
292 |
293 |         if not 1 <= max_tokens <= 4000:
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_service.py:291:30
    |
289 |         # –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
290 |         if not 0.0 <= temperature <= 2.0:
291 |             raise ValueError("Temperature –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 0.0 –¥–æ 2.0")
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
292 |
293 |         if not 1 <= max_tokens <= 4000:
    |
help: Assign to variable; remove string literal

PLR2004 Magic value used in comparison, consider replacing `4000` with a constant variable
   --> app\services\ai_service.py:293:35
    |
291 |             raise ValueError("Temperature –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 0.0 –¥–æ 2.0")
292 |
293 |         if not 1 <= max_tokens <= 4000:
    |                                   ^^^^
294 |             raise ValueError("max_tokens –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 1 –¥–æ 4000")
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_service.py:294:19
    |
293 |         if not 1 <= max_tokens <= 4000:
294 |             raise ValueError("max_tokens –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 1 –¥–æ 4000")
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
295 |
296 |         # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–µ—à
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_service.py:294:30
    |
293 |         if not 1 <= max_tokens <= 4000:
294 |             raise ValueError("max_tokens –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 1 –¥–æ 4000")
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
295 |
296 |         # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–µ—à
    |
help: Assign to variable; remove string literal

TRY301 Abstract `raise` to an inner function
   --> app\services\ai_service.py:320:17
    |
318 |             # –ò–∑–≤–ª–µ–∫–∞–µ–º –æ—Ç–≤–µ—Ç
319 |             if "choices" not in data or not data["choices"]:
320 |                 raise APIConnectionError("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç DeepSeek API")
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
321 |
322 |             choice = data["choices"][0]
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_service.py:320:23
    |
318 |             # –ò–∑–≤–ª–µ–∫–∞–µ–º –æ—Ç–≤–µ—Ç
319 |             if "choices" not in data or not data["choices"]:
320 |                 raise APIConnectionError("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç DeepSeek API")
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
321 |
322 |             choice = data["choices"][0]
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_service.py:320:42
    |
318 |             # –ò–∑–≤–ª–µ–∫–∞–µ–º –æ—Ç–≤–µ—Ç
319 |             if "choices" not in data or not data["choices"]:
320 |                 raise APIConnectionError("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç DeepSeek API")
    |                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
321 |
322 |             choice = data["choices"][0]
    |
help: Assign to variable; remove string literal

TRY301 Abstract `raise` to an inner function
   --> app\services\ai_service.py:326:17
    |
325 |             if not content:
326 |                 raise APIConnectionError("–ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç DeepSeek API")
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
327 |
328 |             # –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —Ç–æ–∫–µ–Ω—ã (–ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ)
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_service.py:326:23
    |
325 |             if not content:
326 |                 raise APIConnectionError("–ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç DeepSeek API")
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
327 |
328 |             # –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —Ç–æ–∫–µ–Ω—ã (–ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ)
    |

EM101 Exception must not use a string literal, assign to variable first
   --> app\services\ai_service.py:326:42
    |
325 |             if not content:
326 |                 raise APIConnectionError("–ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç DeepSeek API")
    |                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
327 |
328 |             # –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —Ç–æ–∫–µ–Ω—ã (–ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ)
    |
help: Assign to variable; remove string literal

E501 Line too long (89 > 88)
   --> app\services\ai_service.py:352:88
    |
351 |             logger.info(
352 |                 f"ü§ñ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –æ—Ç–≤–µ—Ç: {len(content)} —Å–∏–º–≤–æ–ª–æ–≤, {tokens_used} —Ç–æ–∫–µ–Ω–æ–≤",
    |                                                                                         ^
353 |             )
354 |             return ai_response
    |

TRY300 Consider moving this statement to an `else` block
   --> app\services\ai_service.py:354:13
    |
352 |                 f"ü§ñ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –æ—Ç–≤–µ—Ç: {len(content)} —Å–∏–º–≤–æ–ª–æ–≤, {tokens_used} —Ç–æ–∫–µ–Ω–æ–≤",
353 |             )
354 |             return ai_response
    |             ^^^^^^^^^^^^^^^^^^
355 |
356 |         except AIServiceError:
    |

B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
   --> app\services\ai_service.py:362:13
    |
360 |         except Exception as e:
361 |             logger.exception("üí• –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ AI")
362 |             raise AIServiceError(f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: {e!s}")
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
363 |
364 |     async def generate_simple_response(self, user_message: str) -> AIResponse:
    |

TRY003 Avoid specifying long messages outside the exception class
   --> app\services\ai_service.py:362:19
    |
360 |         except Exception as e:
361 |             logger.exception("üí• –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ AI")
362 |             raise AIServiceError(f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: {e!s}")
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
363 |
364 |     async def generate_simple_response(self, user_message: str) -> AIResponse:
    |

EM102 Exception must not use an f-string literal, assign to variable first
   --> app\services\ai_service.py:362:34
    |
360 |         except Exception as e:
361 |             logger.exception("üí• –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ AI")
362 |             raise AIServiceError(f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: {e!s}")
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
363 |
364 |     async def generate_simple_response(self, user_message: str) -> AIResponse:
    |
help: Assign to variable; remove f-string literal

E501 Line too long (96 > 88)
   --> app\services\ai_service.py:377:89
    |
375 | ‚Ä¶     ConversationMessage(
376 | ‚Ä¶         role="system",
377 | ‚Ä¶         content="–¢—ã - —ç–º–ø–∞—Ç–∏—á–Ω—ã–π AI-–ø–æ–º–æ—â–Ω–∏–∫. –û—Ç–≤–µ—á–∞–π –¥–æ–±—Ä–æ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–µ.",
    |                                                                                   ^^^^^^^^
378 | ‚Ä¶     ),
379 | ‚Ä¶     ConversationMessage(
    |

TRY300 Consider moving this statement to an `else` block
   --> app\services\ai_service.py:402:13
    |
400 |               response_time = asyncio.get_event_loop().time() - start_time
401 |
402 | /             return {
403 | |                 "status": "healthy",
404 | |                 "model": self.config.deepseek.deepseek_model,
405 | |                 "response_time": response_time,
406 | |                 "tokens_used": response.tokens_used,
407 | |                 "cache_enabled": True,
408 | |             }
    | |_____________^
409 |
410 |           except Exception as e:
    |

PLW0603 Using the global statement to update `_ai_service_instance` is discouraged
   --> app\services\ai_service.py:424:12
    |
422 | def get_ai_service() -> AIService:
423 |     """–ü–æ–ª—É—á–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ AI —Å–µ—Ä–≤–∏—Å–∞."""
424 |     global _ai_service_instance
    |            ^^^^^^^^^^^^^^^^^^^^
425 |
426 |     if _ai_service_instance is None:
    |

PLW0603 Using the global statement to update `_ai_service_instance` is discouraged
   --> app\services\ai_service.py:435:12
    |
433 | async def close_ai_service() -> None:
434 |     """–ó–∞–∫—Ä—ã—Ç–∏–µ AI —Å–µ—Ä–≤–∏—Å–∞."""
435 |     global _ai_service_instance
    |            ^^^^^^^^^^^^^^^^^^^^
436 |
437 |     if _ai_service_instance:
    |

RUF003 Comment contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
  --> app\utils\logging.py:44:28
   |
42 |         log_entry["extra"] = record["extra"]
43 |
44 |     # –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏—Å–∫–ª—é—á–µ–Ω–∏–∏ –µ—Å–ª–∏ –µ—Å—Ç—å
   |                            ^
45 |     if record["exception"]:
46 |         log_entry["exception"] = {
   |

RUF003 Comment contains ambiguous `–±` (CYRILLIC SMALL LETTER BE). Did you mean `6` (DIGIT SIX)?
  --> app\utils\logging.py:44:29
   |
42 |         log_entry["extra"] = record["extra"]
43 |
44 |     # –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏—Å–∫–ª—é—á–µ–Ω–∏–∏ –µ—Å–ª–∏ –µ—Å—Ç—å
   |                             ^
45 |     if record["exception"]:
46 |         log_entry["exception"] = {
   |

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> app\utils\logging.py:57:38
   |
55 | def console_formatter(record: dict[str, Any]) -> str:
56 |     """
57 |     –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤ –¥–ª—è –∫–æ–Ω—Å–æ–ª–∏ —Å —ç–º–æ–¥–∑–∏ –∏ —Ü–≤–µ—Ç–∞–º–∏.
   |                                      ^
58 |
59 |     Args:
   |

RUF001 String contains ambiguous `‚Ñπ` (INFORMATION SOURCE). Did you mean `i` (LATIN SMALL LETTER I)?
  --> app\utils\logging.py:69:18
   |
67 |         "TRACE": "üîç",
68 |         "DEBUG": "üêõ",
69 |         "INFO": "‚ÑπÔ∏è",
   |                  ^
70 |         "SUCCESS": "‚úÖ",
71 |         "WARNING": "‚ö†Ô∏è",
   |

E501 Line too long (91 > 88)
   --> app\utils\logging.py:209:88
    |
207 |     logger.debug(f"üìã –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥: {'–≤–∫–ª—é—á–µ–Ω' if enable_console else '–æ—Ç–∫–ª—é—á–µ–Ω'}")
208 |     logger.debug(
209 |         f"üåê –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤: {'–≤–∫–ª—é—á–µ–Ω–æ' if enable_request_logging else '–æ—Ç–∫–ª—é—á–µ–Ω–æ'}"
    |                                                                                         ^^^
210 |     )
    |

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> app\utils\logging.py:228:32
    |
226 | def log_function_call(func_name: str, **kwargs: Any) -> None:
227 |     """
228 |     –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.
    |                                ^
229 |
230 |     Args:
    |

E402 Module level import not at top of file
  --> clear_webhook.py:16:1
   |
14 | sys.path.insert(0, str(project_root))
15 |
16 | import httpx
   | ^^^^^^^^^^^^
17 | from loguru import logger
   |

E402 Module level import not at top of file
  --> clear_webhook.py:17:1
   |
16 | import httpx
17 | from loguru import logger
   | ^^^^^^^^^^^^^^^^^^^^^^^^^
18 |
19 | from app.config import get_config
   |

E402 Module level import not at top of file
  --> clear_webhook.py:19:1
   |
17 | from loguru import logger
18 |
19 | from app.config import get_config
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

PLR0912 Too many branches (14 > 12)
  --> clear_webhook.py:22:11
   |
22 | async def clear_webhook():
   |           ^^^^^^^^^^^^^
23 |     """–û—á–∏—Å—Ç–∫–∞ webhook –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤."""
24 |     logger.info("üîß –ù–∞—á–∏–Ω–∞–µ–º –æ—á–∏—Å—Ç–∫—É webhook...")
   |

ANN201 Missing return type annotation for public function `clear_webhook`
  --> clear_webhook.py:22:11
   |
22 | async def clear_webhook():
   |           ^^^^^^^^^^^^^
23 |     """–û—á–∏—Å—Ç–∫–∞ webhook –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤."""
24 |     logger.info("üîß –ù–∞—á–∏–Ω–∞–µ–º –æ—á–∏—Å—Ç–∫—É webhook...")
   |
help: Add return type annotation: `bool`

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> clear_webhook.py:34:34
   |
33 |         bot_token = config.telegram.bot_token
34 |         logger.info(f"ü§ñ –†–∞–±–æ—Ç–∞–µ–º —Å –±–æ—Ç–æ–º: ...{bot_token[-10:]}")
   |                                   ^
35 |
36 |         async with httpx.AsyncClient(timeout=30.0) as client:
   |

RUF003 Comment contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
  --> clear_webhook.py:37:43
   |
36 |         async with httpx.AsyncClient(timeout=30.0) as client:
37 |             # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ webhook
   |                                           ^
38 |             info_url = f"https://api.telegram.org/bot{bot_token}/getWebhookInfo"
39 |             logger.info("üìã –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º webhook...")
   |

RUF001 String contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
  --> clear_webhook.py:39:48
   |
37 |             # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ webhook
38 |             info_url = f"https://api.telegram.org/bot{bot_token}/getWebhookInfo"
39 |             logger.info("üìã –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º webhook...")
   |                                                 ^
40 |
41 |             info_response = await client.get(info_url)
   |

PLR2004 Magic value used in comparison, consider replacing `200` with a constant variable
  --> clear_webhook.py:42:45
   |
41 |             info_response = await client.get(info_url)
42 |             if info_response.status_code == 200:
   |                                             ^^^
43 |                 info_data = info_response.json()
44 |                 if info_data.get("ok"):
   |

PLR2004 Magic value used in comparison, consider replacing `200` with a constant variable
  --> clear_webhook.py:69:47
   |
67 |             )
68 |
69 |             if delete_response.status_code == 200:
   |                                               ^^^
70 |                 delete_data = delete_response.json()
71 |                 if delete_data.get("ok"):
   |

PLR2004 Magic value used in comparison, consider replacing `200` with a constant variable
  --> clear_webhook.py:76:54
   |
74 |                     # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
75 |                     check_response = await client.get(info_url)
76 |                     if check_response.status_code == 200:
   |                                                      ^^^
77 |                         check_data = check_response.json()
78 |                         if check_data.get("ok"):
   |

E501 Line too long (90 > 88)
  --> clear_webhook.py:88:88
   |
86 |             else:
87 |                 logger.error(
88 |                     f"‚ùå HTTP –æ—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ webhook: {delete_response.status_code}",
   |                                                                                         ^^
89 |                 )
   |

ANN201 Missing return type annotation for public function `wait_for_conflict_resolution`
   --> clear_webhook.py:99:11
    |
 99 | async def wait_for_conflict_resolution():
    |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
100 |     """–û–∂–∏–¥–∞–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞."""
101 |     logger.info("‚è≥ –ñ–¥–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ (30 —Å–µ–∫—É–Ω–¥)...")
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `main`
   --> clear_webhook.py:106:11
    |
106 | async def main():
    |           ^^^^
107 |     """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è."""
108 |     logger.add("webhook_clear.log", rotation="1 MB", retention="1 week")
    |
help: Add return type annotation: `None`

RUF001 String contains ambiguous `–ù` (CYRILLIC CAPITAL LETTER EN). Did you mean `H` (LATIN CAPITAL LETTER H)?
   --> clear_webhook.py:123:25
    |
121 |         logger.info("üí° –í—ã–ø–æ–ª–Ω–∏—Ç–µ: uv run python main.py")
122 |     else:
123 |         logger.error("üòû –ù–µ —É–¥–∞–ª–æ—Å—å –æ—á–∏—Å—Ç–∏—Ç—å webhook")
    |                          ^
124 |         logger.info("üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:")
125 |         logger.info("   1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –≤ .env")
    |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
   --> clear_webhook.py:123:26
    |
121 |         logger.info("üí° –í—ã–ø–æ–ª–Ω–∏—Ç–µ: uv run python main.py")
122 |     else:
123 |         logger.error("üòû –ù–µ —É–¥–∞–ª–æ—Å—å –æ—á–∏—Å—Ç–∏—Ç—å webhook")
    |                           ^
124 |         logger.info("üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:")
125 |         logger.info("   1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –≤ .env")
    |

E402 Module level import not at top of file
  --> force_stop_bot.py:18:1
   |
16 | sys.path.insert(0, str(project_root))
17 |
18 | import httpx
   | ^^^^^^^^^^^^
19 | from loguru import logger
   |

E402 Module level import not at top of file
  --> force_stop_bot.py:19:1
   |
18 | import httpx
19 | from loguru import logger
   | ^^^^^^^^^^^^^^^^^^^^^^^^^
20 |
21 | from app.config import get_config
   |

E402 Module level import not at top of file
  --> force_stop_bot.py:21:1
   |
19 | from loguru import logger
20 |
21 | from app.config import get_config
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

ANN201 Missing return type annotation for public function `kill_python_processes`
  --> force_stop_bot.py:24:5
   |
24 | def kill_python_processes():
   |     ^^^^^^^^^^^^^^^^^^^^^
25 |     """–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Python."""
26 |     logger.info("üî™ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Python...")
   |
help: Add return type annotation: `None`

S607 Starting a process with a partial executable path
  --> force_stop_bot.py:31:13
   |
29 |         # Windows –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Python
30 |         result = subprocess.run(
31 |             ["taskkill", "/F", "/IM", "python.exe"],
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
32 |             check=False,
33 |             capture_output=True,
   |

RUF001 String contains ambiguous `–í` (CYRILLIC CAPITAL LETTER VE). Did you mean `B` (LATIN CAPITAL LETTER B)?
  --> force_stop_bot.py:39:31
   |
38 |         if result.returncode == 0:
39 |             logger.success("‚úÖ –í—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã Python –∑–∞–≤–µ—Ä—à–µ–Ω—ã")
   |                                ^
40 |         else:
41 |             logger.warning(f"‚ö†Ô∏è –ö–æ–º–∞–Ω–¥–∞ taskkill –≤–µ—Ä–Ω—É–ª–∞ –∫–æ–¥: {result.returncode}")
   |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> force_stop_bot.py:39:32
   |
38 |         if result.returncode == 0:
39 |             logger.success("‚úÖ –í—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã Python –∑–∞–≤–µ—Ä—à–µ–Ω—ã")
   |                                 ^
40 |         else:
41 |             logger.warning(f"‚ö†Ô∏è –ö–æ–º–∞–Ω–¥–∞ taskkill –≤–µ—Ä–Ω—É–ª–∞ –∫–æ–¥: {result.returncode}")
   |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
  --> force_stop_bot.py:39:33
   |
38 |         if result.returncode == 0:
39 |             logger.success("‚úÖ –í—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã Python –∑–∞–≤–µ—Ä—à–µ–Ω—ã")
   |                                  ^
40 |         else:
41 |             logger.warning(f"‚ö†Ô∏è –ö–æ–º–∞–Ω–¥–∞ taskkill –≤–µ—Ä–Ω—É–ª–∞ –∫–æ–¥: {result.returncode}")
   |

ANN201 Missing return type annotation for public function `clear_webhook_completely`
  --> force_stop_bot.py:50:11
   |
50 | async def clear_webhook_completely():
   |           ^^^^^^^^^^^^^^^^^^^^^^^^
51 |     """–ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ webhook —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏."""
52 |     logger.info("üßπ –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ webhook...")
   |
help: Add return type annotation: `bool`

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> force_stop_bot.py:51:31
   |
50 | async def clear_webhook_completely():
51 |     """–ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ webhook —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏."""
   |                               ^
52 |     logger.info("üßπ –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ webhook...")
   |

PLR2004 Magic value used in comparison, consider replacing `200` with a constant variable
  --> force_stop_bot.py:78:48
   |
76 |                     )
77 |
78 |                     if response.status_code == 200:
   |                                                ^^^
79 |                         data = response.json()
80 |                         if data.get("ok"):
   |

PLR2004 Magic value used in comparison, consider replacing `2` with a constant variable
  --> force_stop_bot.py:91:30
   |
90 |                 # –ü–∞—É–∑–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏
91 |                 if attempt < 2:
   |                              ^
92 |                     await asyncio.sleep(2)
   |

PLR2004 Magic value used in comparison, consider replacing `200` with a constant variable
   --> force_stop_bot.py:99:49
    |
 97 |                 info_response = await client.get(info_url)
 98 |
 99 |                 if info_response.status_code == 200:
    |                                                 ^^^
100 |                     info_data = info_response.json()
101 |                     if info_data.get("ok"):
    |

RUF001 String contains ambiguous `–ù` (CYRILLIC CAPITAL LETTER EN). Did you mean `H` (LATIN CAPITAL LETTER H)?
   --> force_stop_bot.py:116:37
    |
115 |             except Exception as e:
116 |                 logger.warning(f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å webhook: {e}")
    |                                    ^
117 |
118 |     except Exception as e:
    |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
   --> force_stop_bot.py:116:38
    |
115 |             except Exception as e:
116 |                 logger.warning(f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å webhook: {e}")
    |                                     ^
117 |
118 |     except Exception as e:
    |

ANN201 Missing return type annotation for public function `wait_for_system_stabilization`
   --> force_stop_bot.py:124:5
    |
124 | def wait_for_system_stabilization():
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
125 |     """–û–∂–∏–¥–∞–Ω–∏–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã."""
126 |     logger.info("‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã (60 —Å–µ–∫—É–Ω–¥)...")
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_bot_readiness`
   --> force_stop_bot.py:135:11
    |
135 | async def test_bot_readiness():
    |           ^^^^^^^^^^^^^^^^^^
136 |     """–¢–µ—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞ –∫ –∑–∞–ø—É—Å–∫—É."""
137 |     logger.info("üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞...")
    |
help: Add return type annotation: `bool`

PLR2004 Magic value used in comparison, consider replacing `200` with a constant variable
   --> force_stop_bot.py:153:40
    |
151 |             response = await client.get(me_url)
152 |
153 |             if response.status_code == 200:
    |                                        ^^^
154 |                 data = response.json()
155 |                 if data.get("ok"):
    |

ANN201 Missing return type annotation for public function `main`
   --> force_stop_bot.py:170:11
    |
170 | async def main():
    |           ^^^^
171 |     """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏."""
172 |     logger.add("force_stop.log", rotation="1 MB", retention="1 week")
    |
help: Add return type annotation: `None`

RUF001 String contains ambiguous `–û` (CYRILLIC CAPITAL LETTER O). Did you mean `O` (LATIN CAPITAL LETTER O)?
   --> force_stop_bot.py:174:35
    |
172 |     logger.add("force_stop.log", rotation="1 MB", retention="1 week")
173 |
174 |     logger.info("üõë –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–ê–Ø –û–°–¢–ê–ù–û–í–ö–ê –ë–û–¢–ê")
    |                                    ^
175 |     logger.info("=" * 60)
    |

RUF001 String contains ambiguous `–°` (CYRILLIC CAPITAL LETTER ES). Did you mean `C` (LATIN CAPITAL LETTER C)?
   --> force_stop_bot.py:174:36
    |
172 |     logger.add("force_stop.log", rotation="1 MB", retention="1 week")
173 |
174 |     logger.info("üõë –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–ê–Ø –û–°–¢–ê–ù–û–í–ö–ê –ë–û–¢–ê")
    |                                     ^
175 |     logger.info("=" * 60)
    |

RUF001 String contains ambiguous `–¢` (CYRILLIC CAPITAL LETTER TE). Did you mean `T` (LATIN CAPITAL LETTER T)?
   --> force_stop_bot.py:174:37
    |
172 |     logger.add("force_stop.log", rotation="1 MB", retention="1 week")
173 |
174 |     logger.info("üõë –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–ê–Ø –û–°–¢–ê–ù–û–í–ö–ê –ë–û–¢–ê")
    |                                      ^
175 |     logger.info("=" * 60)
    |

RUF001 String contains ambiguous `–ê` (CYRILLIC CAPITAL LETTER A). Did you mean `A` (LATIN CAPITAL LETTER A)?
   --> force_stop_bot.py:174:38
    |
172 |     logger.add("force_stop.log", rotation="1 MB", retention="1 week")
173 |
174 |     logger.info("üõë –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–ê–Ø –û–°–¢–ê–ù–û–í–ö–ê –ë–û–¢–ê")
    |                                       ^
175 |     logger.info("=" * 60)
    |

RUF001 String contains ambiguous `–ù` (CYRILLIC CAPITAL LETTER EN). Did you mean `H` (LATIN CAPITAL LETTER H)?
   --> force_stop_bot.py:174:39
    |
172 |     logger.add("force_stop.log", rotation="1 MB", retention="1 week")
173 |
174 |     logger.info("üõë –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–ê–Ø –û–°–¢–ê–ù–û–í–ö–ê –ë–û–¢–ê")
    |                                        ^
175 |     logger.info("=" * 60)
    |

RUF001 String contains ambiguous `–û` (CYRILLIC CAPITAL LETTER O). Did you mean `O` (LATIN CAPITAL LETTER O)?
   --> force_stop_bot.py:174:40
    |
172 |     logger.add("force_stop.log", rotation="1 MB", retention="1 week")
173 |
174 |     logger.info("üõë –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–ê–Ø –û–°–¢–ê–ù–û–í–ö–ê –ë–û–¢–ê")
    |                                         ^
175 |     logger.info("=" * 60)
    |

RUF001 String contains ambiguous `–í` (CYRILLIC CAPITAL LETTER VE). Did you mean `B` (LATIN CAPITAL LETTER B)?
   --> force_stop_bot.py:174:41
    |
172 |     logger.add("force_stop.log", rotation="1 MB", retention="1 week")
173 |
174 |     logger.info("üõë –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–ê–Ø –û–°–¢–ê–ù–û–í–ö–ê –ë–û–¢–ê")
    |                                          ^
175 |     logger.info("=" * 60)
    |

RUF001 String contains ambiguous `–ö` (CYRILLIC CAPITAL LETTER KA). Did you mean `K` (LATIN CAPITAL LETTER K)?
   --> force_stop_bot.py:174:42
    |
172 |     logger.add("force_stop.log", rotation="1 MB", retention="1 week")
173 |
174 |     logger.info("üõë –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–ê–Ø –û–°–¢–ê–ù–û–í–ö–ê –ë–û–¢–ê")
    |                                           ^
175 |     logger.info("=" * 60)
    |

RUF001 String contains ambiguous `–ê` (CYRILLIC CAPITAL LETTER A). Did you mean `A` (LATIN CAPITAL LETTER A)?
   --> force_stop_bot.py:174:43
    |
172 |     logger.add("force_stop.log", rotation="1 MB", retention="1 week")
173 |
174 |     logger.info("üõë –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–ê–Ø –û–°–¢–ê–ù–û–í–ö–ê –ë–û–¢–ê")
    |                                            ^
175 |     logger.info("=" * 60)
    |

RUF001 String contains ambiguous `–ù` (CYRILLIC CAPITAL LETTER EN). Did you mean `H` (LATIN CAPITAL LETTER H)?
   --> force_stop_bot.py:206:25
    |
204 |         logger.info("   uv run python main.py")
205 |     else:
206 |         logger.error("üòû –ù–µ –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã")
    |                          ^
207 |         logger.info("üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:")
208 |         if not webhook_cleared:
    |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
   --> force_stop_bot.py:206:26
    |
204 |         logger.info("   uv run python main.py")
205 |     else:
206 |         logger.error("üòû –ù–µ –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã")
    |                           ^
207 |         logger.info("üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:")
208 |         if not webhook_cleared:
    |

ANN204 Missing return type annotation for special method `__init__`
  --> main.py:31:9
   |
29 |     """–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å Telegram –±–æ—Ç–∞ AI-–ö–æ–º–ø–∞–Ω—å–æ–Ω."""
30 |
31 |     def __init__(self):
   |         ^^^^^^^^
32 |         self.config = get_config()
33 |         self.bot: Bot | None = None
   |
help: Add return type annotation: `None`

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> main.py:38:37
   |
37 |     def create_bot(self) -> Bot:
38 |         """–°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –±–æ—Ç–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏."""
   |                                     ^
39 |         return Bot(
40 |             token=self.config.telegram.bot_token
   |

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> main.py:50:32
   |
49 |     def create_dispatcher(self) -> Dispatcher:
50 |         """–°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ —Å middleware –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏."""
   |                                ^
51 |         dp = Dispatcher()
   |

ERA001 Found commented-out code
  --> main.py:54:9
   |
53 |         # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è middleware –±—É–¥–µ—Ç –∑–¥–µ—Å—å
54 |         # self.register_middleware(dp)
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
55 |
56 |         # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
   |
help: Remove commented-out code

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> main.py:74:70
   |
73 |         commands = [
74 |             BotCommand(command="start", description="üöÄ –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º"),
   |                                                                       ^
75 |             BotCommand(command="help", description="‚ùì –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º"),
76 |             BotCommand(command="profile", description="üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å"),
   |

RUF003 Comment contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
  --> main.py:97:36
   |
95 |             self.dp = self.create_dispatcher()
96 |
97 |             # –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–æ—Ç–µ
   |                                    ^
98 |             bot_info = await self.bot.get_me()
99 |             logger.info(f"ü§ñ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω: @{bot_info.username} ({bot_info.full_name})")
   |

RUF003 Comment contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> main.py:115:36
    |
114 |         try:
115 |             # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ —Å —Ç–∞–π–º–∞—É—Ç–æ–º
    |                                    ^
116 |             if self.dp:
117 |                 try:
    |

RUF003 Comment contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> main.py:123:36
    |
121 |                     logger.warning("‚ö†Ô∏è –¢–∞–π–º–∞—É—Ç –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ polling")
122 |
123 |             # –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–µ—Å—Å–∏–∏ –±–æ—Ç–∞ —Å —Ç–∞–π–º–∞—É—Ç–æ–º
    |                                    ^
124 |             if self.bot:
125 |                 try:
    |

RUF003 Comment contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> main.py:131:41
    |
129 |                     logger.warning("‚ö†Ô∏è –¢–∞–π–º–∞—É—Ç –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–µ—Å—Å–∏–∏ –±–æ—Ç–∞")
130 |
131 |             # –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î —Å —Ç–∞–π–º–∞—É—Ç–æ–º
    |                                         ^
132 |             try:
133 |                 await asyncio.wait_for(close_db(), timeout=5.0)
    |

RUF003 Comment contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> main.py:138:37
    |
136 |                 logger.warning("‚ö†Ô∏è –¢–∞–π–º–∞—É—Ç –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ë–î")
137 |
138 |             # –ó–∞–∫—Ä—ã—Ç–∏–µ AI –º–µ–Ω–µ–¥–∂–µ—Ä–∞ —Å —Ç–∞–π–º–∞—É—Ç–æ–º
    |                                     ^
139 |             try:
140 |                 await asyncio.wait_for(close_ai_manager(), timeout=5.0)
    |

ANN202 Missing return type annotation for private function `_signal_handler`
   --> main.py:160:9
    |
158 |             signal.signal(signal.SIGINT, self._signal_handler)
159 |
160 |     def _signal_handler(self, signum, frame):
    |         ^^^^^^^^^^^^^^^
161 |         """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∏–≥–Ω–∞–ª–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è."""
162 |         logger.info(f"üì° –ü–æ–ª—É—á–µ–Ω —Å–∏–≥–Ω–∞–ª {signum}, –∏–Ω–∏—Ü–∏–∏—Ä—É—é –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã...")
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `signum`
   --> main.py:160:31
    |
158 |             signal.signal(signal.SIGINT, self._signal_handler)
159 |
160 |     def _signal_handler(self, signum, frame):
    |                               ^^^^^^
161 |         """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∏–≥–Ω–∞–ª–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è."""
162 |         logger.info(f"üì° –ü–æ–ª—É—á–µ–Ω —Å–∏–≥–Ω–∞–ª {signum}, –∏–Ω–∏—Ü–∏–∏—Ä—É—é –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã...")
    |

ANN001 Missing type annotation for function argument `frame`
   --> main.py:160:39
    |
158 |             signal.signal(signal.SIGINT, self._signal_handler)
159 |
160 |     def _signal_handler(self, signum, frame):
    |                                       ^^^^^
161 |         """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∏–≥–Ω–∞–ª–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è."""
162 |         logger.info(f"üì° –ü–æ–ª—É—á–µ–Ω —Å–∏–≥–Ω–∞–ª {signum}, –∏–Ω–∏—Ü–∏–∏—Ä—É—é –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã...")
    |

ARG002 Unused method argument: `frame`
   --> main.py:160:39
    |
158 |             signal.signal(signal.SIGINT, self._signal_handler)
159 |
160 |     def _signal_handler(self, signum, frame):
    |                                       ^^^^^
161 |         """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∏–≥–Ω–∞–ª–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è."""
162 |         logger.info(f"üì° –ü–æ–ª—É—á–µ–Ω —Å–∏–≥–Ω–∞–ª {signum}, –∏–Ω–∏—Ü–∏–∏—Ä—É—é –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã...")
    |

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> main.py:166:41
    |
165 |     async def run_polling(self) -> None:
166 |         """–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ polling —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π graceful shutdown."""
    |                                         ^
167 |         if not self.dp or not self.bot:
168 |             raise RuntimeError("–ë–æ—Ç –∏–ª–∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã")
    |

TRY003 Avoid specifying long messages outside the exception class
   --> main.py:168:19
    |
166 |         """–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ polling —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π graceful shutdown."""
167 |         if not self.dp or not self.bot:
168 |             raise RuntimeError("–ë–æ—Ç –∏–ª–∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã")
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
169 |
170 |         logger.info("üì° –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ polling...")
    |

EM101 Exception must not use a string literal, assign to variable first
   --> main.py:168:32
    |
166 |         """–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ polling —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π graceful shutdown."""
167 |         if not self.dp or not self.bot:
168 |             raise RuntimeError("–ë–æ—Ç –∏–ª–∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã")
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
169 |
170 |         logger.info("üì° –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ polling...")
    |
help: Assign to variable; remove string literal

SIM105 Use `contextlib.suppress(asyncio.CancelledError)` instead of `try`-`except`-`pass`
   --> main.py:194:17
    |
192 |               for task in pending:
193 |                   task.cancel()
194 | /                 try:
195 | |                     await task
196 | |                 except asyncio.CancelledError:
197 | |                     pass
    | |________________________^
198 |
199 |               # –ï—Å–ª–∏ polling –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π, –ø—Ä–æ–≤–µ—Ä–∏–º —ç—Ç–æ
    |
help: Replace with `contextlib.suppress(asyncio.CancelledError)`

RUF003 Comment contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> main.py:199:39
    |
197 |                     pass
198 |
199 |             # –ï—Å–ª–∏ polling –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π, –ø—Ä–æ–≤–µ—Ä–∏–º —ç—Ç–æ
    |                                       ^
200 |             if polling_task in done:
201 |                 try:
    |

TRY003 Avoid specifying long messages outside the exception class
   --> main.py:214:19
    |
212 |         """–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ webhook (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)."""
213 |         if not self.config.telegram or not self.config.telegram.webhook_url:
214 |             raise ValueError("WEBHOOK_URL –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —Ä–µ–∂–∏–º–∞ webhook")
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
215 |
216 |         if not self.bot or not self.dp:
    |

EM101 Exception must not use a string literal, assign to variable first
   --> main.py:214:30
    |
212 |         """–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ webhook (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)."""
213 |         if not self.config.telegram or not self.config.telegram.webhook_url:
214 |             raise ValueError("WEBHOOK_URL –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —Ä–µ–∂–∏–º–∞ webhook")
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
215 |
216 |         if not self.bot or not self.dp:
    |
help: Assign to variable; remove string literal

TRY003 Avoid specifying long messages outside the exception class
   --> main.py:217:19
    |
216 |         if not self.bot or not self.dp:
217 |             raise RuntimeError("–ë–æ—Ç –∏–ª–∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã")
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
218 |
219 |         logger.info(f"üåê –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ webhook: {self.config.telegram.webhook_url}")
    |

EM101 Exception must not use a string literal, assign to variable first
   --> main.py:217:32
    |
216 |         if not self.bot or not self.dp:
217 |             raise RuntimeError("–ë–æ—Ç –∏–ª–∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã")
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
218 |
219 |         logger.info(f"üåê –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ webhook: {self.config.telegram.webhook_url}")
    |
help: Assign to variable; remove string literal

RUF003 Comment contains ambiguous `–í` (CYRILLIC CAPITAL LETTER VE). Did you mean `B` (LATIN CAPITAL LETTER B)?
   --> main.py:245:19
    |
243 |             else:
244 |                 await self.run_webhook()
245 |                 # –í —Ä–µ–∂–∏–º–µ webhook –Ω—É–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã–º
    |                   ^
246 |                 await self._shutdown_event.wait()
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> main.py:251:49
    |
250 |         except KeyboardInterrupt:
251 |             logger.info("‚å®Ô∏è –ü–æ–ª—É—á–µ–Ω–æ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã")
    |                                                ^
252 |         except Exception as e:
253 |             logger.error(f"üí• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: {e}")
    |

SIM105 Use `contextlib.suppress(Exception)` instead of `try`-`except`-`pass`
   --> main.py:291:13
    |
289 |           logger.error(f"üí• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ: {e}")
290 |           if bot_app:
291 | /             try:
292 | |                 await bot_app.shutdown()
293 | |             except Exception:
294 | |                 pass
    | |____________________^
295 |           sys.exit(1)
296 |       finally:
    |
help: Replace with `contextlib.suppress(Exception)`

S110 `try`-`except`-`pass` detected, consider logging the exception
   --> main.py:293:13
    |
291 |               try:
292 |                   await bot_app.shutdown()
293 | /             except Exception:
294 | |                 pass
    | |____________________^
295 |           sys.exit(1)
296 |       finally:
    |

T201 `print` found
   --> main.py:309:9
    |
307 |         asyncio.run(main())
308 |     except KeyboardInterrupt:
309 |         print("\nüëã –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–æ Ctrl+C")
    |         ^^^^^
310 |     except Exception as e:
311 |         print(f"\nüí• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: {e}")
    |
help: Remove `print`

T201 `print` found
   --> main.py:311:9
    |
309 |         print("\nüëã –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–æ Ctrl+C")
310 |     except Exception as e:
311 |         print(f"\nüí• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: {e}")
    |         ^^^^^
312 |         sys.exit(1)
    |
help: Remove `print`

E402 Module level import not at top of file
  --> scripts\checks\test_config_simple.py:16:1
   |
14 | sys.path.insert(0, str(project_root))
15 |
16 | from loguru import logger
   | ^^^^^^^^^^^^^^^^^^^^^^^^^
   |

ANN201 Missing return type annotation for public function `test_env_file`
  --> scripts\checks\test_config_simple.py:19:5
   |
19 | def test_env_file():
   |     ^^^^^^^^^^^^^
20 |     """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–ª–∏—á–∏—è –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ .env —Ñ–∞–π–ª–∞."""
21 |     env_path = Path(".env")
   |
help: Add return type annotation: `bool`

PTH123 `open()` should be replaced by `Path.open()`
  --> scripts\checks\test_config_simple.py:30:10
   |
29 |     # –ß–∏—Ç–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
30 |     with open(env_path, encoding="utf-8") as f:
   |          ^^^^
31 |         content = f.read()
   |

ANN201 Missing return type annotation for public function `test_basic_config`
  --> scripts\checks\test_config_simple.py:56:5
   |
56 | def test_basic_config():
   |     ^^^^^^^^^^^^^^^^^
57 |     """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏."""
58 |     try:
   |
help: Add return type annotation: `bool | None`

PLC0415 `import` should be at the top-level of a file
  --> scripts\checks\test_config_simple.py:59:9
   |
57 |     """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏."""
58 |     try:
59 |         from app.config import DatabaseConfig, TelegramConfig
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
60 |
61 |         # –¢–µ—Å—Ç–∏—Ä—É–µ–º DatabaseConfig
   |

TRY300 Consider moving this statement to an `else` block
  --> scripts\checks\test_config_simple.py:71:9
   |
69 |         logger.info(f"‚úÖ Bot token: {tg_config.bot_token[:10]}...")
70 |
71 |         return True
   |         ^^^^^^^^^^^
72 |
73 |     except Exception as e:
   |

ANN201 Missing return type annotation for public function `main`
  --> scripts\checks\test_config_simple.py:78:5
   |
78 | def main():
   |     ^^^^
79 |     """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è."""
80 |     logger.remove()
   |
help: Add return type annotation: `None`

E501 Line too long (102 > 88)
  --> scripts\checks\test_config_simple.py:83:89
   |
81 |     logger.add(
82 |         sys.stdout,
83 |         format="<green>{time:HH:mm:ss}</green> | <level>{level: <8}</level> | <cyan>{message}</cyan>",
   |                                                                                         ^^^^^^^^^^^^^^
84 |         level="INFO",
85 |     )
   |

RUF001 String contains ambiguous `–í` (CYRILLIC CAPITAL LETTER VE). Did you mean `B` (LATIN CAPITAL LETTER B)?
   --> scripts\checks\test_config_simple.py:103:27
    |
102 |     if config_ok:
103 |         logger.success("üéâ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã!")
    |                            ^
104 |     else:
105 |         logger.error("üíî –¢–µ—Å—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–ª–µ–Ω")
    |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> scripts\checks\test_config_simple.py:103:28
    |
102 |     if config_ok:
103 |         logger.success("üéâ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã!")
    |                             ^
104 |     else:
105 |         logger.error("üíî –¢–µ—Å—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–ª–µ–Ω")
    |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
   --> scripts\checks\test_config_simple.py:103:29
    |
102 |     if config_ok:
103 |         logger.success("üéâ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã!")
    |                              ^
104 |     else:
105 |         logger.error("üíî –¢–µ—Å—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–ª–µ–Ω")
    |

E402 Module level import not at top of file
  --> scripts\checks\test_db_connection.py:17:1
   |
15 | sys.path.insert(0, str(project_root))
16 |
17 | from loguru import logger
   | ^^^^^^^^^^^^^^^^^^^^^^^^^
18 |
19 | from app.config import get_config
   |

E402 Module level import not at top of file
  --> scripts\checks\test_db_connection.py:19:1
   |
17 | from loguru import logger
18 |
19 | from app.config import get_config
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
20 | from app.database import check_connection, close_db, init_db
   |

E402 Module level import not at top of file
  --> scripts\checks\test_db_connection.py:20:1
   |
19 | from app.config import get_config
20 | from app.database import check_connection, close_db, init_db
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E501 Line too long (129 > 88)
  --> scripts\checks\test_db_connection.py:32:88
   |
30 | ‚Ä¶     logger.info("‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ")
31 | ‚Ä¶     logger.info(
32 | ‚Ä¶         f"üìä DATABASE_URL: {config.database.database_url.split('@')[1] if '@' in config.database.database_url else '—Å–∫—Ä—ã—Ç'}",
   |                                                                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
33 | ‚Ä¶     )
   |

PLC0415 `import` should be at the top-level of a file
  --> scripts\checks\test_db_connection.py:65:9
   |
64 |     try:
65 |         from app.models import Base, Conversation, User
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
66 |         from app.models.conversation import ConversationCreate, MessageRole
67 |         from app.models.user import UserCreate, UserResponse
   |

F401 `app.models.Conversation` imported but unused; consider using `importlib.util.find_spec` to test for availability
  --> scripts\checks\test_db_connection.py:65:38
   |
64 |     try:
65 |         from app.models import Base, Conversation, User
   |                                      ^^^^^^^^^^^^
66 |         from app.models.conversation import ConversationCreate, MessageRole
67 |         from app.models.user import UserCreate, UserResponse
   |
help: Remove unused import

F401 `app.models.User` imported but unused; consider using `importlib.util.find_spec` to test for availability
  --> scripts\checks\test_db_connection.py:65:52
   |
64 |     try:
65 |         from app.models import Base, Conversation, User
   |                                                    ^^^^
66 |         from app.models.conversation import ConversationCreate, MessageRole
67 |         from app.models.user import UserCreate, UserResponse
   |
help: Remove unused import

PLC0415 `import` should be at the top-level of a file
  --> scripts\checks\test_db_connection.py:66:9
   |
64 |     try:
65 |         from app.models import Base, Conversation, User
66 |         from app.models.conversation import ConversationCreate, MessageRole
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
67 |         from app.models.user import UserCreate, UserResponse
   |

F401 `app.models.conversation.ConversationCreate` imported but unused; consider using `importlib.util.find_spec` to test for availability
  --> scripts\checks\test_db_connection.py:66:45
   |
64 |     try:
65 |         from app.models import Base, Conversation, User
66 |         from app.models.conversation import ConversationCreate, MessageRole
   |                                             ^^^^^^^^^^^^^^^^^^
67 |         from app.models.user import UserCreate, UserResponse
   |
help: Remove unused import

F401 `app.models.conversation.MessageRole` imported but unused; consider using `importlib.util.find_spec` to test for availability
  --> scripts\checks\test_db_connection.py:66:65
   |
64 |     try:
65 |         from app.models import Base, Conversation, User
66 |         from app.models.conversation import ConversationCreate, MessageRole
   |                                                                 ^^^^^^^^^^^
67 |         from app.models.user import UserCreate, UserResponse
   |
help: Remove unused import

PLC0415 `import` should be at the top-level of a file
  --> scripts\checks\test_db_connection.py:67:9
   |
65 |         from app.models import Base, Conversation, User
66 |         from app.models.conversation import ConversationCreate, MessageRole
67 |         from app.models.user import UserCreate, UserResponse
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
68 |
69 |         logger.info("‚úÖ –í—Å–µ –º–æ–¥–µ–ª–∏ —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã")
   |

F401 `app.models.user.UserCreate` imported but unused; consider using `importlib.util.find_spec` to test for availability
  --> scripts\checks\test_db_connection.py:67:37
   |
65 |         from app.models import Base, Conversation, User
66 |         from app.models.conversation import ConversationCreate, MessageRole
67 |         from app.models.user import UserCreate, UserResponse
   |                                     ^^^^^^^^^^
68 |
69 |         logger.info("‚úÖ –í—Å–µ –º–æ–¥–µ–ª–∏ —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã")
   |
help: Remove unused import

F401 `app.models.user.UserResponse` imported but unused; consider using `importlib.util.find_spec` to test for availability
  --> scripts\checks\test_db_connection.py:67:49
   |
65 |         from app.models import Base, Conversation, User
66 |         from app.models.conversation import ConversationCreate, MessageRole
67 |         from app.models.user import UserCreate, UserResponse
   |                                                 ^^^^^^^^^^^^
68 |
69 |         logger.info("‚úÖ –í—Å–µ –º–æ–¥–µ–ª–∏ —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã")
   |
help: Remove unused import

RUF001 String contains ambiguous `–í` (CYRILLIC CAPITAL LETTER VE). Did you mean `B` (LATIN CAPITAL LETTER B)?
  --> scripts\checks\test_db_connection.py:69:24
   |
67 |         from app.models.user import UserCreate, UserResponse
68 |
69 |         logger.info("‚úÖ –í—Å–µ –º–æ–¥–µ–ª–∏ —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã")
   |                         ^
70 |         logger.info("üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏: User, Conversation")
71 |         logger.info(f"üîß –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å: {Base}")
   |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> scripts\checks\test_db_connection.py:69:25
   |
67 |         from app.models.user import UserCreate, UserResponse
68 |
69 |         logger.info("‚úÖ –í—Å–µ –º–æ–¥–µ–ª–∏ —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã")
   |                          ^
70 |         logger.info("üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏: User, Conversation")
71 |         logger.info(f"üîß –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å: {Base}")
   |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
  --> scripts\checks\test_db_connection.py:69:26
   |
67 |         from app.models.user import UserCreate, UserResponse
68 |
69 |         logger.info("‚úÖ –í—Å–µ –º–æ–¥–µ–ª–∏ —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã")
   |                           ^
70 |         logger.info("üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏: User, Conversation")
71 |         logger.info(f"üîß –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å: {Base}")
   |

RUF001 String contains ambiguous `–í` (CYRILLIC CAPITAL LETTER VE). Did you mean `B` (LATIN CAPITAL LETTER B)?
  --> scripts\checks\test_db_connection.py:94:31
   |
93 |         if db_ok:
94 |             logger.success("üéØ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!")
   |                                ^
95 |             logger.info("‚ú® –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é")
96 |         else:
   |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> scripts\checks\test_db_connection.py:94:32
   |
93 |         if db_ok:
94 |             logger.success("üéØ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!")
   |                                 ^
95 |             logger.info("‚ú® –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é")
96 |         else:
   |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
  --> scripts\checks\test_db_connection.py:94:33
   |
93 |         if db_ok:
94 |             logger.success("üéØ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!")
   |                                  ^
95 |             logger.info("‚ú® –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é")
96 |         else:
   |

E501 Line too long (102 > 88)
   --> scripts\checks\test_db_connection.py:109:89
    |
107 |     logger.add(
108 |         sys.stdout,
109 |         format="<green>{time:HH:mm:ss}</green> | <level>{level: <8}</level> | <cyan>{message}</cyan>",
    |                                                                                         ^^^^^^^^^^^^^^
110 |         level="INFO",
111 |     )
    |

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
 --> scripts\checks\test_openrouter_integration.py:4:55
  |
2 | """
3 | @file: test_openrouter_integration.py
4 | @description: –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å OpenRouter API
  |                                                       ^
5 | @created: 2025-09-20
6 | """
  |

E402 Module level import not at top of file
  --> scripts\checks\test_openrouter_integration.py:16:1
   |
14 | sys.path.insert(0, str(project_root))
15 |
16 | from loguru import logger
   | ^^^^^^^^^^^^^^^^^^^^^^^^^
17 |
18 | from app.services.ai_manager import ConversationMessage, get_ai_manager
   |

E402 Module level import not at top of file
  --> scripts\checks\test_openrouter_integration.py:18:1
   |
16 | from loguru import logger
17 |
18 | from app.services.ai_manager import ConversationMessage, get_ai_manager
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

ANN201 Missing return type annotation for public function `test_openrouter_integration`
  --> scripts\checks\test_openrouter_integration.py:21:11
   |
21 | async def test_openrouter_integration():
   |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
22 |     """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å OpenRouter."""
23 |     logger.info("üöÄ –ù–∞—á–∏–Ω–∞–µ–º —Ç–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å OpenRouter...")
   |
help: Add return type annotation: `bool | None`

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> scripts\checks\test_openrouter_integration.py:22:32
   |
21 | async def test_openrouter_integration():
22 |     """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å OpenRouter."""
   |                                ^
23 |     logger.info("üöÄ –ù–∞—á–∏–Ω–∞–µ–º —Ç–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å OpenRouter...")
   |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> scripts\checks\test_openrouter_integration.py:23:45
   |
21 | async def test_openrouter_integration():
22 |     """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å OpenRouter."""
23 |     logger.info("üöÄ –ù–∞—á–∏–Ω–∞–µ–º —Ç–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å OpenRouter...")
   |                                              ^
24 |
25 |     try:
   |

RUF001 String contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
  --> scripts\checks\test_openrouter_integration.py:55:57
   |
53 |                 ConversationMessage(
54 |                     role="user",
55 |                     content="–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞? –†–∞—Å—Å–∫–∞–∂–∏ –æ —Å–µ–±–µ –≤ 2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö.",
   |                                                         ^
56 |                 ),
57 |             ]
   |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> scripts\checks\test_openrouter_integration.py:55:59
   |
53 |                 ConversationMessage(
54 |                     role="user",
55 |                     content="–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞? –†–∞—Å—Å–∫–∞–∂–∏ –æ —Å–µ–±–µ –≤ 2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö.",
   |                                                           ^
56 |                 ),
57 |             ]
   |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
  --> scripts\checks\test_openrouter_integration.py:55:60
   |
53 |                 ConversationMessage(
54 |                     role="user",
55 |                     content="–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞? –†–∞—Å—Å–∫–∞–∂–∏ –æ —Å–µ–±–µ –≤ 2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö.",
   |                                                            ^
56 |                 ),
57 |             ]
   |

RUF001 String contains ambiguous `–±` (CYRILLIC SMALL LETTER BE). Did you mean `6` (DIGIT SIX)?
  --> scripts\checks\test_openrouter_integration.py:55:61
   |
53 |                 ConversationMessage(
54 |                     role="user",
55 |                     content="–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞? –†–∞—Å—Å–∫–∞–∂–∏ –æ —Å–µ–±–µ –≤ 2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö.",
   |                                                             ^
56 |                 ),
57 |             ]
   |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
  --> scripts\checks\test_openrouter_integration.py:55:62
   |
53 |                 ConversationMessage(
54 |                     role="user",
55 |                     content="–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞? –†–∞—Å—Å–∫–∞–∂–∏ –æ —Å–µ–±–µ –≤ 2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö.",
   |                                                              ^
56 |                 ),
57 |             ]
   |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> scripts\checks\test_openrouter_integration.py:71:76
   |
69 |                 logger.info(f"üìä –ú–æ–¥–µ–ª—å: {response.model}")
70 |                 logger.info(f"üîó –ü—Ä–æ–≤–∞–π–¥–µ—Ä: {response.provider}")
71 |                 logger.info(f"‚è±Ô∏è –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: {response.response_time:.2f}—Å")
   |                                                                           ^
72 |                 logger.info(f"üéØ –¢–æ–∫–µ–Ω–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: {response.tokens_used}")
   |

RUF001 String contains ambiguous `–í` (CYRILLIC CAPITAL LETTER VE). Did you mean `B` (LATIN CAPITAL LETTER B)?
  --> scripts\checks\test_openrouter_integration.py:94:26
   |
92 |         stats = manager.get_stats()
93 |         logger.info("üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞:")
94 |         logger.info(f"   –í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤: {stats['requests_total']}")
   |                          ^
95 |         logger.info(f"   –£—Å–ø–µ—à–Ω—ã—Ö: {stats['requests_successful']}")
96 |         logger.info(f"   –ù–µ—É–¥–∞—á–Ω—ã—Ö: {stats['requests_failed']}")
   |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> scripts\checks\test_openrouter_integration.py:94:27
   |
92 |         stats = manager.get_stats()
93 |         logger.info("üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞:")
94 |         logger.info(f"   –í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤: {stats['requests_total']}")
   |                           ^
95 |         logger.info(f"   –£—Å–ø–µ—à–Ω—ã—Ö: {stats['requests_successful']}")
96 |         logger.info(f"   –ù–µ—É–¥–∞—á–Ω—ã—Ö: {stats['requests_failed']}")
   |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
  --> scripts\checks\test_openrouter_integration.py:94:28
   |
92 |         stats = manager.get_stats()
93 |         logger.info("üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞:")
94 |         logger.info(f"   –í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤: {stats['requests_total']}")
   |                            ^
95 |         logger.info(f"   –£—Å–ø–µ—à–Ω—ã—Ö: {stats['requests_successful']}")
96 |         logger.info(f"   –ù–µ—É–¥–∞—á–Ω—ã—Ö: {stats['requests_failed']}")
   |

RUF001 String contains ambiguous `–≥` (CYRILLIC SMALL LETTER GHE). Did you mean `r` (LATIN SMALL LETTER R)?
  --> scripts\checks\test_openrouter_integration.py:94:29
   |
92 |         stats = manager.get_stats()
93 |         logger.info("üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞:")
94 |         logger.info(f"   –í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤: {stats['requests_total']}")
   |                             ^
95 |         logger.info(f"   –£—Å–ø–µ—à–Ω—ã—Ö: {stats['requests_successful']}")
96 |         logger.info(f"   –ù–µ—É–¥–∞—á–Ω—ã—Ö: {stats['requests_failed']}")
   |

RUF001 String contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
  --> scripts\checks\test_openrouter_integration.py:94:30
   |
92 |         stats = manager.get_stats()
93 |         logger.info("üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞:")
94 |         logger.info(f"   –í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤: {stats['requests_total']}")
   |                              ^
95 |         logger.info(f"   –£—Å–ø–µ—à–Ω—ã—Ö: {stats['requests_successful']}")
96 |         logger.info(f"   –ù–µ—É–¥–∞—á–Ω—ã—Ö: {stats['requests_failed']}")
   |

E501 Line too long (101 > 88)
   --> scripts\checks\test_openrouter_integration.py:101:89
    |
 99 |         for provider, provider_stats in stats["provider_stats"].items():
100 |             logger.info(
101 |                 f"   {provider}: {provider_stats['successes']}/{provider_stats['requests']} —É—Å–ø–µ—à–Ω–æ",
    |                                                                                         ^^^^^^^^^^^^^
102 |             )
    |

TRY300 Consider moving this statement to an `else` block
   --> scripts\checks\test_openrouter_integration.py:104:9
    |
102 |             )
103 |
104 |         return True
    |         ^^^^^^^^^^^
105 |
106 |     except Exception as e:
    |

ANN201 Missing return type annotation for public function `main`
   --> scripts\checks\test_openrouter_integration.py:115:11
    |
115 | async def main():
    |           ^^^^
116 |     """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ç–µ—Å—Ç–∞."""
117 |     logger.add("openrouter_test.log", rotation="1 MB", retention="1 week")
    |
help: Add return type annotation: `None`

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> scripts\checks\test_openrouter_integration.py:130:41
    |
128 |         logger.info("‚úÖ OpenRouter –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ")
129 |     else:
130 |         logger.error("üòû –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–∞–º–∏")
    |                                          ^
131 |         logger.info("üìã –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ .env —Ñ–∞–π–ª–µ")
    |

RUF002 Docstring contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
 --> scripts\diagnostics\check_deepseek_api.py:4:46
  |
2 | """
3 | @file: check_deepseek_api.py
4 | @description: –°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º —Å DeepSeek API
  |                                              ^
5 | @created: 2025-09-20
6 | """
  |

E402 Module level import not at top of file
  --> scripts\diagnostics\check_deepseek_api.py:16:1
   |
14 | sys.path.insert(0, str(project_root))
15 |
16 | import httpx
   | ^^^^^^^^^^^^
17 | from loguru import logger
   |

E402 Module level import not at top of file
  --> scripts\diagnostics\check_deepseek_api.py:17:1
   |
16 | import httpx
17 | from loguru import logger
   | ^^^^^^^^^^^^^^^^^^^^^^^^^
18 |
19 | from app.config import get_config
   |

E402 Module level import not at top of file
  --> scripts\diagnostics\check_deepseek_api.py:19:1
   |
17 | from loguru import logger
18 |
19 | from app.config import get_config
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

PLR0911 Too many return statements (7 > 6)
  --> scripts\diagnostics\check_deepseek_api.py:22:11
   |
22 | async def check_deepseek_api_status():
   |           ^^^^^^^^^^^^^^^^^^^^^^^^^
23 |     """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ DeepSeek API –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º."""
24 |     logger.info("üîç –ù–∞—á–∏–Ω–∞–µ–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É DeepSeek API...")
   |

PLR0912 Too many branches (14 > 12)
  --> scripts\diagnostics\check_deepseek_api.py:22:11
   |
22 | async def check_deepseek_api_status():
   |           ^^^^^^^^^^^^^^^^^^^^^^^^^
23 |     """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ DeepSeek API –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º."""
24 |     logger.info("üîç –ù–∞—á–∏–Ω–∞–µ–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É DeepSeek API...")
   |

PLR0915 Too many statements (61 > 50)
  --> scripts\diagnostics\check_deepseek_api.py:22:11
   |
22 | async def check_deepseek_api_status():
   |           ^^^^^^^^^^^^^^^^^^^^^^^^^
23 |     """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ DeepSeek API –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º."""
24 |     logger.info("üîç –ù–∞—á–∏–Ω–∞–µ–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É DeepSeek API...")
   |

ANN201 Missing return type annotation for public function `check_deepseek_api_status`
  --> scripts\diagnostics\check_deepseek_api.py:22:11
   |
22 | async def check_deepseek_api_status():
   |           ^^^^^^^^^^^^^^^^^^^^^^^^^
23 |     """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ DeepSeek API –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º."""
24 |     logger.info("üîç –ù–∞—á–∏–Ω–∞–µ–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É DeepSeek API...")
   |
help: Add return type annotation: `bool | None`

PLR2004 Magic value used in comparison, consider replacing `200` with a constant variable
  --> scripts\diagnostics\check_deepseek_api.py:78:40
   |
76 |             logger.info(f"üìä –°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞: {response.status_code}")
77 |
78 |             if response.status_code == 200:
   |                                        ^^^
79 |                 logger.success("‚úÖ API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!")
80 |                 data = response.json()
   |

PLR2004 Magic value used in comparison, consider replacing `401` with a constant variable
  --> scripts\diagnostics\check_deepseek_api.py:92:40
   |
90 |                 return True
91 |
92 |             if response.status_code == 401:
   |                                        ^^^
93 |                 logger.error("‚ùå –û—à–∏–±–∫–∞ 401: –ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á!")
94 |                 logger.info("üí° –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å API –∫–ª—é—á–∞ –≤ .env —Ñ–∞–π–ª–µ")
   |

PLR2004 Magic value used in comparison, consider replacing `402` with a constant variable
  --> scripts\diagnostics\check_deepseek_api.py:96:42
   |
94 |                 logger.info("üí° –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å API –∫–ª—é—á–∞ –≤ .env —Ñ–∞–π–ª–µ")
95 |
96 |             elif response.status_code == 402:
   |                                          ^^^
97 |                 logger.error("‚ùå –û—à–∏–±–∫–∞ 402: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á–µ—Ç–µ!")
98 |                 logger.info("üí° –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:")
   |

PLR2004 Magic value used in comparison, consider replacing `429` with a constant variable
   --> scripts\diagnostics\check_deepseek_api.py:106:42
    |
104 |                 logger.info("   4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API")
105 |
106 |             elif response.status_code == 429:
    |                                          ^^^
107 |                 logger.error("‚ùå –û—à–∏–±–∫–∞ 429: –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤!")
108 |                 logger.info("üí° –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞")
    |

PLR2004 Magic value used in comparison, consider replacing `500` with a constant variable
   --> scripts\diagnostics\check_deepseek_api.py:110:42
    |
108 |                 logger.info("üí° –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞")
109 |
110 |             elif response.status_code >= 500:
    |                                          ^^^
111 |                 logger.error(f"‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ DeepSeek: {response.status_code}")
112 |                 logger.info("üí° –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å –ø–æ–∑–∂–µ")
    |

E722 Do not use bare `except`
   --> scripts\diagnostics\check_deepseek_api.py:121:13
    |
119 |                 error_data = response.json()
120 |                 logger.info(f"üìÑ –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏: {error_data}")
121 |             except:
    |             ^^^^^^
122 |                 logger.info(f"üìÑ –¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞: {response.text}")
    |

ANN201 Missing return type annotation for public function `check_balance_info`
   --> scripts\diagnostics\check_deepseek_api.py:141:11
    |
141 | async def check_balance_info():
    |           ^^^^^^^^^^^^^^^^^^
142 |     """–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–∞–ª–∞–Ω—Å–µ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)."""
143 |     logger.info("üí≥ –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–∞–ª–∞–Ω—Å–µ...")
    |
help: Add return type annotation: `bool`

RUF002 Docstring contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
   --> scripts\diagnostics\check_deepseek_api.py:142:43
    |
141 | async def check_balance_info():
142 |     """–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–∞–ª–∞–Ω—Å–µ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)."""
    |                                           ^
143 |     logger.info("üí≥ –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–∞–ª–∞–Ω—Å–µ...")
    |

RUF001 String contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
   --> scripts\diagnostics\check_deepseek_api.py:143:41
    |
141 | async def check_balance_info():
142 |     """–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–∞–ª–∞–Ω—Å–µ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)."""
143 |     logger.info("üí≥ –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–∞–ª–∞–Ω—Å–µ...")
    |                                          ^
144 |
145 |     try:
    |

RUF003 Comment contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
   --> scripts\diagnostics\check_deepseek_api.py:158:45
    |
156 |             timeout=httpx.Timeout(10.0),
157 |         ) as client:
158 |             # –ü–æ–ø—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–∞–ª–∞–Ω—Å–µ
    |                                             ^
159 |             try:
160 |                 balance_response = await client.get(
    |

PLR2004 Magic value used in comparison, consider replacing `200` with a constant variable
   --> scripts\diagnostics\check_deepseek_api.py:163:52
    |
161 |                     "/v1/dashboard/billing/subscription",
162 |                 )
163 |                 if balance_response.status_code == 200:
    |                                                    ^^^
164 |                     balance_data = balance_response.json()
165 |                     logger.info(f"üí∞ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–µ: {balance_data}")
    |

RUF001 String contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
   --> scripts\diagnostics\check_deepseek_api.py:165:48
    |
163 |                 if balance_response.status_code == 200:
164 |                     balance_data = balance_response.json()
165 |                     logger.info(f"üí∞ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–µ: {balance_data}")
    |                                                 ^
166 |                     return True
167 |             except:
    |

E722 Do not use bare `except`
   --> scripts\diagnostics\check_deepseek_api.py:167:13
    |
165 |                     logger.info(f"üí∞ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–µ: {balance_data}")
166 |                     return True
167 |             except:
    |             ^^^^^^
168 |                 logger.info("‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–ª–∞–Ω—Å–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ API")
    |

RUF001 String contains ambiguous `‚Ñπ` (INFORMATION SOURCE). Did you mean `i` (LATIN SMALL LETTER I)?
   --> scripts\diagnostics\check_deepseek_api.py:168:30
    |
166 |                     return True
167 |             except:
168 |                 logger.info("‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–ª–∞–Ω—Å–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ API")
    |                              ^
169 |
170 |     except Exception as e:
    |

RUF001 String contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
   --> scripts\diagnostics\check_deepseek_api.py:168:44
    |
166 |                     return True
167 |             except:
168 |                 logger.info("‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–ª–∞–Ω—Å–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ API")
    |                                           ^
169 |
170 |     except Exception as e:
    |

RUF001 String contains ambiguous `–ù` (CYRILLIC CAPITAL LETTER EN). Did you mean `H` (LATIN CAPITAL LETTER H)?
   --> scripts\diagnostics\check_deepseek_api.py:171:29
    |
170 |     except Exception as e:
171 |         logger.warning(f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–∞–ª–∞–Ω—Å–µ: {e}")
    |                            ^
172 |
173 |     return False
    |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
   --> scripts\diagnostics\check_deepseek_api.py:171:30
    |
170 |     except Exception as e:
171 |         logger.warning(f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–∞–ª–∞–Ω—Å–µ: {e}")
    |                             ^
172 |
173 |     return False
    |

RUF001 String contains ambiguous `–æ` (CYRILLIC SMALL LETTER O). Did you mean `o` (LATIN SMALL LETTER O)?
   --> scripts\diagnostics\check_deepseek_api.py:171:60
    |
170 |     except Exception as e:
171 |         logger.warning(f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–∞–ª–∞–Ω—Å–µ: {e}")
    |                                                           ^
172 |
173 |     return False
    |

ANN201 Missing return type annotation for public function `main`
   --> scripts\diagnostics\check_deepseek_api.py:176:11
    |
176 | async def main():
    |           ^^^^
177 |     """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏."""
178 |     logger.add("deepseek_diagnosis.log", rotation="1 MB", retention="1 week")
    |
help: Add return type annotation: `None`

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
   --> scripts\diagnostics\check_deepseek_api.py:197:45
    |
195 |         logger.info("‚úÖ DeepSeek API –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ")
196 |     else:
197 |         logger.error("üòû –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å DeepSeek API")
    |                                              ^
198 |         logger.info("üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:")
199 |         logger.info("   1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ .env —Ñ–∞–π–ª–µ")
    |

T201 `print` found
  --> scripts\diagnostics\check_imports.py:15:5
   |
13 |     import pytest
14 |
15 |     print(f"‚úÖ pytest {pytest.__version__} - OK")
   |     ^^^^^
16 | except ImportError as e:
17 |     print(f"‚ùå pytest –Ω–µ –Ω–∞–π–¥–µ–Ω: {e}")
   |
help: Remove `print`

T201 `print` found
  --> scripts\diagnostics\check_imports.py:17:5
   |
15 |     print(f"‚úÖ pytest {pytest.__version__} - OK")
16 | except ImportError as e:
17 |     print(f"‚ùå pytest –Ω–µ –Ω–∞–π–¥–µ–Ω: {e}")
   |     ^^^^^
18 |
19 | try:
   |
help: Remove `print`

T201 `print` found
  --> scripts\diagnostics\check_imports.py:22:5
   |
20 |     import loguru
21 |
22 |     print(f"‚úÖ loguru {loguru.__version__} - OK")
   |     ^^^^^
23 | except ImportError as e:
24 |     print(f"‚ùå loguru –Ω–µ –Ω–∞–π–¥–µ–Ω: {e}")
   |
help: Remove `print`

T201 `print` found
  --> scripts\diagnostics\check_imports.py:24:5
   |
22 |     print(f"‚úÖ loguru {loguru.__version__} - OK")
23 | except ImportError as e:
24 |     print(f"‚ùå loguru –Ω–µ –Ω–∞–π–¥–µ–Ω: {e}")
   |     ^^^^^
25 |
26 | try:
   |
help: Remove `print`

T201 `print` found
  --> scripts\diagnostics\check_imports.py:29:5
   |
27 |     import pydantic
28 |
29 |     print(f"‚úÖ pydantic {pydantic.__version__} - OK")
   |     ^^^^^
30 | except ImportError as e:
31 |     print(f"‚ùå pydantic –Ω–µ –Ω–∞–π–¥–µ–Ω: {e}")
   |
help: Remove `print`

T201 `print` found
  --> scripts\diagnostics\check_imports.py:31:5
   |
29 |     print(f"‚úÖ pydantic {pydantic.__version__} - OK")
30 | except ImportError as e:
31 |     print(f"‚ùå pydantic –Ω–µ –Ω–∞–π–¥–µ–Ω: {e}")
   |     ^^^^^
32 |
33 | try:
   |
help: Remove `print`

T201 `print` found
  --> scripts\diagnostics\check_imports.py:36:5
   |
34 |     import aiogram
35 |
36 |     print(f"‚úÖ aiogram {aiogram.__version__} - OK")
   |     ^^^^^
37 | except ImportError as e:
38 |     print(f"‚ùå aiogram –Ω–µ –Ω–∞–π–¥–µ–Ω: {e}")
   |
help: Remove `print`

T201 `print` found
  --> scripts\diagnostics\check_imports.py:38:5
   |
36 |     print(f"‚úÖ aiogram {aiogram.__version__} - OK")
37 | except ImportError as e:
38 |     print(f"‚ùå aiogram –Ω–µ –Ω–∞–π–¥–µ–Ω: {e}")
   |     ^^^^^
39 |
40 | # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—É—Ç—å –∫ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä—É
   |
help: Remove `print`

T201 `print` found
  --> scripts\diagnostics\check_imports.py:41:1
   |
40 | # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—É—Ç—å –∫ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä—É
41 | print(f"\nüìç Python –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä: {sys.executable}")
   | ^^^^^
42 | print(f"üìÅ –†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: {Path.cwd()}")
43 | print(f"üêç –í–µ—Ä—Å–∏—è Python: {sys.version}")
   |
help: Remove `print`

T201 `print` found
  --> scripts\diagnostics\check_imports.py:42:1
   |
40 | # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—É—Ç—å –∫ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä—É
41 | print(f"\nüìç Python –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä: {sys.executable}")
42 | print(f"üìÅ –†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: {Path.cwd()}")
   | ^^^^^
43 | print(f"üêç –í–µ—Ä—Å–∏—è Python: {sys.version}")
   |
help: Remove `print`

T201 `print` found
  --> scripts\diagnostics\check_imports.py:43:1
   |
41 | print(f"\nüìç Python –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä: {sys.executable}")
42 | print(f"üìÅ –†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: {Path.cwd()}")
43 | print(f"üêç –í–µ—Ä—Å–∏—è Python: {sys.version}")
   | ^^^^^
44 |
45 | # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—É—Ç–∏ Python
   |
help: Remove `print`

T201 `print` found
  --> scripts\diagnostics\check_imports.py:46:1
   |
45 | # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—É—Ç–∏ Python
46 | print("\nüìö Python paths:")
   | ^^^^^
47 | for i, path in enumerate(sys.path[:5], 1):
48 |     print(f"  {i}. {path}")
   |
help: Remove `print`

T201 `print` found
  --> scripts\diagnostics\check_imports.py:48:5
   |
46 | print("\nüìö Python paths:")
47 | for i, path in enumerate(sys.path[:5], 1):
48 |     print(f"  {i}. {path}")
   |     ^^^^^
49 |
50 | if __name__ == "__main__":
   |
help: Remove `print`

T201 `print` found
  --> scripts\diagnostics\check_imports.py:51:5
   |
50 | if __name__ == "__main__":
51 |     print("\nüéâ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!")
   |     ^^^^^
52 |     print("üí° –ï—Å–ª–∏ –≤ IDE –≤—Å–µ –µ—â–µ –æ—à–∏–±–∫–∏, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä Python:")
53 |     print("   VS Code: Ctrl+Shift+P -> 'Python: Select Interpreter'")
   |
help: Remove `print`

RUF001 String contains ambiguous `–í` (CYRILLIC CAPITAL LETTER VE). Did you mean `B` (LATIN CAPITAL LETTER B)?
  --> scripts\diagnostics\check_imports.py:51:16
   |
50 | if __name__ == "__main__":
51 |     print("\nüéâ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!")
   |                 ^
52 |     print("üí° –ï—Å–ª–∏ –≤ IDE –≤—Å–µ –µ—â–µ –æ—à–∏–±–∫–∏, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä Python:")
53 |     print("   VS Code: Ctrl+Shift+P -> 'Python: Select Interpreter'")
   |

RUF001 String contains ambiguous `—Å` (CYRILLIC SMALL LETTER ES). Did you mean `c` (LATIN SMALL LETTER C)?
  --> scripts\diagnostics\check_imports.py:51:17
   |
50 | if __name__ == "__main__":
51 |     print("\nüéâ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!")
   |                  ^
52 |     print("üí° –ï—Å–ª–∏ –≤ IDE –≤—Å–µ –µ—â–µ –æ—à–∏–±–∫–∏, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä Python:")
53 |     print("   VS Code: Ctrl+Shift+P -> 'Python: Select Interpreter'")
   |

RUF001 String contains ambiguous `–µ` (CYRILLIC SMALL LETTER IE). Did you mean `e` (LATIN SMALL LETTER E)?
  --> scripts\diagnostics\check_imports.py:51:18
   |
50 | if __name__ == "__main__":
51 |     print("\nüéâ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!")
   |                   ^
52 |     print("üí° –ï—Å–ª–∏ –≤ IDE –≤—Å–µ –µ—â–µ –æ—à–∏–±–∫–∏, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä Python:")
53 |     print("   VS Code: Ctrl+Shift+P -> 'Python: Select Interpreter'")
   |

T201 `print` found
  --> scripts\diagnostics\check_imports.py:52:5
   |
50 | if __name__ == "__main__":
51 |     print("\nüéâ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!")
52 |     print("üí° –ï—Å–ª–∏ –≤ IDE –≤—Å–µ –µ—â–µ –æ—à–∏–±–∫–∏, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä Python:")
   |     ^^^^^
53 |     print("   VS Code: Ctrl+Shift+P -> 'Python: Select Interpreter'")
54 |     print("   PyCharm: File -> Settings -> Project -> Python Interpreter")
   |
help: Remove `print`

T201 `print` found
  --> scripts\diagnostics\check_imports.py:53:5
   |
51 |     print("\nüéâ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!")
52 |     print("üí° –ï—Å–ª–∏ –≤ IDE –≤—Å–µ –µ—â–µ –æ—à–∏–±–∫–∏, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä Python:")
53 |     print("   VS Code: Ctrl+Shift+P -> 'Python: Select Interpreter'")
   |     ^^^^^
54 |     print("   PyCharm: File -> Settings -> Project -> Python Interpreter")
55 |     print(f"   –ü—É—Ç—å: {Path.cwd() / '.venv' / 'Scripts' / 'python.exe'}")
   |
help: Remove `print`

T201 `print` found
  --> scripts\diagnostics\check_imports.py:54:5
   |
52 |     print("üí° –ï—Å–ª–∏ –≤ IDE –≤—Å–µ –µ—â–µ –æ—à–∏–±–∫–∏, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä Python:")
53 |     print("   VS Code: Ctrl+Shift+P -> 'Python: Select Interpreter'")
54 |     print("   PyCharm: File -> Settings -> Project -> Python Interpreter")
   |     ^^^^^
55 |     print(f"   –ü—É—Ç—å: {Path.cwd() / '.venv' / 'Scripts' / 'python.exe'}")
   |
help: Remove `print`

T201 `print` found
  --> scripts\diagnostics\check_imports.py:55:5
   |
53 |     print("   VS Code: Ctrl+Shift+P -> 'Python: Select Interpreter'")
54 |     print("   PyCharm: File -> Settings -> Project -> Python Interpreter")
55 |     print(f"   –ü—É—Ç—å: {Path.cwd() / '.venv' / 'Scripts' / 'python.exe'}")
   |     ^^^^^
   |
help: Remove `print`

T201 `print` found
  --> test_pydantic.py:28:1
   |
27 | config = TestConfig(field1="test", field2="test2")
28 | print("field1:", config.field1)
   | ^^^^^
29 | print("field2:", config.field2)
30 | print("computed_field:", config.computed_field)
   |
help: Remove `print`

T201 `print` found
  --> test_pydantic.py:29:1
   |
27 | config = TestConfig(field1="test", field2="test2")
28 | print("field1:", config.field1)
29 | print("field2:", config.field2)
   | ^^^^^
30 | print("computed_field:", config.computed_field)
   |
help: Remove `print`

T201 `print` found
  --> test_pydantic.py:30:1
   |
28 | print("field1:", config.field1)
29 | print("field2:", config.field2)
30 | print("computed_field:", config.computed_field)
   | ^^^^^
   |
help: Remove `print`

T201 `print` found
  --> test_pydantic_behavior.py:16:9
   |
14 |     def build_computed_field(cls, v: str | None, info: ValidationInfo) -> str:
15 |         """Build computed field from other fields."""
16 |         print(f"Validator called with v={v}, info.data={info.data}")
   |         ^^^^^
17 |
18 |         if v is not None:
   |
help: Remove `print`

T201 `print` found
  --> test_pydantic_behavior.py:30:1
   |
29 | # Test 1: With constructor parameters
30 | print("=== Test 1: Constructor parameters ===")
   | ^^^^^
31 | try:
32 |     config1 = TestConfig(field1="test", field2="test2")
   |
help: Remove `print`

T201 `print` found
  --> test_pydantic_behavior.py:33:5
   |
31 | try:
32 |     config1 = TestConfig(field1="test", field2="test2")
33 |     print(f"field1: {config1.field1}")
   |     ^^^^^
34 |     print(f"field2: {config1.field2}")
35 |     print(f"computed_field: {config1.computed_field}")
   |
help: Remove `print`

T201 `print` found
  --> test_pydantic_behavior.py:34:5
   |
32 |     config1 = TestConfig(field1="test", field2="test2")
33 |     print(f"field1: {config1.field1}")
34 |     print(f"field2: {config1.field2}")
   |     ^^^^^
35 |     print(f"computed_field: {config1.computed_field}")
36 | except Exception as e:
   |
help: Remove `print`

T201 `print` found
  --> test_pydantic_behavior.py:35:5
   |
33 |     print(f"field1: {config1.field1}")
34 |     print(f"field2: {config1.field2}")
35 |     print(f"computed_field: {config1.computed_field}")
   |     ^^^^^
36 | except Exception as e:
37 |     print(f"Error: {e}")
   |
help: Remove `print`

T201 `print` found
  --> test_pydantic_behavior.py:37:5
   |
35 |     print(f"computed_field: {config1.computed_field}")
36 | except Exception as e:
37 |     print(f"Error: {e}")
   |     ^^^^^
38 |
39 | # Test 2: With environment variables
   |
help: Remove `print`

T201 `print` found
  --> test_pydantic_behavior.py:40:1
   |
39 | # Test 2: With environment variables
40 | print("\n=== Test 2: Environment variables ===")
   | ^^^^^
41 | import os
   |
help: Remove `print`

E402 Module level import not at top of file
  --> test_pydantic_behavior.py:41:1
   |
39 | # Test 2: With environment variables
40 | print("\n=== Test 2: Environment variables ===")
41 | import os
   | ^^^^^^^^^
42 |
43 | os.environ["FIELD1"] = "env_test"
   |

T201 `print` found
  --> test_pydantic_behavior.py:48:5
   |
46 | try:
47 |     config2 = TestConfig()
48 |     print(f"field1: {config2.field1}")
   |     ^^^^^
49 |     print(f"field2: {config2.field2}")
50 |     print(f"computed_field: {config2.computed_field}")
   |
help: Remove `print`

T201 `print` found
  --> test_pydantic_behavior.py:49:5
   |
47 |     config2 = TestConfig()
48 |     print(f"field1: {config2.field1}")
49 |     print(f"field2: {config2.field2}")
   |     ^^^^^
50 |     print(f"computed_field: {config2.computed_field}")
51 | except Exception as e:
   |
help: Remove `print`

T201 `print` found
  --> test_pydantic_behavior.py:50:5
   |
48 |     print(f"field1: {config2.field1}")
49 |     print(f"field2: {config2.field2}")
50 |     print(f"computed_field: {config2.computed_field}")
   |     ^^^^^
51 | except Exception as e:
52 |     print(f"Error: {e}")
   |
help: Remove `print`

T201 `print` found
  --> test_pydantic_behavior.py:52:5
   |
50 |     print(f"computed_field: {config2.computed_field}")
51 | except Exception as e:
52 |     print(f"Error: {e}")
   |     ^^^^^
53 |
54 | # Test 3: Mixed (constructor overrides env)
   |
help: Remove `print`

T201 `print` found
  --> test_pydantic_behavior.py:55:1
   |
54 | # Test 3: Mixed (constructor overrides env)
55 | print("\n=== Test 3: Mixed (constructor overrides env) ===")
   | ^^^^^
56 | try:
57 |     config3 = TestConfig(field1="constructor_override")
   |
help: Remove `print`

T201 `print` found
  --> test_pydantic_behavior.py:58:5
   |
56 | try:
57 |     config3 = TestConfig(field1="constructor_override")
58 |     print(f"field1: {config3.field1}")
   |     ^^^^^
59 |     print(f"field2: {config3.field2}")
60 |     print(f"computed_field: {config3.computed_field}")
   |
help: Remove `print`

T201 `print` found
  --> test_pydantic_behavior.py:59:5
   |
57 |     config3 = TestConfig(field1="constructor_override")
58 |     print(f"field1: {config3.field1}")
59 |     print(f"field2: {config3.field2}")
   |     ^^^^^
60 |     print(f"computed_field: {config3.computed_field}")
61 | except Exception as e:
   |
help: Remove `print`

T201 `print` found
  --> test_pydantic_behavior.py:60:5
   |
58 |     print(f"field1: {config3.field1}")
59 |     print(f"field2: {config3.field2}")
60 |     print(f"computed_field: {config3.computed_field}")
   |     ^^^^^
61 | except Exception as e:
62 |     print(f"Error: {e}")
   |
help: Remove `print`

T201 `print` found
  --> test_pydantic_behavior.py:62:5
   |
60 |     print(f"computed_field: {config3.computed_field}")
61 | except Exception as e:
62 |     print(f"Error: {e}")
   |     ^^^^^
   |
help: Remove `print`

ANN201 Missing return type annotation for public function `project_root_path`
  --> tests\conftest.py:20:5
   |
19 | @pytest.fixture(scope="session")
20 | def project_root_path():
   |     ^^^^^^^^^^^^^^^^^
21 |     """–§–∏–∫—Å—Ç—É—Ä–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è –ø—É—Ç—å –∫ –∫–æ—Ä–Ω—é –ø—Ä–æ–µ–∫—Ç–∞."""
22 |     return project_root
   |
help: Add return type annotation

ANN201 Missing return type annotation for public function `setup_test_environment`
  --> tests\conftest.py:26:5
   |
25 | @pytest.fixture(autouse=True)
26 | def setup_test_environment():
   |     ^^^^^^^^^^^^^^^^^^^^^^
27 |     """–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è."""
28 |     # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤
   |
help: Add return type annotation: `None`

PLC0415 `import` should be at the top-level of a file
  --> tests\conftest.py:29:5
   |
27 |     """–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è."""
28 |     # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤
29 |     from app.utils.logging import setup_logging
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
30 |
31 |     setup_logging(
   |

ANN201 Missing return type annotation for public function `clean_config_cache`
  --> tests\conftest.py:40:5
   |
39 | @pytest.fixture
40 | def clean_config_cache():
   |     ^^^^^^^^^^^^^^^^^^
41 |     """–§–∏–∫—Å—Ç—É—Ä–∞ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏."""
42 |     import app.config
   |
help: Add return type annotation

PLC0415 `import` should be at the top-level of a file
  --> tests\conftest.py:42:5
   |
40 | def clean_config_cache():
41 |     """–§–∏–∫—Å—Ç—É—Ä–∞ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏."""
42 |     import app.config
   |     ^^^^^^^^^^^^^^^^^
43 |
44 |     # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
   |

SLF001 Private member accessed: `_config_instance`
  --> tests\conftest.py:48:5
   |
47 |     # –û—á–∏—â–∞–µ–º –∫–µ—à
48 |     app.config._config_instance = None
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
49 |
50 |     yield
   |

SLF001 Private member accessed: `_config_instance`
  --> tests\conftest.py:53:5
   |
52 |     # –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
53 |     app.config._config_instance = original_instance
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

ANN201 Missing return type annotation for public function `mock_config`
  --> tests\conftest.py:62:5
   |
61 | @pytest.fixture
62 | def mock_config():
   |     ^^^^^^^^^^^
63 |     """–ú–æ–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤."""
64 |     config = MagicMock()
   |
help: Add return type annotation

ANN201 Missing return type annotation for public function `mock_ai_response`
  --> tests\conftest.py:90:5
   |
89 | @pytest.fixture
90 | def mock_ai_response():
   |     ^^^^^^^^^^^^^^^^
91 |     """–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–æ–∫ AI –æ—Ç–≤–µ—Ç–∞."""
92 |     from app.services.ai_providers.base import AIResponse
   |
help: Add return type annotation

PLC0415 `import` should be at the top-level of a file
  --> tests\conftest.py:92:5
   |
90 | def mock_ai_response():
91 |     """–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–æ–∫ AI –æ—Ç–≤–µ—Ç–∞."""
92 |     from app.services.ai_providers.base import AIResponse
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
93 |
94 |     return AIResponse(
   |

ANN201 Missing return type annotation for public function `mock_conversation_messages`
   --> tests\conftest.py:105:5
    |
104 | @pytest.fixture
105 | def mock_conversation_messages():
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^
106 |     """–¢–µ—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞."""
107 |     from app.services.ai_providers.base import ConversationMessage
    |
help: Add return type annotation

PLC0415 `import` should be at the top-level of a file
   --> tests\conftest.py:107:5
    |
105 | def mock_conversation_messages():
106 |     """–¢–µ—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞."""
107 |     from app.services.ai_providers.base import ConversationMessage
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
108 |
109 |     return [
    |

ANN201 Missing return type annotation for public function `mock_openrouter_provider`
   --> tests\conftest.py:126:5
    |
125 | @pytest.fixture
126 | def mock_openrouter_provider():
    |     ^^^^^^^^^^^^^^^^^^^^^^^^
127 |     """–ú–æ–∫ OpenRouter –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
128 |     provider = AsyncMock()
    |
help: Add return type annotation

ANN201 Missing return type annotation for public function `mock_deepseek_provider`
   --> tests\conftest.py:136:5
    |
135 | @pytest.fixture
136 | def mock_deepseek_provider():
    |     ^^^^^^^^^^^^^^^^^^^^^^
137 |     """–ú–æ–∫ DeepSeek –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
138 |     provider = AsyncMock()
    |
help: Add return type annotation

ANN201 Missing return type annotation for public function `mock_ai_manager`
   --> tests\conftest.py:146:5
    |
145 | @pytest.fixture
146 | def mock_ai_manager(mock_openrouter_provider, mock_deepseek_provider, mock_ai_response):
    |     ^^^^^^^^^^^^^^^
147 |     """–ú–æ–∫ AI –º–µ–Ω–µ–¥–∂–µ—Ä–∞ —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏."""
148 |     manager = AsyncMock()
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `mock_openrouter_provider`
   --> tests\conftest.py:146:21
    |
145 | @pytest.fixture
146 | def mock_ai_manager(mock_openrouter_provider, mock_deepseek_provider, mock_ai_response):
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^
147 |     """–ú–æ–∫ AI –º–µ–Ω–µ–¥–∂–µ—Ä–∞ —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏."""
148 |     manager = AsyncMock()
    |

ANN001 Missing type annotation for function argument `mock_deepseek_provider`
   --> tests\conftest.py:146:47
    |
145 | @pytest.fixture
146 | def mock_ai_manager(mock_openrouter_provider, mock_deepseek_provider, mock_ai_response):
    |                                               ^^^^^^^^^^^^^^^^^^^^^^
147 |     """–ú–æ–∫ AI –º–µ–Ω–µ–¥–∂–µ—Ä–∞ —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏."""
148 |     manager = AsyncMock()
    |

ANN001 Missing type annotation for function argument `mock_ai_response`
   --> tests\conftest.py:146:71
    |
145 | @pytest.fixture
146 | def mock_ai_manager(mock_openrouter_provider, mock_deepseek_provider, mock_ai_response):
    |                                                                       ^^^^^^^^^^^^^^^^
147 |     """–ú–æ–∫ AI –º–µ–Ω–µ–¥–∂–µ—Ä–∞ —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏."""
148 |     manager = AsyncMock()
    |

ANN201 Missing return type annotation for public function `mock_db_session`
   --> tests\conftest.py:187:5
    |
186 | @pytest.fixture
187 | def mock_db_session():
    |     ^^^^^^^^^^^^^^^
188 |     """–ú–æ–∫ —Å–µ—Å—Å–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö."""
189 |     session = AsyncMock()
    |
help: Add return type annotation

ANN201 Missing return type annotation for public function `sample_user`
   --> tests\conftest.py:199:5
    |
198 | @pytest.fixture
199 | def sample_user():
    |     ^^^^^^^^^^^
200 |     """–ü—Ä–∏–º–µ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤."""
201 |     from app.models.user import User
    |
help: Add return type annotation

PLC0415 `import` should be at the top-level of a file
   --> tests\conftest.py:201:5
    |
199 | def sample_user():
200 |     """–ü—Ä–∏–º–µ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤."""
201 |     from app.models.user import User
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
202 |
203 |     return User(
    |

ANN201 Missing return type annotation for public function `sample_conversation`
   --> tests\conftest.py:214:5
    |
213 | @pytest.fixture
214 | def sample_conversation():
    |     ^^^^^^^^^^^^^^^^^^^
215 |     """–ü—Ä–∏–º–µ—Ä –¥–∏–∞–ª–æ–≥–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤."""
216 |     from app.models.conversation import Conversation, MessageRole
    |
help: Add return type annotation

PLC0415 `import` should be at the top-level of a file
   --> tests\conftest.py:216:5
    |
214 | def sample_conversation():
215 |     """–ü—Ä–∏–º–µ—Ä –¥–∏–∞–ª–æ–≥–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤."""
216 |     from app.models.conversation import Conversation, MessageRole
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
217 |
218 |     return Conversation(
    |

ANN201 Missing return type annotation for public function `mock_telegram_message`
   --> tests\conftest.py:228:5
    |
227 | @pytest.fixture
228 | def mock_telegram_message():
    |     ^^^^^^^^^^^^^^^^^^^^^
229 |     """–ú–æ–∫ Telegram —Å–æ–æ–±—â–µ–Ω–∏—è."""
230 |     from aiogram.types import Chat, Message
    |
help: Add return type annotation

PLC0415 `import` should be at the top-level of a file
   --> tests\conftest.py:230:5
    |
228 | def mock_telegram_message():
229 |     """–ú–æ–∫ Telegram —Å–æ–æ–±—â–µ–Ω–∏—è."""
230 |     from aiogram.types import Chat, Message
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
231 |     from aiogram.types import User as TelegramUser
    |

PLC0415 `import` should be at the top-level of a file
   --> tests\conftest.py:231:5
    |
229 |     """–ú–æ–∫ Telegram —Å–æ–æ–±—â–µ–Ω–∏—è."""
230 |     from aiogram.types import Chat, Message
231 |     from aiogram.types import User as TelegramUser
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
232 |
233 |     message = MagicMock(spec=Message)
    |

ANN201 Missing return type annotation for public function `pytest_configure`
   --> tests\conftest.py:251:5
    |
250 | # –ú–∞—Ä–∫–µ—Ä—ã –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤
251 | def pytest_configure(config):
    |     ^^^^^^^^^^^^^^^^
252 |     """–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –º–∞—Ä–∫–µ—Ä–∞–º–∏."""
253 |     config.addinivalue_line(
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `config`
   --> tests\conftest.py:251:22
    |
250 | # –ú–∞—Ä–∫–µ—Ä—ã –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤
251 | def pytest_configure(config):
    |                      ^^^^^^
252 |     """–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –º–∞—Ä–∫–µ—Ä–∞–º–∏."""
253 |     config.addinivalue_line(
    |

ANN201 Missing return type annotation for public function `test_ai_manager_initialization`
  --> tests\integration\test_ai_manager.py:29:15
   |
28 |     @pytest.mark.asyncio
29 |     async def test_ai_manager_initialization(self, mock_config):
   |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
30 |         """–¢–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ AI –º–µ–Ω–µ–¥–∂–µ—Ä–∞."""
31 |         with patch("app.services.ai_manager.get_config", return_value=mock_config):
   |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_config`
  --> tests\integration\test_ai_manager.py:29:52
   |
28 |     @pytest.mark.asyncio
29 |     async def test_ai_manager_initialization(self, mock_config):
   |                                                    ^^^^^^^^^^^
30 |         """–¢–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ AI –º–µ–Ω–µ–¥–∂–µ—Ä–∞."""
31 |         with patch("app.services.ai_manager.get_config", return_value=mock_config):
   |

ANN201 Missing return type annotation for public function `test_ai_manager_singleton`
  --> tests\integration\test_ai_manager.py:38:9
   |
36 |             assert hasattr(manager, "_config")
37 |
38 |     def test_ai_manager_singleton(self):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^
39 |         """–¢–µ—Å—Ç singleton –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –¥–ª—è AIManager."""
40 |         with patch("app.services.ai_manager.get_config"):
   |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_provider_registration`
  --> tests\integration\test_ai_manager.py:47:15
   |
46 |     @pytest.mark.asyncio
47 |     async def test_provider_registration(self, mock_config):
   |               ^^^^^^^^^^^^^^^^^^^^^^^^^^
48 |         """–¢–µ—Å—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤."""
49 |         with patch("app.services.ai_manager.get_config", return_value=mock_config):
   |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_config`
  --> tests\integration\test_ai_manager.py:47:48
   |
46 |     @pytest.mark.asyncio
47 |     async def test_provider_registration(self, mock_config):
   |                                                ^^^^^^^^^^^
48 |         """–¢–µ—Å—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤."""
49 |         with patch("app.services.ai_manager.get_config", return_value=mock_config):
   |

ANN201 Missing return type annotation for public function `test_invalid_provider_request`
  --> tests\integration\test_ai_manager.py:59:9
   |
57 |             assert deepseek is not None
58 |
59 |     def test_invalid_provider_request(self, mock_config):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
60 |         """–¢–µ—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
61 |         with patch("app.services.ai_manager.get_config", return_value=mock_config):
   |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_config`
  --> tests\integration\test_ai_manager.py:59:45
   |
57 |             assert deepseek is not None
58 |
59 |     def test_invalid_provider_request(self, mock_config):
   |                                             ^^^^^^^^^^^
60 |         """–¢–µ—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
61 |         with patch("app.services.ai_manager.get_config", return_value=mock_config):
   |

ANN201 Missing return type annotation for public function `manager_with_mocked_providers`
  --> tests\integration\test_ai_manager.py:74:9
   |
73 |     @pytest.fixture
74 |     def manager_with_mocked_providers(self, mock_config):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
75 |         """–ú–µ–Ω–µ–¥–∂–µ—Ä —Å –º–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏."""
76 |         with patch("app.services.ai_manager.get_config", return_value=mock_config):
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `mock_config`
  --> tests\integration\test_ai_manager.py:74:45
   |
73 |     @pytest.fixture
74 |     def manager_with_mocked_providers(self, mock_config):
   |                                             ^^^^^^^^^^^
75 |         """–ú–µ–Ω–µ–¥–∂–µ—Ä —Å –º–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏."""
76 |         with patch("app.services.ai_manager.get_config", return_value=mock_config):
   |

SLF001 Private member accessed: `_providers`
  --> tests\integration\test_ai_manager.py:96:13
   |
94 |             mock_deepseek.close = AsyncMock()
95 |
96 |             manager._providers["openrouter"] = mock_openrouter
   |             ^^^^^^^^^^^^^^^^^^
97 |             manager._providers["deepseek"] = mock_deepseek
   |

SLF001 Private member accessed: `_providers`
  --> tests\integration\test_ai_manager.py:97:13
   |
96 |             manager._providers["openrouter"] = mock_openrouter
97 |             manager._providers["deepseek"] = mock_deepseek
   |             ^^^^^^^^^^^^^^^^^^
98 |
99 |             return manager, mock_openrouter, mock_deepseek
   |

ANN201 Missing return type annotation for public function `test_successful_primary_provider`
   --> tests\integration\test_ai_manager.py:102:15
    |
101 |     @pytest.mark.asyncio
102 |     async def test_successful_primary_provider(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
103 |         self,
104 |         manager_with_mocked_providers,
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `manager_with_mocked_providers`
   --> tests\integration\test_ai_manager.py:104:9
    |
102 |     async def test_successful_primary_provider(
103 |         self,
104 |         manager_with_mocked_providers,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
105 |         mock_conversation_messages,
106 |         mock_ai_response,
    |

ANN001 Missing type annotation for function argument `mock_conversation_messages`
   --> tests\integration\test_ai_manager.py:105:9
    |
103 |         self,
104 |         manager_with_mocked_providers,
105 |         mock_conversation_messages,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^
106 |         mock_ai_response,
107 |     ):
    |

ANN001 Missing type annotation for function argument `mock_ai_response`
   --> tests\integration\test_ai_manager.py:106:9
    |
104 |         manager_with_mocked_providers,
105 |         mock_conversation_messages,
106 |         mock_ai_response,
    |         ^^^^^^^^^^^^^^^^
107 |     ):
108 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
    |

ANN201 Missing return type annotation for public function `test_fallback_on_primary_failure`
   --> tests\integration\test_ai_manager.py:122:15
    |
121 |     @pytest.mark.asyncio
122 |     async def test_fallback_on_primary_failure(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
123 |         self,
124 |         manager_with_mocked_providers,
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `manager_with_mocked_providers`
   --> tests\integration\test_ai_manager.py:124:9
    |
122 |     async def test_fallback_on_primary_failure(
123 |         self,
124 |         manager_with_mocked_providers,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
125 |         mock_conversation_messages,
126 |         mock_ai_response,
    |

ANN001 Missing type annotation for function argument `mock_conversation_messages`
   --> tests\integration\test_ai_manager.py:125:9
    |
123 |         self,
124 |         manager_with_mocked_providers,
125 |         mock_conversation_messages,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^
126 |         mock_ai_response,
127 |     ):
    |

ANN001 Missing type annotation for function argument `mock_ai_response`
   --> tests\integration\test_ai_manager.py:126:9
    |
124 |         manager_with_mocked_providers,
125 |         mock_conversation_messages,
126 |         mock_ai_response,
    |         ^^^^^^^^^^^^^^^^
127 |     ):
128 |         """–¢–µ—Å—Ç fallback –ø—Ä–∏ —Å–±–æ–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
    |

ANN201 Missing return type annotation for public function `test_both_providers_fail`
   --> tests\integration\test_ai_manager.py:145:15
    |
144 |     @pytest.mark.asyncio
145 |     async def test_both_providers_fail(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
146 |         self,
147 |         manager_with_mocked_providers,
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `manager_with_mocked_providers`
   --> tests\integration\test_ai_manager.py:147:9
    |
145 |     async def test_both_providers_fail(
146 |         self,
147 |         manager_with_mocked_providers,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
148 |         mock_conversation_messages,
149 |     ):
    |

ANN001 Missing type annotation for function argument `mock_conversation_messages`
   --> tests\integration\test_ai_manager.py:148:9
    |
146 |         self,
147 |         manager_with_mocked_providers,
148 |         mock_conversation_messages,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^
149 |     ):
150 |         """–¢–µ—Å—Ç –∫–æ–≥–¥–∞ –æ–±–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã."""
    |

ANN201 Missing return type annotation for public function `test_rate_limit_fallback`
   --> tests\integration\test_ai_manager.py:167:15
    |
166 |     @pytest.mark.asyncio
167 |     async def test_rate_limit_fallback(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
168 |         self,
169 |         manager_with_mocked_providers,
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `manager_with_mocked_providers`
   --> tests\integration\test_ai_manager.py:169:9
    |
167 |     async def test_rate_limit_fallback(
168 |         self,
169 |         manager_with_mocked_providers,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
170 |         mock_conversation_messages,
171 |         mock_ai_response,
    |

ANN001 Missing type annotation for function argument `mock_conversation_messages`
   --> tests\integration\test_ai_manager.py:170:9
    |
168 |         self,
169 |         manager_with_mocked_providers,
170 |         mock_conversation_messages,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^
171 |         mock_ai_response,
172 |     ):
    |

ANN001 Missing type annotation for function argument `mock_ai_response`
   --> tests\integration\test_ai_manager.py:171:9
    |
169 |         manager_with_mocked_providers,
170 |         mock_conversation_messages,
171 |         mock_ai_response,
    |         ^^^^^^^^^^^^^^^^
172 |     ):
173 |         """–¢–µ—Å—Ç fallback –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤."""
    |

ANN201 Missing return type annotation for public function `test_health_check_all_healthy`
   --> tests\integration\test_ai_manager.py:197:15
    |
196 |     @pytest.mark.asyncio
197 |     async def test_health_check_all_healthy(self, mock_ai_manager):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
198 |         """–¢–µ—Å—Ç health check –∫–æ–≥–¥–∞ –≤—Å–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –∑–¥–æ—Ä–æ–≤—ã."""
199 |         health = await mock_ai_manager.health_check()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_ai_manager`
   --> tests\integration\test_ai_manager.py:197:51
    |
196 |     @pytest.mark.asyncio
197 |     async def test_health_check_all_healthy(self, mock_ai_manager):
    |                                                   ^^^^^^^^^^^^^^^
198 |         """–¢–µ—Å—Ç health check –∫–æ–≥–¥–∞ –≤—Å–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –∑–¥–æ—Ä–æ–≤—ã."""
199 |         health = await mock_ai_manager.health_check()
    |

ANN201 Missing return type annotation for public function `test_health_check_with_failures`
   --> tests\integration\test_ai_manager.py:207:15
    |
206 |     @pytest.mark.asyncio
207 |     async def test_health_check_with_failures(self, manager_with_mocked_providers):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
208 |         """–¢–µ—Å—Ç health check —Å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏."""
209 |         manager, mock_openrouter, mock_deepseek = manager_with_mocked_providers
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `manager_with_mocked_providers`
   --> tests\integration\test_ai_manager.py:207:53
    |
206 |     @pytest.mark.asyncio
207 |     async def test_health_check_with_failures(self, manager_with_mocked_providers):
    |                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
208 |         """–¢–µ—Å—Ç health check —Å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏."""
209 |         manager, mock_openrouter, mock_deepseek = manager_with_mocked_providers
    |

ANN201 Missing return type annotation for public function `test_initial_statistics`
   --> tests\integration\test_ai_manager.py:236:9
    |
234 |     """–¢–µ—Å—Ç—ã —Å–∏—Å—Ç–µ–º—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ AIManager."""
235 |
236 |     def test_initial_statistics(self, mock_ai_manager):
    |         ^^^^^^^^^^^^^^^^^^^^^^^
237 |         """–¢–µ—Å—Ç –Ω–∞—á–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏."""
238 |         # –ú–æ–∫ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_ai_manager`
   --> tests\integration\test_ai_manager.py:236:39
    |
234 |     """–¢–µ—Å—Ç—ã —Å–∏—Å—Ç–µ–º—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ AIManager."""
235 |
236 |     def test_initial_statistics(self, mock_ai_manager):
    |                                       ^^^^^^^^^^^^^^^
237 |         """–¢–µ—Å—Ç –Ω–∞—á–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏."""
238 |         # –ú–æ–∫ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
    |

ANN201 Missing return type annotation for public function `test_statistics_after_requests`
   --> tests\integration\test_ai_manager.py:255:9
    |
253 |         assert "provider_stats" in stats
254 |
255 |     def test_statistics_after_requests(self, mock_ai_manager):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
256 |         """–¢–µ—Å—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ—Å–ª–µ –∑–∞–ø—Ä–æ—Å–æ–≤."""
257 |         # –ò–º–∏—Ç–∏—Ä—É–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å –∑–∞–ø—Ä–æ—Å–∞–º–∏
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_ai_manager`
   --> tests\integration\test_ai_manager.py:255:46
    |
253 |         assert "provider_stats" in stats
254 |
255 |     def test_statistics_after_requests(self, mock_ai_manager):
    |                                              ^^^^^^^^^^^^^^^
256 |         """–¢–µ—Å—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ—Å–ª–µ –∑–∞–ø—Ä–æ—Å–æ–≤."""
257 |         # –ò–º–∏—Ç–∏—Ä—É–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å –∑–∞–ø—Ä–æ—Å–∞–º–∏
    |

ANN201 Missing return type annotation for public function `test_cache_hit`
   --> tests\integration\test_ai_manager.py:283:15
    |
282 |     @pytest.mark.asyncio
283 |     async def test_cache_hit(
    |               ^^^^^^^^^^^^^^
284 |         self,
285 |         manager_with_mocked_providers,
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `manager_with_mocked_providers`
   --> tests\integration\test_ai_manager.py:285:9
    |
283 |     async def test_cache_hit(
284 |         self,
285 |         manager_with_mocked_providers,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
286 |         mock_conversation_messages,
287 |     ):
    |

ANN001 Missing type annotation for function argument `mock_conversation_messages`
   --> tests\integration\test_ai_manager.py:286:9
    |
284 |         self,
285 |         manager_with_mocked_providers,
286 |         mock_conversation_messages,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^
287 |     ):
288 |         """–¢–µ—Å—Ç –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ –∫–µ—à."""
    |

ANN201 Missing return type annotation for public function `test_cache_disabled`
   --> tests\integration\test_ai_manager.py:330:15
    |
329 |     @pytest.mark.asyncio
330 |     async def test_cache_disabled(
    |               ^^^^^^^^^^^^^^^^^^^
331 |         self,
332 |         manager_with_mocked_providers,
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `manager_with_mocked_providers`
   --> tests\integration\test_ai_manager.py:332:9
    |
330 |     async def test_cache_disabled(
331 |         self,
332 |         manager_with_mocked_providers,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
333 |         mock_conversation_messages,
334 |         mock_ai_response,
    |

ANN001 Missing type annotation for function argument `mock_conversation_messages`
   --> tests\integration\test_ai_manager.py:333:9
    |
331 |         self,
332 |         manager_with_mocked_providers,
333 |         mock_conversation_messages,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^
334 |         mock_ai_response,
335 |     ):
    |

ANN001 Missing type annotation for function argument `mock_ai_response`
   --> tests\integration\test_ai_manager.py:334:9
    |
332 |         manager_with_mocked_providers,
333 |         mock_conversation_messages,
334 |         mock_ai_response,
    |         ^^^^^^^^^^^^^^^^
335 |     ):
336 |         """–¢–µ—Å—Ç –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∫–µ—à–∞."""
    |

ANN201 Missing return type annotation for public function `test_generate_simple_response`
   --> tests\integration\test_ai_manager.py:357:15
    |
356 |     @pytest.mark.asyncio
357 |     async def test_generate_simple_response(self, mock_ai_manager):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
358 |         """–¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Å—Ç–æ–≥–æ –æ—Ç–≤–µ—Ç–∞."""
359 |         response = await mock_ai_manager.generate_simple_response("–ü—Ä–∏–≤–µ—Ç!")
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_ai_manager`
   --> tests\integration\test_ai_manager.py:357:51
    |
356 |     @pytest.mark.asyncio
357 |     async def test_generate_simple_response(self, mock_ai_manager):
    |                                                   ^^^^^^^^^^^^^^^
358 |         """–¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Å—Ç–æ–≥–æ –æ—Ç–≤–µ—Ç–∞."""
359 |         response = await mock_ai_manager.generate_simple_response("–ü—Ä–∏–≤–µ—Ç!")
    |

ANN201 Missing return type annotation for public function `test_simple_response_with_parameters`
   --> tests\integration\test_ai_manager.py:365:15
    |
364 |     @pytest.mark.asyncio
365 |     async def test_simple_response_with_parameters(self, mock_ai_manager):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
366 |         """–¢–µ—Å—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏."""
367 |         custom_response = AIResponse(
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_ai_manager`
   --> tests\integration\test_ai_manager.py:365:58
    |
364 |     @pytest.mark.asyncio
365 |     async def test_simple_response_with_parameters(self, mock_ai_manager):
    |                                                          ^^^^^^^^^^^^^^^
366 |         """–¢–µ—Å—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏."""
367 |         custom_response = AIResponse(
    |

ANN201 Missing return type annotation for public function `test_manager_close`
   --> tests\integration\test_ai_manager.py:392:15
    |
391 |     @pytest.mark.asyncio
392 |     async def test_manager_close(self, manager_with_mocked_providers):
    |               ^^^^^^^^^^^^^^^^^^
393 |         """–¢–µ—Å—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞."""
394 |         manager, mock_openrouter, mock_deepseek = manager_with_mocked_providers
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `manager_with_mocked_providers`
   --> tests\integration\test_ai_manager.py:392:40
    |
391 |     @pytest.mark.asyncio
392 |     async def test_manager_close(self, manager_with_mocked_providers):
    |                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
393 |         """–¢–µ—Å—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞."""
394 |         manager, mock_openrouter, mock_deepseek = manager_with_mocked_providers
    |

ERA001 Found commented-out code
   --> tests\integration\test_ai_manager.py:410:5
    |
408 |     #             assert manager is not None
409 |     #             # –ú–µ–Ω–µ–¥–∂–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
410 |     #             assert hasattr(manager, '_providers')
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
help: Remove commented-out code

ANN201 Missing return type annotation for public function `test_invalid_messages_format`
   --> tests\integration\test_ai_manager.py:419:15
    |
418 |     @pytest.mark.asyncio
419 |     async def test_invalid_messages_format(self, mock_ai_manager):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
420 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π."""
421 |         # –ú–æ–∫ –¥–æ–ª–∂–µ–Ω –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –æ—à–∏–±–∫—É
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_ai_manager`
   --> tests\integration\test_ai_manager.py:419:50
    |
418 |     @pytest.mark.asyncio
419 |     async def test_invalid_messages_format(self, mock_ai_manager):
    |                                                  ^^^^^^^^^^^^^^^
420 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π."""
421 |         # –ú–æ–∫ –¥–æ–ª–∂–µ–Ω –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –æ—à–∏–±–∫—É
    |

ANN201 Missing return type annotation for public function `test_empty_messages_list`
   --> tests\integration\test_ai_manager.py:430:15
    |
429 |     @pytest.mark.asyncio
430 |     async def test_empty_messages_list(self, mock_ai_manager):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
431 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—É—Å—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π."""
432 |         # –ú–æ–∫ –¥–æ–ª–∂–µ–Ω –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –æ—à–∏–±–∫—É
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_ai_manager`
   --> tests\integration\test_ai_manager.py:430:46
    |
429 |     @pytest.mark.asyncio
430 |     async def test_empty_messages_list(self, mock_ai_manager):
    |                                              ^^^^^^^^^^^^^^^
431 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—É—Å—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π."""
432 |         # –ú–æ–∫ –¥–æ–ª–∂–µ–Ω –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –æ—à–∏–±–∫—É
    |

ANN201 Missing return type annotation for public function `test_authentication_error_handling`
   --> tests\integration\test_ai_manager.py:441:15
    |
440 |     @pytest.mark.asyncio
441 |     async def test_authentication_error_handling(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
442 |         self,
443 |         manager_with_mocked_providers,
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `manager_with_mocked_providers`
   --> tests\integration\test_ai_manager.py:443:9
    |
441 |     async def test_authentication_error_handling(
442 |         self,
443 |         manager_with_mocked_providers,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
444 |         mock_conversation_messages,
445 |     ):
    |

ANN001 Missing type annotation for function argument `mock_conversation_messages`
   --> tests\integration\test_ai_manager.py:444:9
    |
442 |         self,
443 |         manager_with_mocked_providers,
444 |         mock_conversation_messages,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^
445 |     ):
446 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏."""
    |

ANN201 Missing return type annotation for public function `test_mixed_error_handling`
   --> tests\integration\test_ai_manager.py:466:15
    |
465 |     @pytest.mark.asyncio
466 |     async def test_mixed_error_handling(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
467 |         self,
468 |         manager_with_mocked_providers,
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `manager_with_mocked_providers`
   --> tests\integration\test_ai_manager.py:468:9
    |
466 |     async def test_mixed_error_handling(
467 |         self,
468 |         manager_with_mocked_providers,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
469 |         mock_conversation_messages,
470 |         mock_ai_response,
    |

ANN001 Missing type annotation for function argument `mock_conversation_messages`
   --> tests\integration\test_ai_manager.py:469:9
    |
467 |         self,
468 |         manager_with_mocked_providers,
469 |         mock_conversation_messages,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^
470 |         mock_ai_response,
471 |     ):
    |

ANN001 Missing type annotation for function argument `mock_ai_response`
   --> tests\integration\test_ai_manager.py:470:9
    |
468 |         manager_with_mocked_providers,
469 |         mock_conversation_messages,
470 |         mock_ai_response,
    |         ^^^^^^^^^^^^^^^^
471 |     ):
472 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–º–µ—à–∞–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫."""
    |

ANN201 Missing return type annotation for public function `test_cache_init`
  --> tests\integration\test_ai_service.py:31:9
   |
29 |     """–¢–µ—Å—Ç—ã –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤."""
30 |
31 |     def test_cache_init(self):
   |         ^^^^^^^^^^^^^^^
32 |         """–¢–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–µ—à–∞."""
33 |         cache = ResponseCache(ttl_seconds=3600)
   |
help: Add return type annotation: `None`

SLF001 Private member accessed: `_ttl`
  --> tests\integration\test_ai_service.py:34:16
   |
32 |         """–¢–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–µ—à–∞."""
33 |         cache = ResponseCache(ttl_seconds=3600)
34 |         assert cache._ttl == 3600
   |                ^^^^^^^^^^
35 |         assert cache._cache == {}
   |

SLF001 Private member accessed: `_cache`
  --> tests\integration\test_ai_service.py:35:16
   |
33 |         cache = ResponseCache(ttl_seconds=3600)
34 |         assert cache._ttl == 3600
35 |         assert cache._cache == {}
   |                ^^^^^^^^^^^^
36 |
37 |     def test_cache_key_generation(self):
   |

ANN201 Missing return type annotation for public function `test_cache_key_generation`
  --> tests\integration\test_ai_service.py:37:9
   |
35 |         assert cache._cache == {}
36 |
37 |     def test_cache_key_generation(self):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^
38 |         """–¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–µ–π –∫–µ—à–∞."""
39 |         cache = ResponseCache()
   |
help: Add return type annotation: `None`

SLF001 Private member accessed: `_generate_key`
  --> tests\integration\test_ai_service.py:45:16
   |
43 |         ]
44 |
45 |         key1 = cache._generate_key(messages, "deepseek-chat")
   |                ^^^^^^^^^^^^^^^^^^^
46 |         key2 = cache._generate_key(messages, "deepseek-chat")
47 |         key3 = cache._generate_key(messages, "different-model")
   |

SLF001 Private member accessed: `_generate_key`
  --> tests\integration\test_ai_service.py:46:16
   |
45 |         key1 = cache._generate_key(messages, "deepseek-chat")
46 |         key2 = cache._generate_key(messages, "deepseek-chat")
   |                ^^^^^^^^^^^^^^^^^^^
47 |         key3 = cache._generate_key(messages, "different-model")
   |

SLF001 Private member accessed: `_generate_key`
  --> tests\integration\test_ai_service.py:47:16
   |
45 |         key1 = cache._generate_key(messages, "deepseek-chat")
46 |         key2 = cache._generate_key(messages, "deepseek-chat")
47 |         key3 = cache._generate_key(messages, "different-model")
   |                ^^^^^^^^^^^^^^^^^^^
48 |
49 |         assert key1 == key2  # –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è = –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∫–ª—é—á
   |

ANN201 Missing return type annotation for public function `test_cache_set_and_get`
  --> tests\integration\test_ai_service.py:53:9
   |
51 |         assert len(key1) == 32  # MD5 hash length
52 |
53 |     def test_cache_set_and_get(self):
   |         ^^^^^^^^^^^^^^^^^^^^^^
54 |         """–¢–µ—Å—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∑ –∫–µ—à–∞."""
55 |         cache = ResponseCache(ttl_seconds=3600)
   |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_cache_miss`
  --> tests\integration\test_ai_service.py:74:9
   |
72 |         assert cached_response.cached is True
73 |
74 |     def test_cache_miss(self):
   |         ^^^^^^^^^^^^^^^
75 |         """–¢–µ—Å—Ç –ø—Ä–æ–º–∞—Ö–∞ –∫–µ—à–∞."""
76 |         cache = ResponseCache()
   |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_cache_ttl_expiration`
  --> tests\integration\test_ai_service.py:82:9
   |
80 |         assert result is None
81 |
82 |     def test_cache_ttl_expiration(self):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^
83 |         """–¢–µ—Å—Ç –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –∫–µ—à–∞."""
84 |         cache = ResponseCache(ttl_seconds=1)
   |
help: Add return type annotation: `None`

SLF001 Private member accessed: `_cache`
   --> tests\integration\test_ai_service.py:100:9
    |
 99 |         # –ò–º–∏—Ç–∏—Ä—É–µ–º –∏—Å—Ç–µ—á–µ–Ω–∏–µ TTL
100 |         cache._cache[cache._generate_key(messages, "deepseek-chat")]["timestamp"] = (
    |         ^^^^^^^^^^^^
101 |             datetime.now() - timedelta(seconds=2)
102 |         )
    |

SLF001 Private member accessed: `_generate_key`
   --> tests\integration\test_ai_service.py:100:22
    |
 99 |         # –ò–º–∏—Ç–∏—Ä—É–µ–º –∏—Å—Ç–µ—á–µ–Ω–∏–µ TTL
100 |         cache._cache[cache._generate_key(messages, "deepseek-chat")]["timestamp"] = (
    |                      ^^^^^^^^^^^^^^^^^^^
101 |             datetime.now() - timedelta(seconds=2)
102 |         )
    |

DTZ005 `datetime.datetime.now()` called without a `tz` argument
   --> tests\integration\test_ai_service.py:101:13
    |
 99 |         # –ò–º–∏—Ç–∏—Ä—É–µ–º –∏—Å—Ç–µ—á–µ–Ω–∏–µ TTL
100 |         cache._cache[cache._generate_key(messages, "deepseek-chat")]["timestamp"] = (
101 |             datetime.now() - timedelta(seconds=2)
    |             ^^^^^^^^^^^^^^
102 |         )
    |
help: Pass a `datetime.timezone` object to the `tz` parameter

ANN201 Missing return type annotation for public function `test_cache_clear`
   --> tests\integration\test_ai_service.py:107:9
    |
105 |         assert cache.get(messages, "deepseek-chat") is None
106 |
107 |     def test_cache_clear(self):
    |         ^^^^^^^^^^^^^^^^
108 |         """–¢–µ—Å—Ç –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞."""
109 |         cache = ResponseCache()
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_message_creation`
   --> tests\integration\test_ai_service.py:128:9
    |
126 |     """–¢–µ—Å—Ç—ã –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π –¥–∏–∞–ª–æ–≥–∞."""
127 |
128 |     def test_message_creation(self):
    |         ^^^^^^^^^^^^^^^^^^^^^
129 |         """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è."""
130 |         msg = ConversationMessage(
    |
help: Add return type annotation: `None`

DTZ005 `datetime.datetime.now()` called without a `tz` argument
   --> tests\integration\test_ai_service.py:133:23
    |
131 |             role="user",
132 |             content="Hello world",
133 |             timestamp=datetime.now(),
    |                       ^^^^^^^^^^^^^^
134 |         )
    |
help: Pass a `datetime.timezone` object to the `tz` parameter

ANN201 Missing return type annotation for public function `test_message_without_timestamp`
   --> tests\integration\test_ai_service.py:140:9
    |
138 |         assert isinstance(msg.timestamp, datetime)
139 |
140 |     def test_message_without_timestamp(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
141 |         """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –±–µ–∑ –≤—Ä–µ–º–µ–Ω–∏."""
142 |         msg = ConversationMessage(role="assistant", content="Hi!")
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_response_creation`
   --> tests\integration\test_ai_service.py:152:9
    |
150 |     """–¢–µ—Å—Ç—ã –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–≤–µ—Ç–∞ AI."""
151 |
152 |     def test_response_creation(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^
153 |         """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ AI."""
154 |         response = AIResponse(
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_response_default_cached`
   --> tests\integration\test_ai_service.py:168:9
    |
166 |         assert response.cached is False
167 |
168 |     def test_response_default_cached(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
169 |         """–¢–µ—Å—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è cached."""
170 |         response = AIResponse(
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `ai_service`
   --> tests\integration\test_ai_service.py:185:9
    |
184 |     @pytest.fixture
185 |     def ai_service(self):
    |         ^^^^^^^^^^
186 |         """–§–∏–∫—Å—Ç—É—Ä–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è AI —Å–µ—Ä–≤–∏—Å–∞."""
187 |         return AIService()
    |
help: Add return type annotation

ANN201 Missing return type annotation for public function `mock_config`
   --> tests\integration\test_ai_service.py:190:9
    |
189 |     @pytest.fixture
190 |     def mock_config(self):
    |         ^^^^^^^^^^^
191 |         """–§–∏–∫—Å—Ç—É—Ä–∞ –¥–ª—è –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏."""
192 |         with patch("app.services.ai_service.get_config") as mock:
    |
help: Add return type annotation

ANN201 Missing return type annotation for public function `test_service_initialization`
   --> tests\integration\test_ai_service.py:204:15
    |
202 |             yield config
203 |
204 |     async def test_service_initialization(self, ai_service, mock_config):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
205 |         """–¢–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ AI —Å–µ—Ä–≤–∏—Å–∞."""
206 |         assert ai_service._client is None
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `ai_service`
   --> tests\integration\test_ai_service.py:204:49
    |
202 |             yield config
203 |
204 |     async def test_service_initialization(self, ai_service, mock_config):
    |                                                 ^^^^^^^^^^
205 |         """–¢–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ AI —Å–µ—Ä–≤–∏—Å–∞."""
206 |         assert ai_service._client is None
    |

ANN001 Missing type annotation for function argument `mock_config`
   --> tests\integration\test_ai_service.py:204:61
    |
202 |             yield config
203 |
204 |     async def test_service_initialization(self, ai_service, mock_config):
    |                                                             ^^^^^^^^^^^
205 |         """–¢–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ AI —Å–µ—Ä–≤–∏—Å–∞."""
206 |         assert ai_service._client is None
    |

ARG002 Unused method argument: `mock_config`
   --> tests\integration\test_ai_service.py:204:61
    |
202 |             yield config
203 |
204 |     async def test_service_initialization(self, ai_service, mock_config):
    |                                                             ^^^^^^^^^^^
205 |         """–¢–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ AI —Å–µ—Ä–≤–∏—Å–∞."""
206 |         assert ai_service._client is None
    |

SLF001 Private member accessed: `_client`
   --> tests\integration\test_ai_service.py:206:16
    |
204 |     async def test_service_initialization(self, ai_service, mock_config):
205 |         """–¢–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ AI —Å–µ—Ä–≤–∏—Å–∞."""
206 |         assert ai_service._client is None
    |                ^^^^^^^^^^^^^^^^^^
207 |         assert ai_service._cache is not None
208 |         assert ai_service._default_temperature == 0.7
    |

SLF001 Private member accessed: `_cache`
   --> tests\integration\test_ai_service.py:207:16
    |
205 |         """–¢–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ AI —Å–µ—Ä–≤–∏—Å–∞."""
206 |         assert ai_service._client is None
207 |         assert ai_service._cache is not None
    |                ^^^^^^^^^^^^^^^^^
208 |         assert ai_service._default_temperature == 0.7
209 |         assert ai_service._default_max_tokens == 1000
    |

SLF001 Private member accessed: `_default_temperature`
   --> tests\integration\test_ai_service.py:208:16
    |
206 |         assert ai_service._client is None
207 |         assert ai_service._cache is not None
208 |         assert ai_service._default_temperature == 0.7
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
209 |         assert ai_service._default_max_tokens == 1000
210 |         assert ai_service._timeout == 30
    |

SLF001 Private member accessed: `_default_max_tokens`
   --> tests\integration\test_ai_service.py:209:16
    |
207 |         assert ai_service._cache is not None
208 |         assert ai_service._default_temperature == 0.7
209 |         assert ai_service._default_max_tokens == 1000
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
210 |         assert ai_service._timeout == 30
    |

SLF001 Private member accessed: `_timeout`
   --> tests\integration\test_ai_service.py:210:16
    |
208 |         assert ai_service._default_temperature == 0.7
209 |         assert ai_service._default_max_tokens == 1000
210 |         assert ai_service._timeout == 30
    |                ^^^^^^^^^^^^^^^^^^^
211 |
212 |     async def test_get_client_creation(self, ai_service, mock_config):
    |

ANN201 Missing return type annotation for public function `test_get_client_creation`
   --> tests\integration\test_ai_service.py:212:15
    |
210 |         assert ai_service._timeout == 30
211 |
212 |     async def test_get_client_creation(self, ai_service, mock_config):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
213 |         """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è HTTP –∫–ª–∏–µ–Ω—Ç–∞."""
214 |         client = await ai_service._get_client()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `ai_service`
   --> tests\integration\test_ai_service.py:212:46
    |
210 |         assert ai_service._timeout == 30
211 |
212 |     async def test_get_client_creation(self, ai_service, mock_config):
    |                                              ^^^^^^^^^^
213 |         """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è HTTP –∫–ª–∏–µ–Ω—Ç–∞."""
214 |         client = await ai_service._get_client()
    |

ANN001 Missing type annotation for function argument `mock_config`
   --> tests\integration\test_ai_service.py:212:58
    |
210 |         assert ai_service._timeout == 30
211 |
212 |     async def test_get_client_creation(self, ai_service, mock_config):
    |                                                          ^^^^^^^^^^^
213 |         """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è HTTP –∫–ª–∏–µ–Ω—Ç–∞."""
214 |         client = await ai_service._get_client()
    |

ARG002 Unused method argument: `mock_config`
   --> tests\integration\test_ai_service.py:212:58
    |
210 |         assert ai_service._timeout == 30
211 |
212 |     async def test_get_client_creation(self, ai_service, mock_config):
    |                                                          ^^^^^^^^^^^
213 |         """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è HTTP –∫–ª–∏–µ–Ω—Ç–∞."""
214 |         client = await ai_service._get_client()
    |

SLF001 Private member accessed: `_get_client`
   --> tests\integration\test_ai_service.py:214:24
    |
212 |     async def test_get_client_creation(self, ai_service, mock_config):
213 |         """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è HTTP –∫–ª–∏–µ–Ω—Ç–∞."""
214 |         client = await ai_service._get_client()
    |                        ^^^^^^^^^^^^^^^^^^^^^^
215 |
216 |         assert client is not None
    |

SLF001 Private member accessed: `_client`
   --> tests\integration\test_ai_service.py:218:16
    |
216 |         assert client is not None
217 |         assert isinstance(client, httpx.AsyncClient)
218 |         assert ai_service._client is client
    |                ^^^^^^^^^^^^^^^^^^
219 |
220 |         # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–∑–æ–≤ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ—Ç –∂–µ –∫–ª–∏–µ–Ω—Ç
    |

SLF001 Private member accessed: `_get_client`
   --> tests\integration\test_ai_service.py:221:25
    |
220 |         # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–∑–æ–≤ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ—Ç –∂–µ –∫–ª–∏–µ–Ω—Ç
221 |         client2 = await ai_service._get_client()
    |                         ^^^^^^^^^^^^^^^^^^^^^^
222 |         assert client is client2
    |

ANN201 Missing return type annotation for public function `test_client_close`
   --> tests\integration\test_ai_service.py:224:15
    |
222 |         assert client is client2
223 |
224 |     async def test_client_close(self, ai_service, mock_config):
    |               ^^^^^^^^^^^^^^^^^
225 |         """–¢–µ—Å—Ç –∑–∞–∫—Ä—ã—Ç–∏—è HTTP –∫–ª–∏–µ–Ω—Ç–∞."""
226 |         await ai_service._get_client()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `ai_service`
   --> tests\integration\test_ai_service.py:224:39
    |
222 |         assert client is client2
223 |
224 |     async def test_client_close(self, ai_service, mock_config):
    |                                       ^^^^^^^^^^
225 |         """–¢–µ—Å—Ç –∑–∞–∫—Ä—ã—Ç–∏—è HTTP –∫–ª–∏–µ–Ω—Ç–∞."""
226 |         await ai_service._get_client()
    |

ANN001 Missing type annotation for function argument `mock_config`
   --> tests\integration\test_ai_service.py:224:51
    |
222 |         assert client is client2
223 |
224 |     async def test_client_close(self, ai_service, mock_config):
    |                                                   ^^^^^^^^^^^
225 |         """–¢–µ—Å—Ç –∑–∞–∫—Ä—ã—Ç–∏—è HTTP –∫–ª–∏–µ–Ω—Ç–∞."""
226 |         await ai_service._get_client()
    |

ARG002 Unused method argument: `mock_config`
   --> tests\integration\test_ai_service.py:224:51
    |
222 |         assert client is client2
223 |
224 |     async def test_client_close(self, ai_service, mock_config):
    |                                                   ^^^^^^^^^^^
225 |         """–¢–µ—Å—Ç –∑–∞–∫—Ä—ã—Ç–∏—è HTTP –∫–ª–∏–µ–Ω—Ç–∞."""
226 |         await ai_service._get_client()
    |

SLF001 Private member accessed: `_get_client`
   --> tests\integration\test_ai_service.py:226:15
    |
224 |     async def test_client_close(self, ai_service, mock_config):
225 |         """–¢–µ—Å—Ç –∑–∞–∫—Ä—ã—Ç–∏—è HTTP –∫–ª–∏–µ–Ω—Ç–∞."""
226 |         await ai_service._get_client()
    |               ^^^^^^^^^^^^^^^^^^^^^^
227 |         assert ai_service._client is not None
    |

SLF001 Private member accessed: `_client`
   --> tests\integration\test_ai_service.py:227:16
    |
225 |         """–¢–µ—Å—Ç –∑–∞–∫—Ä—ã—Ç–∏—è HTTP –∫–ª–∏–µ–Ω—Ç–∞."""
226 |         await ai_service._get_client()
227 |         assert ai_service._client is not None
    |                ^^^^^^^^^^^^^^^^^^
228 |
229 |         await ai_service.close()
    |

SLF001 Private member accessed: `_client`
   --> tests\integration\test_ai_service.py:230:16
    |
229 |         await ai_service.close()
230 |         assert ai_service._client is None
    |                ^^^^^^^^^^^^^^^^^^
231 |
232 |     def test_prepare_messages(self, ai_service):
    |

ANN201 Missing return type annotation for public function `test_prepare_messages`
   --> tests\integration\test_ai_service.py:232:9
    |
230 |         assert ai_service._client is None
231 |
232 |     def test_prepare_messages(self, ai_service):
    |         ^^^^^^^^^^^^^^^^^^^^^
233 |         """–¢–µ—Å—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è API."""
234 |         messages = [
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `ai_service`
   --> tests\integration\test_ai_service.py:232:37
    |
230 |         assert ai_service._client is None
231 |
232 |     def test_prepare_messages(self, ai_service):
    |                                     ^^^^^^^^^^
233 |         """–¢–µ—Å—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è API."""
234 |         messages = [
    |

SLF001 Private member accessed: `_prepare_messages`
   --> tests\integration\test_ai_service.py:240:20
    |
238 |         ]
239 |
240 |         prepared = ai_service._prepare_messages(messages)
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
241 |
242 |         assert len(prepared) == 3
    |

ANN201 Missing return type annotation for public function `test_generate_response_validation`
   --> tests\integration\test_ai_service.py:247:15
    |
245 |         assert prepared[2] == {"role": "user", "content": "How are you?"}
246 |
247 |     async def test_generate_response_validation(self, ai_service, mock_config):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
248 |         """–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞."""
249 |         # –¢–µ—Å—Ç –ø—É—Å—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `ai_service`
   --> tests\integration\test_ai_service.py:247:55
    |
245 |         assert prepared[2] == {"role": "user", "content": "How are you?"}
246 |
247 |     async def test_generate_response_validation(self, ai_service, mock_config):
    |                                                       ^^^^^^^^^^
248 |         """–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞."""
249 |         # –¢–µ—Å—Ç –ø—É—Å—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
    |

ANN001 Missing type annotation for function argument `mock_config`
   --> tests\integration\test_ai_service.py:247:67
    |
245 |         assert prepared[2] == {"role": "user", "content": "How are you?"}
246 |
247 |     async def test_generate_response_validation(self, ai_service, mock_config):
    |                                                                   ^^^^^^^^^^^
248 |         """–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞."""
249 |         # –¢–µ—Å—Ç –ø—É—Å—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
    |

ARG002 Unused method argument: `mock_config`
   --> tests\integration\test_ai_service.py:247:67
    |
245 |         assert prepared[2] == {"role": "user", "content": "How are you?"}
246 |
247 |     async def test_generate_response_validation(self, ai_service, mock_config):
    |                                                                   ^^^^^^^^^^^
248 |         """–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞."""
249 |         # –¢–µ—Å—Ç –ø—É—Å—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
    |

ANN201 Missing return type annotation for public function `test_generate_response_success`
   --> tests\integration\test_ai_service.py:264:15
    |
263 |     @patch("app.services.ai_service.AIService._make_api_request")
264 |     async def test_generate_response_success(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
265 |         self,
266 |         mock_api_request,
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_api_request`
   --> tests\integration\test_ai_service.py:266:9
    |
264 |     async def test_generate_response_success(
265 |         self,
266 |         mock_api_request,
    |         ^^^^^^^^^^^^^^^^
267 |         ai_service,
268 |         mock_config,
    |

ANN001 Missing type annotation for function argument `ai_service`
   --> tests\integration\test_ai_service.py:267:9
    |
265 |         self,
266 |         mock_api_request,
267 |         ai_service,
    |         ^^^^^^^^^^
268 |         mock_config,
269 |     ):
    |

ANN001 Missing type annotation for function argument `mock_config`
   --> tests\integration\test_ai_service.py:268:9
    |
266 |         mock_api_request,
267 |         ai_service,
268 |         mock_config,
    |         ^^^^^^^^^^^
269 |     ):
270 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞."""
    |

ARG002 Unused method argument: `mock_config`
   --> tests\integration\test_ai_service.py:268:9
    |
266 |         mock_api_request,
267 |         ai_service,
268 |         mock_config,
    |         ^^^^^^^^^^^
269 |     ):
270 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞."""
    |

ANN201 Missing return type annotation for public function `test_generate_response_with_cache`
   --> tests\integration\test_ai_service.py:295:15
    |
294 |     @patch("app.services.ai_service.AIService._make_api_request")
295 |     async def test_generate_response_with_cache(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
296 |         self,
297 |         mock_api_request,
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_api_request`
   --> tests\integration\test_ai_service.py:297:9
    |
295 |     async def test_generate_response_with_cache(
296 |         self,
297 |         mock_api_request,
    |         ^^^^^^^^^^^^^^^^
298 |         ai_service,
299 |         mock_config,
    |

ANN001 Missing type annotation for function argument `ai_service`
   --> tests\integration\test_ai_service.py:298:9
    |
296 |         self,
297 |         mock_api_request,
298 |         ai_service,
    |         ^^^^^^^^^^
299 |         mock_config,
300 |     ):
    |

ANN001 Missing type annotation for function argument `mock_config`
   --> tests\integration\test_ai_service.py:299:9
    |
297 |         mock_api_request,
298 |         ai_service,
299 |         mock_config,
    |         ^^^^^^^^^^^
300 |     ):
301 |         """–¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º."""
    |

ARG002 Unused method argument: `mock_config`
   --> tests\integration\test_ai_service.py:299:9
    |
297 |         mock_api_request,
298 |         ai_service,
299 |         mock_config,
    |         ^^^^^^^^^^^
300 |     ):
301 |         """–¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º."""
    |

ANN201 Missing return type annotation for public function `test_generate_simple_response`
   --> tests\integration\test_ai_service.py:329:15
    |
327 |         assert response2.content == "–ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç"
328 |
329 |     async def test_generate_simple_response(self, ai_service, mock_config):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
330 |         """–¢–µ—Å—Ç —É–ø—Ä–æ—â–µ–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞."""
331 |         with patch.object(ai_service, "generate_response") as mock_generate:
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `ai_service`
   --> tests\integration\test_ai_service.py:329:51
    |
327 |         assert response2.content == "–ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç"
328 |
329 |     async def test_generate_simple_response(self, ai_service, mock_config):
    |                                                   ^^^^^^^^^^
330 |         """–¢–µ—Å—Ç —É–ø—Ä–æ—â–µ–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞."""
331 |         with patch.object(ai_service, "generate_response") as mock_generate:
    |

ANN001 Missing type annotation for function argument `mock_config`
   --> tests\integration\test_ai_service.py:329:63
    |
327 |         assert response2.content == "–ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç"
328 |
329 |     async def test_generate_simple_response(self, ai_service, mock_config):
    |                                                               ^^^^^^^^^^^
330 |         """–¢–µ—Å—Ç —É–ø—Ä–æ—â–µ–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞."""
331 |         with patch.object(ai_service, "generate_response") as mock_generate:
    |

ARG002 Unused method argument: `mock_config`
   --> tests\integration\test_ai_service.py:329:63
    |
327 |         assert response2.content == "–ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç"
328 |
329 |     async def test_generate_simple_response(self, ai_service, mock_config):
    |                                                               ^^^^^^^^^^^
330 |         """–¢–µ—Å—Ç —É–ø—Ä–æ—â–µ–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞."""
331 |         with patch.object(ai_service, "generate_response") as mock_generate:
    |

F841 Local variable `response` is assigned to but never used
   --> tests\integration\test_ai_service.py:339:13
    |
337 |             )
338 |
339 |             response = await ai_service.generate_simple_response("–ü—Ä–∏–≤–µ—Ç")
    |             ^^^^^^^^
340 |
341 |             # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—ã–∑–≤–∞–ª—Å—è generate_response —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
    |
help: Remove assignment to unused variable `response`

ANN201 Missing return type annotation for public function `test_clear_cache`
   --> tests\integration\test_ai_service.py:352:9
    |
350 |             assert messages[1].content == "–ü—Ä–∏–≤–µ—Ç"
351 |
352 |     def test_clear_cache(self, ai_service):
    |         ^^^^^^^^^^^^^^^^
353 |         """–¢–µ—Å—Ç –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞ —Å–µ—Ä–≤–∏—Å–∞."""
354 |         # –î–æ–±–∞–≤–ª—è–µ–º —á—Ç–æ-—Ç–æ –≤ –∫–µ—à
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `ai_service`
   --> tests\integration\test_ai_service.py:352:32
    |
350 |             assert messages[1].content == "–ü—Ä–∏–≤–µ—Ç"
351 |
352 |     def test_clear_cache(self, ai_service):
    |                                ^^^^^^^^^^
353 |         """–¢–µ—Å—Ç –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞ —Å–µ—Ä–≤–∏—Å–∞."""
354 |         # –î–æ–±–∞–≤–ª—è–µ–º —á—Ç–æ-—Ç–æ –≤ –∫–µ—à
    |

SLF001 Private member accessed: `_cache`
   --> tests\integration\test_ai_service.py:355:9
    |
353 |         """–¢–µ—Å—Ç –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞ —Å–µ—Ä–≤–∏—Å–∞."""
354 |         # –î–æ–±–∞–≤–ª—è–µ–º —á—Ç–æ-—Ç–æ –≤ –∫–µ—à
355 |         ai_service._cache._cache["test"] = {"data": "test"}
    |         ^^^^^^^^^^^^^^^^^
356 |
357 |         # –û—á–∏—â–∞–µ–º –∫–µ—à
    |

SLF001 Private member accessed: `_cache`
   --> tests\integration\test_ai_service.py:355:9
    |
353 |         """–¢–µ—Å—Ç –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞ —Å–µ—Ä–≤–∏—Å–∞."""
354 |         # –î–æ–±–∞–≤–ª—è–µ–º —á—Ç–æ-—Ç–æ –≤ –∫–µ—à
355 |         ai_service._cache._cache["test"] = {"data": "test"}
    |         ^^^^^^^^^^^^^^^^^^^^^^^^
356 |
357 |         # –û—á–∏—â–∞–µ–º –∫–µ—à
    |

SLF001 Private member accessed: `_cache`
   --> tests\integration\test_ai_service.py:361:16
    |
360 |         # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–µ—à –ø—É—Å—Ç
361 |         assert ai_service._cache._cache == {}
    |                ^^^^^^^^^^^^^^^^^
362 |
363 |     @patch("app.services.ai_service.AIService.generate_response")
    |

SLF001 Private member accessed: `_cache`
   --> tests\integration\test_ai_service.py:361:16
    |
360 |         # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–µ—à –ø—É—Å—Ç
361 |         assert ai_service._cache._cache == {}
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
362 |
363 |     @patch("app.services.ai_service.AIService.generate_response")
    |

ANN201 Missing return type annotation for public function `test_health_check_healthy`
   --> tests\integration\test_ai_service.py:364:15
    |
363 |     @patch("app.services.ai_service.AIService.generate_response")
364 |     async def test_health_check_healthy(self, mock_generate, ai_service, mock_config):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
365 |         """–¢–µ—Å—Ç health check –ø—Ä–∏ —Ä–∞–±–æ—Ç–∞—é—â–µ–º —Å–µ—Ä–≤–∏—Å–µ."""
366 |         mock_generate.return_value = AIResponse(
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_generate`
   --> tests\integration\test_ai_service.py:364:47
    |
363 |     @patch("app.services.ai_service.AIService.generate_response")
364 |     async def test_health_check_healthy(self, mock_generate, ai_service, mock_config):
    |                                               ^^^^^^^^^^^^^
365 |         """–¢–µ—Å—Ç health check –ø—Ä–∏ —Ä–∞–±–æ—Ç–∞—é—â–µ–º —Å–µ—Ä–≤–∏—Å–µ."""
366 |         mock_generate.return_value = AIResponse(
    |

ANN001 Missing type annotation for function argument `ai_service`
   --> tests\integration\test_ai_service.py:364:62
    |
363 |     @patch("app.services.ai_service.AIService.generate_response")
364 |     async def test_health_check_healthy(self, mock_generate, ai_service, mock_config):
    |                                                              ^^^^^^^^^^
365 |         """–¢–µ—Å—Ç health check –ø—Ä–∏ —Ä–∞–±–æ—Ç–∞—é—â–µ–º —Å–µ—Ä–≤–∏—Å–µ."""
366 |         mock_generate.return_value = AIResponse(
    |

ANN001 Missing type annotation for function argument `mock_config`
   --> tests\integration\test_ai_service.py:364:74
    |
363 |     @patch("app.services.ai_service.AIService.generate_response")
364 |     async def test_health_check_healthy(self, mock_generate, ai_service, mock_config):
    |                                                                          ^^^^^^^^^^^
365 |         """–¢–µ—Å—Ç health check –ø—Ä–∏ —Ä–∞–±–æ—Ç–∞—é—â–µ–º —Å–µ—Ä–≤–∏—Å–µ."""
366 |         mock_generate.return_value = AIResponse(
    |

ARG002 Unused method argument: `mock_config`
   --> tests\integration\test_ai_service.py:364:74
    |
363 |     @patch("app.services.ai_service.AIService.generate_response")
364 |     async def test_health_check_healthy(self, mock_generate, ai_service, mock_config):
    |                                                                          ^^^^^^^^^^^
365 |         """–¢–µ—Å—Ç health check –ø—Ä–∏ —Ä–∞–±–æ—Ç–∞—é—â–µ–º —Å–µ—Ä–≤–∏—Å–µ."""
366 |         mock_generate.return_value = AIResponse(
    |

ANN201 Missing return type annotation for public function `test_health_check_unhealthy`
   --> tests\integration\test_ai_service.py:381:15
    |
380 |     @patch("app.services.ai_service.AIService.generate_response")
381 |     async def test_health_check_unhealthy(self, mock_generate, ai_service, mock_config):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
382 |         """–¢–µ—Å—Ç health check –ø—Ä–∏ –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–µ–º —Å–µ—Ä–≤–∏—Å–µ."""
383 |         mock_generate.side_effect = APIConnectionError("Connection failed")
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_generate`
   --> tests\integration\test_ai_service.py:381:49
    |
380 |     @patch("app.services.ai_service.AIService.generate_response")
381 |     async def test_health_check_unhealthy(self, mock_generate, ai_service, mock_config):
    |                                                 ^^^^^^^^^^^^^
382 |         """–¢–µ—Å—Ç health check –ø—Ä–∏ –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–µ–º —Å–µ—Ä–≤–∏—Å–µ."""
383 |         mock_generate.side_effect = APIConnectionError("Connection failed")
    |

ANN001 Missing type annotation for function argument `ai_service`
   --> tests\integration\test_ai_service.py:381:64
    |
380 |     @patch("app.services.ai_service.AIService.generate_response")
381 |     async def test_health_check_unhealthy(self, mock_generate, ai_service, mock_config):
    |                                                                ^^^^^^^^^^
382 |         """–¢–µ—Å—Ç health check –ø—Ä–∏ –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–µ–º —Å–µ—Ä–≤–∏—Å–µ."""
383 |         mock_generate.side_effect = APIConnectionError("Connection failed")
    |

ANN001 Missing type annotation for function argument `mock_config`
   --> tests\integration\test_ai_service.py:381:76
    |
380 |     @patch("app.services.ai_service.AIService.generate_response")
381 |     async def test_health_check_unhealthy(self, mock_generate, ai_service, mock_config):
    |                                                                            ^^^^^^^^^^^
382 |         """–¢–µ—Å—Ç health check –ø—Ä–∏ –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–µ–º —Å–µ—Ä–≤–∏—Å–µ."""
383 |         mock_generate.side_effect = APIConnectionError("Connection failed")
    |

ARG002 Unused method argument: `mock_config`
   --> tests\integration\test_ai_service.py:381:76
    |
380 |     @patch("app.services.ai_service.AIService.generate_response")
381 |     async def test_health_check_unhealthy(self, mock_generate, ai_service, mock_config):
    |                                                                            ^^^^^^^^^^^
382 |         """–¢–µ—Å—Ç health check –ø—Ä–∏ –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–µ–º —Å–µ—Ä–≤–∏—Å–µ."""
383 |         mock_generate.side_effect = APIConnectionError("Connection failed")
    |

ANN201 Missing return type annotation for public function `test_error_hierarchy`
   --> tests\integration\test_ai_service.py:395:9
    |
393 |     """–¢–µ—Å—Ç—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ AI —Å–µ—Ä–≤–∏—Å–∞."""
394 |
395 |     def test_error_hierarchy(self):
    |         ^^^^^^^^^^^^^^^^^^^^
396 |         """–¢–µ—Å—Ç –∏–µ—Ä–∞—Ä—Ö–∏–∏ –æ—à–∏–±–æ–∫."""
397 |         # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_get_ai_service_singleton`
   --> tests\integration\test_ai_service.py:417:15
    |
415 |     """–¢–µ—Å—Ç—ã –¥–ª—è singleton pattern AI —Å–µ—Ä–≤–∏—Å–∞."""
416 |
417 |     async def test_get_ai_service_singleton(self):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
418 |         """–¢–µ—Å—Ç singleton behavior –¥–ª—è get_ai_service."""
419 |         # –û—á–∏—â–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –µ—Å–ª–∏ –µ—Å—Ç—å
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_close_ai_service`
   --> tests\integration\test_ai_service.py:430:15
    |
428 |         await close_ai_service()
429 |
430 |     async def test_close_ai_service(self):
    |               ^^^^^^^^^^^^^^^^^^^^^
431 |         """–¢–µ—Å—Ç –∑–∞–∫—Ä—ã—Ç–∏—è AI —Å–µ—Ä–≤–∏—Å–∞."""
432 |         service = get_ai_service()
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_real_api_call`
   --> tests\integration\test_ai_service.py:450:15
    |
449 |     @pytest.mark.skip(reason="–¢—Ä–µ–±—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π API –∫–ª—é—á")
450 |     async def test_real_api_call(self):
    |               ^^^^^^^^^^^^^^^^^^
451 |         """–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º API (—Ç—Ä–µ–±—É–µ—Ç API –∫–ª—é—á)."""
452 |         service = AIService()
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_create_engine_success`
  --> tests\integration\test_database.py:35:15
   |
33 |     @patch("app.database.get_config")
34 |     @patch("app.database.create_async_engine")
35 |     async def test_create_engine_success(
   |               ^^^^^^^^^^^^^^^^^^^^^^^^^^
36 |         self,
37 |         mock_create_async_engine,
   |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_create_async_engine`
  --> tests\integration\test_database.py:37:9
   |
35 |     async def test_create_engine_success(
36 |         self,
37 |         mock_create_async_engine,
   |         ^^^^^^^^^^^^^^^^^^^^^^^^
38 |         mock_get_config,
39 |     ):
   |

ANN001 Missing type annotation for function argument `mock_get_config`
  --> tests\integration\test_database.py:38:9
   |
36 |         self,
37 |         mock_create_async_engine,
38 |         mock_get_config,
   |         ^^^^^^^^^^^^^^^
39 |     ):
40 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –¥–≤–∏–∂–∫–∞ –ë–î."""
   |

ANN201 Missing return type annotation for public function `test_create_engine_debug_mode`
  --> tests\integration\test_database.py:74:15
   |
73 |     @patch("app.database.get_config")
74 |     async def test_create_engine_debug_mode(self, mock_get_config):
   |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
75 |         """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –¥–≤–∏–∂–∫–∞ –≤ debug —Ä–µ–∂–∏–º–µ."""
76 |         mock_config = MagicMock()
   |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_get_config`
  --> tests\integration\test_database.py:74:51
   |
73 |     @patch("app.database.get_config")
74 |     async def test_create_engine_debug_mode(self, mock_get_config):
   |                                                   ^^^^^^^^^^^^^^^
75 |         """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –¥–≤–∏–∂–∫–∞ –≤ debug —Ä–µ–∂–∏–º–µ."""
76 |         mock_config = MagicMock()
   |

ANN201 Missing return type annotation for public function `test_create_session_factory`
  --> tests\integration\test_database.py:94:15
   |
92 |             assert call_args["echo_pool"] is True
93 |
94 |     async def test_create_session_factory(self):
   |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
95 |         """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–±—Ä–∏–∫–∏ —Å–µ—Å—Å–∏–π."""
96 |         mock_engine = MagicMock(spec=AsyncEngine)
   |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_init_db_success`
   --> tests\integration\test_database.py:122:15
    |
120 |     @patch("app.database.create_session_factory")
121 |     @patch("app.database.check_connection")
122 |     async def test_init_db_success(
    |               ^^^^^^^^^^^^^^^^^^^^
123 |         self,
124 |         mock_check_conn,
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_check_conn`
   --> tests\integration\test_database.py:124:9
    |
122 |     async def test_init_db_success(
123 |         self,
124 |         mock_check_conn,
    |         ^^^^^^^^^^^^^^^
125 |         mock_create_factory,
126 |         mock_create_engine,
    |

ANN001 Missing type annotation for function argument `mock_create_factory`
   --> tests\integration\test_database.py:125:9
    |
123 |         self,
124 |         mock_check_conn,
125 |         mock_create_factory,
    |         ^^^^^^^^^^^^^^^^^^^
126 |         mock_create_engine,
127 |         mock_get_config,
    |

ANN001 Missing type annotation for function argument `mock_create_engine`
   --> tests\integration\test_database.py:126:9
    |
124 |         mock_check_conn,
125 |         mock_create_factory,
126 |         mock_create_engine,
    |         ^^^^^^^^^^^^^^^^^^
127 |         mock_get_config,
128 |     ):
    |

ANN001 Missing type annotation for function argument `mock_get_config`
   --> tests\integration\test_database.py:127:9
    |
125 |         mock_create_factory,
126 |         mock_create_engine,
127 |         mock_get_config,
    |         ^^^^^^^^^^^^^^^
128 |     ):
129 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î."""
    |

ANN201 Missing return type annotation for public function `test_init_db_failure`
   --> tests\integration\test_database.py:154:15
    |
152 |     @patch("app.database.get_config")
153 |     @patch("app.database.create_engine")
154 |     async def test_init_db_failure(self, mock_create_engine, mock_get_config):
    |               ^^^^^^^^^^^^^^^^^^^^
155 |         """–¢–µ—Å—Ç –Ω–µ—É–¥–∞—á–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î."""
156 |         # –ú–æ–∫–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_create_engine`
   --> tests\integration\test_database.py:154:42
    |
152 |     @patch("app.database.get_config")
153 |     @patch("app.database.create_engine")
154 |     async def test_init_db_failure(self, mock_create_engine, mock_get_config):
    |                                          ^^^^^^^^^^^^^^^^^^
155 |         """–¢–µ—Å—Ç –Ω–µ—É–¥–∞—á–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î."""
156 |         # –ú–æ–∫–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
    |

ANN001 Missing type annotation for function argument `mock_get_config`
   --> tests\integration\test_database.py:154:62
    |
152 |     @patch("app.database.get_config")
153 |     @patch("app.database.create_engine")
154 |     async def test_init_db_failure(self, mock_create_engine, mock_get_config):
    |                                                              ^^^^^^^^^^^^^^^
155 |         """–¢–µ—Å—Ç –Ω–µ—É–¥–∞—á–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î."""
156 |         # –ú–æ–∫–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
    |

ANN201 Missing return type annotation for public function `test_close_db_success`
   --> tests\integration\test_database.py:172:15
    |
171 |     @patch("app.database._engine")
172 |     async def test_close_db_success(self, mock_engine):
    |               ^^^^^^^^^^^^^^^^^^^^^
173 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –ë–î."""
174 |         mock_engine_instance = AsyncMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_engine`
   --> tests\integration\test_database.py:172:43
    |
171 |     @patch("app.database._engine")
172 |     async def test_close_db_success(self, mock_engine):
    |                                           ^^^^^^^^^^^
173 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –ë–î."""
174 |         mock_engine_instance = AsyncMock()
    |

F841 Local variable `mock_engine` is assigned to but never used
   --> tests\integration\test_database.py:175:9
    |
173 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –ë–î."""
174 |         mock_engine_instance = AsyncMock()
175 |         mock_engine = mock_engine_instance
    |         ^^^^^^^^^^^
176 |
177 |         with patch("app.database._engine", mock_engine_instance):
    |
help: Remove assignment to unused variable `mock_engine`

ANN201 Missing return type annotation for public function `test_close_db_no_engine`
   --> tests\integration\test_database.py:182:15
    |
180 |             mock_engine_instance.dispose.assert_called_once()
181 |
182 |     async def test_close_db_no_engine(self):
    |               ^^^^^^^^^^^^^^^^^^^^^^^
183 |         """–¢–µ—Å—Ç –∑–∞–∫—Ä—ã—Ç–∏—è –ë–î –∫–æ–≥–¥–∞ –¥–≤–∏–∂–æ–∫ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω."""
184 |         with patch("app.database._engine", None):
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_check_connection_success`
   --> tests\integration\test_database.py:194:15
    |
193 |     @patch("app.database.get_session")
194 |     async def test_check_connection_success(self, mock_get_session):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
195 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è."""
196 |         # –ú–æ–∫–∏—Ä—É–µ–º —Å–µ—Å—Å–∏—é –∏ –µ—ë –º–µ—Ç–æ–¥—ã
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_get_session`
   --> tests\integration\test_database.py:194:51
    |
193 |     @patch("app.database.get_session")
194 |     async def test_check_connection_success(self, mock_get_session):
    |                                                   ^^^^^^^^^^^^^^^^
195 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è."""
196 |         # –ú–æ–∫–∏—Ä—É–µ–º —Å–µ—Å—Å–∏—é –∏ –µ—ë –º–µ—Ç–æ–¥—ã
    |

ANN201 Missing return type annotation for public function `test_check_connection_failure`
   --> tests\integration\test_database.py:212:15
    |
211 |     @patch("app.database.get_session")
212 |     async def test_check_connection_failure(self, mock_get_session):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
213 |         """–¢–µ—Å—Ç –Ω–µ—É–¥–∞—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è."""
214 |         # –ú–æ–∫–∏—Ä—É–µ–º –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_get_session`
   --> tests\integration\test_database.py:212:51
    |
211 |     @patch("app.database.get_session")
212 |     async def test_check_connection_failure(self, mock_get_session):
    |                                                   ^^^^^^^^^^^^^^^^
213 |         """–¢–µ—Å—Ç –Ω–µ—É–¥–∞—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è."""
214 |         # –ú–æ–∫–∏—Ä—É–µ–º –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞
    |

ANN201 Missing return type annotation for public function `test_get_engine_success`
   --> tests\integration\test_database.py:230:9
    |
228 |     """–¢–µ—Å—Ç—ã –¥–ª—è getter —Ñ—É–Ω–∫—Ü–∏–π –ë–î."""
229 |
230 |     def test_get_engine_success(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^
231 |         """–¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –¥–≤–∏–∂–∫–∞ –∫–æ–≥–¥–∞ –æ–Ω –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω."""
232 |         mock_engine = MagicMock()
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_get_engine_not_initialized`
   --> tests\integration\test_database.py:238:9
    |
236 |             assert engine == mock_engine
237 |
238 |     def test_get_engine_not_initialized(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
239 |         """–¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –¥–≤–∏–∂–∫–∞ –∫–æ–≥–¥–∞ –æ–Ω –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω."""
240 |         with patch("app.database._engine", None):
    |
help: Add return type annotation: `None`

SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
   --> tests\integration\test_database.py:240:9
    |
238 |       def test_get_engine_not_initialized(self):
239 |           """–¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –¥–≤–∏–∂–∫–∞ –∫–æ–≥–¥–∞ –æ–Ω –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω."""
240 | /         with patch("app.database._engine", None):
241 | |             with pytest.raises(RuntimeError, match="–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞"):
    | |______________________________________________________________________________________^
242 |                   get_engine()
    |
help: Combine `with` statements

ANN201 Missing return type annotation for public function `test_get_session_factory_success`
   --> tests\integration\test_database.py:244:9
    |
242 |                 get_engine()
243 |
244 |     def test_get_session_factory_success(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
245 |         """–¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–∞–±—Ä–∏–∫–∏ —Å–µ—Å—Å–∏–π –∫–æ–≥–¥–∞ –æ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞."""
246 |         mock_factory = MagicMock()
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_get_session_factory_not_initialized`
   --> tests\integration\test_database.py:252:9
    |
250 |             assert factory == mock_factory
251 |
252 |     def test_get_session_factory_not_initialized(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
253 |         """–¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–∞–±—Ä–∏–∫–∏ —Å–µ—Å—Å–∏–π –∫–æ–≥–¥–∞ –æ–Ω–∞ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞."""
254 |         with patch("app.database._session_factory", None):
    |
help: Add return type annotation: `None`

SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
   --> tests\integration\test_database.py:254:9
    |
252 |       def test_get_session_factory_not_initialized(self):
253 |           """–¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–∞–±—Ä–∏–∫–∏ —Å–µ—Å—Å–∏–π –∫–æ–≥–¥–∞ –æ–Ω–∞ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞."""
254 | /         with patch("app.database._session_factory", None):
255 | |             with pytest.raises(RuntimeError, match="–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞"):
    | |______________________________________________________________________________________^
256 |                   get_session_factory()
    |
help: Combine `with` statements

ANN201 Missing return type annotation for public function `test_get_session_success`
   --> tests\integration\test_database.py:264:15
    |
263 |     @patch("app.database.get_session_factory")
264 |     async def test_get_session_success(self, mock_get_factory):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
265 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏."""
266 |         # –ú–æ–∫–∏—Ä—É–µ–º —Ñ–∞–±—Ä–∏–∫—É –∏ —Å–µ—Å—Å–∏—é
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_get_factory`
   --> tests\integration\test_database.py:264:46
    |
263 |     @patch("app.database.get_session_factory")
264 |     async def test_get_session_success(self, mock_get_factory):
    |                                              ^^^^^^^^^^^^^^^^
265 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏."""
266 |         # –ú–æ–∫–∏—Ä—É–µ–º —Ñ–∞–±—Ä–∏–∫—É –∏ —Å–µ—Å—Å–∏—é
    |

ANN201 Missing return type annotation for public function `test_get_session_rollback_on_error`
   --> tests\integration\test_database.py:281:15
    |
280 |     @patch("app.database.get_session_factory")
281 |     async def test_get_session_rollback_on_error(self, mock_get_factory):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
282 |         """–¢–µ—Å—Ç rollback –ø—Ä–∏ –æ—à–∏–±–∫–µ –≤ —Å–µ—Å—Å–∏–∏."""
283 |         mock_session = AsyncMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_get_factory`
   --> tests\integration\test_database.py:281:56
    |
280 |     @patch("app.database.get_session_factory")
281 |     async def test_get_session_rollback_on_error(self, mock_get_factory):
    |                                                        ^^^^^^^^^^^^^^^^
282 |         """–¢–µ—Å—Ç rollback –ø—Ä–∏ –æ—à–∏–±–∫–µ –≤ —Å–µ—Å—Å–∏–∏."""
283 |         mock_session = AsyncMock()
    |

F841 Local variable `session` is assigned to but never used
   --> tests\integration\test_database.py:292:41
    |
291 |         with pytest.raises(SQLAlchemyError):
292 |             async with get_session() as session:
    |                                         ^^^^^^^
293 |                 pass  # –û—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–Ω–µ—Ç –ø—Ä–∏ commit
    |
help: Remove assignment to unused variable `session`

ANN201 Missing return type annotation for public function `test_get_session_rollback_on_exception`
   --> tests\integration\test_database.py:300:15
    |
299 |     @patch("app.database.get_session_factory")
300 |     async def test_get_session_rollback_on_exception(self, mock_get_factory):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
301 |         """–¢–µ—Å—Ç rollback –ø—Ä–∏ –æ–±—â–µ–º –∏—Å–∫–ª—é—á–µ–Ω–∏–∏."""
302 |         mock_session = AsyncMock()
    |
help: Add return type annotation: `Never`

ANN001 Missing type annotation for function argument `mock_get_factory`
   --> tests\integration\test_database.py:300:60
    |
299 |     @patch("app.database.get_session_factory")
300 |     async def test_get_session_rollback_on_exception(self, mock_get_factory):
    |                                                            ^^^^^^^^^^^^^^^^
301 |         """–¢–µ—Å—Ç rollback –ø—Ä–∏ –æ–±—â–µ–º –∏—Å–∫–ª—é—á–µ–Ω–∏–∏."""
302 |         mock_session = AsyncMock()
    |

PT011 `pytest.raises(ValueError)` is too broad, set the `match` parameter or use a more specific exception
   --> tests\integration\test_database.py:307:28
    |
305 |         mock_get_factory.return_value = mock_factory
306 |
307 |         with pytest.raises(ValueError):
    |                            ^^^^^^^^^^
308 |             async with get_session() as session:
309 |                 raise ValueError("Test exception")
    |

F841 Local variable `session` is assigned to but never used
   --> tests\integration\test_database.py:308:41
    |
307 |         with pytest.raises(ValueError):
308 |             async with get_session() as session:
    |                                         ^^^^^^^
309 |                 raise ValueError("Test exception")
    |
help: Remove assignment to unused variable `session`

TRY003 Avoid specifying long messages outside the exception class
   --> tests\integration\test_database.py:309:23
    |
307 |         with pytest.raises(ValueError):
308 |             async with get_session() as session:
309 |                 raise ValueError("Test exception")
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
310 |
311 |         # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –±—ã–ª –≤—ã–∑–≤–∞–Ω rollback
    |

EM101 Exception must not use a string literal, assign to variable first
   --> tests\integration\test_database.py:309:34
    |
307 |         with pytest.raises(ValueError):
308 |             async with get_session() as session:
309 |                 raise ValueError("Test exception")
    |                                  ^^^^^^^^^^^^^^^^
310 |
311 |         # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –±—ã–ª –≤—ã–∑–≤–∞–Ω rollback
    |
help: Assign to variable; remove string literal

ANN201 Missing return type annotation for public function `test_create_tables_success`
   --> tests\integration\test_database.py:321:15
    |
320 |     @patch("app.database.get_engine")
321 |     async def test_create_tables_success(self, mock_get_engine):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^
322 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü."""
323 |         mock_engine = AsyncMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_get_engine`
   --> tests\integration\test_database.py:321:48
    |
320 |     @patch("app.database.get_engine")
321 |     async def test_create_tables_success(self, mock_get_engine):
    |                                                ^^^^^^^^^^^^^^^
322 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü."""
323 |         mock_engine = AsyncMock()
    |

ANN201 Missing return type annotation for public function `test_create_tables_failure`
   --> tests\integration\test_database.py:339:15
    |
338 |     @patch("app.database.get_engine")
339 |     async def test_create_tables_failure(self, mock_get_engine):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^
340 |         """–¢–µ—Å—Ç –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü."""
341 |         mock_engine = AsyncMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_get_engine`
   --> tests\integration\test_database.py:339:48
    |
338 |     @patch("app.database.get_engine")
339 |     async def test_create_tables_failure(self, mock_get_engine):
    |                                                ^^^^^^^^^^^^^^^
340 |         """–¢–µ—Å—Ç –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü."""
341 |         mock_engine = AsyncMock()
    |

ANN201 Missing return type annotation for public function `test_drop_tables_debug_mode`
   --> tests\integration\test_database.py:357:15
    |
355 |     @patch("app.database.get_config")
356 |     @patch("app.database.get_engine")
357 |     async def test_drop_tables_debug_mode(self, mock_get_engine, mock_get_config):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
358 |         """–¢–µ—Å—Ç —É–¥–∞–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü –≤ debug —Ä–µ–∂–∏–º–µ."""
359 |         mock_config = MagicMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_get_engine`
   --> tests\integration\test_database.py:357:49
    |
355 |     @patch("app.database.get_config")
356 |     @patch("app.database.get_engine")
357 |     async def test_drop_tables_debug_mode(self, mock_get_engine, mock_get_config):
    |                                                 ^^^^^^^^^^^^^^^
358 |         """–¢–µ—Å—Ç —É–¥–∞–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü –≤ debug —Ä–µ–∂–∏–º–µ."""
359 |         mock_config = MagicMock()
    |

ANN001 Missing type annotation for function argument `mock_get_config`
   --> tests\integration\test_database.py:357:66
    |
355 |     @patch("app.database.get_config")
356 |     @patch("app.database.get_engine")
357 |     async def test_drop_tables_debug_mode(self, mock_get_engine, mock_get_config):
    |                                                                  ^^^^^^^^^^^^^^^
358 |         """–¢–µ—Å—Ç —É–¥–∞–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü –≤ debug —Ä–µ–∂–∏–º–µ."""
359 |         mock_config = MagicMock()
    |

ANN201 Missing return type annotation for public function `test_drop_tables_production_mode`
   --> tests\integration\test_database.py:379:15
    |
378 |     @patch("app.database.get_config")
379 |     async def test_drop_tables_production_mode(self, mock_get_config):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
380 |         """–¢–µ—Å—Ç –∑–∞–ø—Ä–µ—Ç–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü –≤ production —Ä–µ–∂–∏–º–µ."""
381 |         mock_config = MagicMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_get_config`
   --> tests\integration\test_database.py:379:54
    |
378 |     @patch("app.database.get_config")
379 |     async def test_drop_tables_production_mode(self, mock_get_config):
    |                                                      ^^^^^^^^^^^^^^^
380 |         """–¢–µ—Å—Ç –∑–∞–ø—Ä–µ—Ç–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü –≤ production —Ä–µ–∂–∏–º–µ."""
381 |         mock_config = MagicMock()
    |

ANN201 Missing return type annotation for public function `test_base_exists`
   --> tests\integration\test_database.py:396:9
    |
394 |     """–¢–µ—Å—Ç—ã –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞ –º–æ–¥–µ–ª–µ–π."""
395 |
396 |     def test_base_exists(self):
    |         ^^^^^^^^^^^^^^^^
397 |         """–¢–µ—Å—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞."""
398 |         assert Base is not None
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_full_database_lifecycle`
   --> tests\integration\test_database.py:411:15
    |
410 |     @pytest.mark.skip(reason="–¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ë–î")
411 |     async def test_full_database_lifecycle(self):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
412 |         """–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç –ø–æ–ª–Ω–æ–≥–æ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –ë–î."""
413 |         # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_database_error_handling`
   --> tests\integration\test_database.py:433:15
    |
432 |     @pytest.mark.skip(reason="–¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ë–î")
433 |     async def test_database_error_handling(self):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
434 |         """–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –ë–î."""
435 |         # –¢–µ—Å—Ç —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
    |
help: Add return type annotation: `None`

B017 Do not assert blind exception: `Exception`
   --> tests\integration\test_database.py:446:18
    |
444 |             mock_config.return_value = config
445 |
446 |             with pytest.raises(Exception):
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^
447 |                 await init_db()
    |

PT011 `pytest.raises(Exception)` is too broad, set the `match` parameter or use a more specific exception
   --> tests\integration\test_database.py:446:32
    |
444 |             mock_config.return_value = config
445 |
446 |             with pytest.raises(Exception):
    |                                ^^^^^^^^^
447 |                 await init_db()
    |

ANN201 Missing return type annotation for public function `test_all_exports_exist`
   --> tests\integration\test_database.py:454:9
    |
453 |     @pytest.mark.skip(reason="Temporarily disabled due to commit issues")
454 |     def test_all_exports_exist(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^
455 |         """–¢–µ—Å—Ç –Ω–∞–ª–∏—á–∏—è –≤—Å–µ—Ö —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤."""
456 |         from app.database import __all__
    |
help: Add return type annotation: `None`

PLC0415 `import` should be at the top-level of a file
   --> tests\integration\test_database.py:456:9
    |
454 |     def test_all_exports_exist(self):
455 |         """–¢–µ—Å—Ç –Ω–∞–ª–∏—á–∏—è –≤—Å–µ—Ö —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤."""
456 |         from app.database import __all__
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
457 |
458 |         expected_exports = [
    |

PLC0415 `import` should be at the top-level of a file
   --> tests\integration\test_database.py:473:9
    |
472 |         # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è
473 |         import app.database as db_module
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
474 |
475 |         for export in expected_exports:
    |

ANN201 Missing return type annotation for public function `test_provider_initialization`
  --> tests\integration\test_deepseek_provider.py:29:9
   |
27 |     """–¢–µ—Å—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ DeepSeek –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
28 |
29 |     def test_provider_initialization(self, mock_config):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
30 |         """–¢–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
31 |         provider = DeepSeekProvider()
   |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_config`
  --> tests\integration\test_deepseek_provider.py:29:44
   |
27 |     """–¢–µ—Å—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ DeepSeek –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
28 |
29 |     def test_provider_initialization(self, mock_config):
   |                                            ^^^^^^^^^^^
30 |         """–¢–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
31 |         provider = DeepSeekProvider()
   |

ARG002 Unused method argument: `mock_config`
  --> tests\integration\test_deepseek_provider.py:29:44
   |
27 |     """–¢–µ—Å—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ DeepSeek –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
28 |
29 |     def test_provider_initialization(self, mock_config):
   |                                            ^^^^^^^^^^^
30 |         """–¢–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
31 |         provider = DeepSeekProvider()
   |

ANN201 Missing return type annotation for public function `test_provider_configuration_check`
  --> tests\integration\test_deepseek_provider.py:37:9
   |
35 |         assert hasattr(provider, "_client")
36 |
37 |     def test_provider_configuration_check(self, mock_config):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
38 |         """–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
39 |         provider = DeepSeekProvider()
   |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_config`
  --> tests\integration\test_deepseek_provider.py:37:49
   |
35 |         assert hasattr(provider, "_client")
36 |
37 |     def test_provider_configuration_check(self, mock_config):
   |                                                 ^^^^^^^^^^^
38 |         """–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
39 |         provider = DeepSeekProvider()
   |

ARG002 Unused method argument: `mock_config`
  --> tests\integration\test_deepseek_provider.py:37:49
   |
35 |         assert hasattr(provider, "_client")
36 |
37 |     def test_provider_configuration_check(self, mock_config):
   |                                                 ^^^^^^^^^^^
38 |         """–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
39 |         provider = DeepSeekProvider()
   |

ANN201 Missing return type annotation for public function `test_provider_availability_check`
  --> tests\integration\test_deepseek_provider.py:54:9
   |
52 |             assert provider_unconfigured.is_configured() is False
53 |
54 |     def test_provider_availability_check(self, mock_config):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
55 |         """–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
56 |         provider = DeepSeekProvider()
   |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_config`
  --> tests\integration\test_deepseek_provider.py:54:48
   |
52 |             assert provider_unconfigured.is_configured() is False
53 |
54 |     def test_provider_availability_check(self, mock_config):
   |                                                ^^^^^^^^^^^
55 |         """–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
56 |         provider = DeepSeekProvider()
   |

ARG002 Unused method argument: `mock_config`
  --> tests\integration\test_deepseek_provider.py:54:48
   |
52 |             assert provider_unconfigured.is_configured() is False
53 |
54 |     def test_provider_availability_check(self, mock_config):
   |                                                ^^^^^^^^^^^
55 |         """–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
56 |         provider = DeepSeekProvider()
   |

E501 Line too long (92 > 88)
  --> tests\integration\test_deepseek_provider.py:59:89
   |
58 |         # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–æ–≤–∞–π–¥–µ—Ä —Å—á–∏—Ç–∞–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
59 |         # Note: is_available() is async, –Ω–æ –≤ –ø—Ä–æ—Å—Ç—ã—Ö —Ç–µ—Å—Ç–∞—Ö –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å is_configured()
   |                                                                                         ^^^^
60 |         assert provider.is_configured() is True
   |

ANN201 Missing return type annotation for public function `provider`
  --> tests\integration\test_deepseek_provider.py:69:9
   |
68 |     @pytest.fixture
69 |     def provider(self, mock_config):
   |         ^^^^^^^^
70 |         """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤."""
71 |         return DeepSeekProvider()
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `mock_config`
  --> tests\integration\test_deepseek_provider.py:69:24
   |
68 |     @pytest.fixture
69 |     def provider(self, mock_config):
   |                        ^^^^^^^^^^^
70 |         """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤."""
71 |         return DeepSeekProvider()
   |

ARG002 Unused method argument: `mock_config`
  --> tests\integration\test_deepseek_provider.py:69:24
   |
68 |     @pytest.fixture
69 |     def provider(self, mock_config):
   |                        ^^^^^^^^^^^
70 |         """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤."""
71 |         return DeepSeekProvider()
   |

ANN201 Missing return type annotation for public function `sample_messages`
  --> tests\integration\test_deepseek_provider.py:74:9
   |
73 |     @pytest.fixture
74 |     def sample_messages(self):
   |         ^^^^^^^^^^^^^^^
75 |         """–ü—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —Ç–µ—Å—Ç–æ–≤."""
76 |         return [
   |
help: Add return type annotation

ANN201 Missing return type annotation for public function `test_successful_api_request`
  --> tests\integration\test_deepseek_provider.py:85:15
   |
84 |     @pytest.mark.asyncio
85 |     async def test_successful_api_request(self, provider, sample_messages):
   |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
86 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ API –∑–∞–ø—Ä–æ—Å–∞."""
87 |         # –ú–æ–∫–∞–µ–º HTTP –æ—Ç–≤–µ—Ç –≤ —Å—Ç–∏–ª–µ DeepSeek API
   |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
  --> tests\integration\test_deepseek_provider.py:85:49
   |
84 |     @pytest.mark.asyncio
85 |     async def test_successful_api_request(self, provider, sample_messages):
   |                                                 ^^^^^^^^
86 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ API –∑–∞–ø—Ä–æ—Å–∞."""
87 |         # –ú–æ–∫–∞–µ–º HTTP –æ—Ç–≤–µ—Ç –≤ —Å—Ç–∏–ª–µ DeepSeek API
   |

ANN001 Missing type annotation for function argument `sample_messages`
  --> tests\integration\test_deepseek_provider.py:85:59
   |
84 |     @pytest.mark.asyncio
85 |     async def test_successful_api_request(self, provider, sample_messages):
   |                                                           ^^^^^^^^^^^^^^^
86 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ API –∑–∞–ø—Ä–æ—Å–∞."""
87 |         # –ú–æ–∫–∞–µ–º HTTP –æ—Ç–≤–µ—Ç –≤ —Å—Ç–∏–ª–µ DeepSeek API
   |

E501 Line too long (100 > 88)
   --> tests\integration\test_deepseek_provider.py:100:89
    |
 98 | ‚Ä¶     "message": {
 99 | ‚Ä¶         "role": "assistant",
100 | ‚Ä¶         "content": "–ö–≤–∞–Ω—Ç–æ–≤–∞—è —Ñ–∏–∑–∏–∫–∞ –∏–∑—É—á–∞–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ —á–∞—Å—Ç–∏—Ü –Ω–∞ –∞—Ç–æ–º–Ω–æ–º —É—Ä–æ–≤–Ω–µ...",
    |                                                                           ^^^^^^^^^^^^
101 | ‚Ä¶     },
102 | ‚Ä¶     "finish_reason": "stop",
    |

ANN201 Missing return type annotation for public function `test_api_request_with_parameters`
   --> tests\integration\test_deepseek_provider.py:123:15
    |
122 |     @pytest.mark.asyncio
123 |     async def test_api_request_with_parameters(self, provider, sample_messages):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
124 |         """–¢–µ—Å—Ç API –∑–∞–ø—Ä–æ—Å–∞ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏."""
125 |         mock_response = MagicMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_deepseek_provider.py:123:54
    |
122 |     @pytest.mark.asyncio
123 |     async def test_api_request_with_parameters(self, provider, sample_messages):
    |                                                      ^^^^^^^^
124 |         """–¢–µ—Å—Ç API –∑–∞–ø—Ä–æ—Å–∞ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏."""
125 |         mock_response = MagicMock()
    |

ANN001 Missing type annotation for function argument `sample_messages`
   --> tests\integration\test_deepseek_provider.py:123:64
    |
122 |     @pytest.mark.asyncio
123 |     async def test_api_request_with_parameters(self, provider, sample_messages):
    |                                                                ^^^^^^^^^^^^^^^
124 |         """–¢–µ—Å—Ç API –∑–∞–ø—Ä–æ—Å–∞ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏."""
125 |         mock_response = MagicMock()
    |

ANN201 Missing return type annotation for public function `test_http_headers`
   --> tests\integration\test_deepseek_provider.py:149:15
    |
148 |     @pytest.mark.asyncio
149 |     async def test_http_headers(self, provider, sample_messages):
    |               ^^^^^^^^^^^^^^^^^
150 |         """–¢–µ—Å—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö HTTP –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤."""
151 |         mock_response = MagicMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_deepseek_provider.py:149:39
    |
148 |     @pytest.mark.asyncio
149 |     async def test_http_headers(self, provider, sample_messages):
    |                                       ^^^^^^^^
150 |         """–¢–µ—Å—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö HTTP –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤."""
151 |         mock_response = MagicMock()
    |

ANN001 Missing type annotation for function argument `sample_messages`
   --> tests\integration\test_deepseek_provider.py:149:49
    |
148 |     @pytest.mark.asyncio
149 |     async def test_http_headers(self, provider, sample_messages):
    |                                                 ^^^^^^^^^^^^^^^
150 |         """–¢–µ—Å—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö HTTP –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤."""
151 |         mock_response = MagicMock()
    |

SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
   --> tests\integration\test_deepseek_provider.py:159:9
    |
157 |           }
158 |
159 | /         with patch("httpx.AsyncClient.post", return_value=mock_response):
160 | |             with patch(
161 | |                 "httpx.AsyncClient.__init__",
162 | |                 return_value=None,
163 | |             ) as mock_client_init:
    | |__________________________________^
164 |                   # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—á–∏—â–∞–µ–º –∫–ª–∏–µ–Ω—Ç
165 |                   provider._client = None
    |
help: Combine `with` statements

SLF001 Private member accessed: `_client`
   --> tests\integration\test_deepseek_provider.py:165:17
    |
163 |             ) as mock_client_init:
164 |                 # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—á–∏—â–∞–µ–º –∫–ª–∏–µ–Ω—Ç
165 |                 provider._client = None
    |                 ^^^^^^^^^^^^^^^^
166 |
167 |                 await provider.generate_response(sample_messages)
    |

ANN201 Missing return type annotation for public function `provider`
   --> tests\integration\test_deepseek_provider.py:186:9
    |
185 |     @pytest.fixture
186 |     def provider(self, mock_config):
    |         ^^^^^^^^
187 |         """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –æ—à–∏–±–æ–∫."""
188 |         return DeepSeekProvider()
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `mock_config`
   --> tests\integration\test_deepseek_provider.py:186:24
    |
185 |     @pytest.fixture
186 |     def provider(self, mock_config):
    |                        ^^^^^^^^^^^
187 |         """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –æ—à–∏–±–æ–∫."""
188 |         return DeepSeekProvider()
    |

ARG002 Unused method argument: `mock_config`
   --> tests\integration\test_deepseek_provider.py:186:24
    |
185 |     @pytest.fixture
186 |     def provider(self, mock_config):
    |                        ^^^^^^^^^^^
187 |         """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –æ—à–∏–±–æ–∫."""
188 |         return DeepSeekProvider()
    |

ANN201 Missing return type annotation for public function `sample_messages`
   --> tests\integration\test_deepseek_provider.py:191:9
    |
190 |     @pytest.fixture
191 |     def sample_messages(self):
    |         ^^^^^^^^^^^^^^^
192 |         """–°–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –æ—à–∏–±–æ–∫."""
193 |         return [ConversationMessage(role="user", content="–¢–µ—Å—Ç –æ—à–∏–±–æ–∫ DeepSeek")]
    |
help: Add return type annotation

ANN201 Missing return type annotation for public function `test_authentication_error`
   --> tests\integration\test_deepseek_provider.py:196:15
    |
195 |     @pytest.mark.asyncio
196 |     async def test_authentication_error(self, provider, sample_messages):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
197 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (401)."""
198 |         mock_response = MagicMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_deepseek_provider.py:196:47
    |
195 |     @pytest.mark.asyncio
196 |     async def test_authentication_error(self, provider, sample_messages):
    |                                               ^^^^^^^^
197 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (401)."""
198 |         mock_response = MagicMock()
    |

ANN001 Missing type annotation for function argument `sample_messages`
   --> tests\integration\test_deepseek_provider.py:196:57
    |
195 |     @pytest.mark.asyncio
196 |     async def test_authentication_error(self, provider, sample_messages):
    |                                                         ^^^^^^^^^^^^^^^
197 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (401)."""
198 |         mock_response = MagicMock()
    |

SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
   --> tests\integration\test_deepseek_provider.py:208:9
    |
206 |           }
207 |
208 | /         with patch("httpx.AsyncClient.post", return_value=mock_response):
209 | |             with pytest.raises(
210 | |                 APIAuthenticationError,
211 | |                 match="–ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á DeepSeek",
212 | |             ):
    | |______________^
213 |                   await provider.generate_response(sample_messages)
    |
help: Combine `with` statements

ANN201 Missing return type annotation for public function `test_quota_exceeded_error`
   --> tests\integration\test_deepseek_provider.py:216:15
    |
215 |     @pytest.mark.asyncio
216 |     async def test_quota_exceeded_error(self, provider, sample_messages):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
217 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –∫–≤–æ—Ç—ã (402)."""
218 |         mock_response = MagicMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_deepseek_provider.py:216:47
    |
215 |     @pytest.mark.asyncio
216 |     async def test_quota_exceeded_error(self, provider, sample_messages):
    |                                               ^^^^^^^^
217 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –∫–≤–æ—Ç—ã (402)."""
218 |         mock_response = MagicMock()
    |

ANN001 Missing type annotation for function argument `sample_messages`
   --> tests\integration\test_deepseek_provider.py:216:57
    |
215 |     @pytest.mark.asyncio
216 |     async def test_quota_exceeded_error(self, provider, sample_messages):
    |                                                         ^^^^^^^^^^^^^^^
217 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –∫–≤–æ—Ç—ã (402)."""
218 |         mock_response = MagicMock()
    |

SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
   --> tests\integration\test_deepseek_provider.py:228:9
    |
226 |           }
227 |
228 | /         with patch("httpx.AsyncClient.post", return_value=mock_response):
229 | |             with pytest.raises(
230 | |                 APIQuotaExceededError,
231 | |                 match="–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á–µ—Ç–µ DeepSeek API",
232 | |             ):
    | |______________^
233 |                   await provider.generate_response(sample_messages)
    |
help: Combine `with` statements

ANN201 Missing return type annotation for public function `test_rate_limit_error`
   --> tests\integration\test_deepseek_provider.py:236:15
    |
235 |     @pytest.mark.asyncio
236 |     async def test_rate_limit_error(self, provider, sample_messages):
    |               ^^^^^^^^^^^^^^^^^^^^^
237 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞ (429)."""
238 |         mock_response = MagicMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_deepseek_provider.py:236:43
    |
235 |     @pytest.mark.asyncio
236 |     async def test_rate_limit_error(self, provider, sample_messages):
    |                                           ^^^^^^^^
237 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞ (429)."""
238 |         mock_response = MagicMock()
    |

ANN001 Missing type annotation for function argument `sample_messages`
   --> tests\integration\test_deepseek_provider.py:236:53
    |
235 |     @pytest.mark.asyncio
236 |     async def test_rate_limit_error(self, provider, sample_messages):
    |                                                     ^^^^^^^^^^^^^^^
237 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞ (429)."""
238 |         mock_response = MagicMock()
    |

SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
   --> tests\integration\test_deepseek_provider.py:247:9
    |
245 |           }
246 |
247 | /         with patch("httpx.AsyncClient.post", return_value=mock_response):
248 | |             with pytest.raises(
249 | |                 APIRateLimitError,
250 | |                 match="–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ DeepSeek API",
251 | |             ):
    | |______________^
252 |                   await provider.generate_response(sample_messages)
    |
help: Combine `with` statements

ANN201 Missing return type annotation for public function `test_specific_deepseek_errors`
   --> tests\integration\test_deepseek_provider.py:255:15
    |
254 |     @pytest.mark.asyncio
255 |     async def test_specific_deepseek_errors(self, provider, sample_messages):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
256 |         """–¢–µ—Å—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ DeepSeek."""
257 |         # –¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –º–æ–¥–µ–ª–∏
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_deepseek_provider.py:255:51
    |
254 |     @pytest.mark.asyncio
255 |     async def test_specific_deepseek_errors(self, provider, sample_messages):
    |                                                   ^^^^^^^^
256 |         """–¢–µ—Å—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ DeepSeek."""
257 |         # –¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –º–æ–¥–µ–ª–∏
    |

ANN001 Missing type annotation for function argument `sample_messages`
   --> tests\integration\test_deepseek_provider.py:255:61
    |
254 |     @pytest.mark.asyncio
255 |     async def test_specific_deepseek_errors(self, provider, sample_messages):
    |                                                             ^^^^^^^^^^^^^^^
256 |         """–¢–µ—Å—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ DeepSeek."""
257 |         # –¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –º–æ–¥–µ–ª–∏
    |

SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
   --> tests\integration\test_deepseek_provider.py:267:9
    |
265 |           }
266 |
267 | /         with patch("httpx.AsyncClient.post", return_value=mock_response):
268 | |             with pytest.raises(APIConnectionError, match="Model not found"):
    | |____________________________________________________________________________^
269 |                   await provider.generate_response(sample_messages)
    |
help: Combine `with` statements

ANN201 Missing return type annotation for public function `test_server_error`
   --> tests\integration\test_deepseek_provider.py:272:15
    |
271 |     @pytest.mark.asyncio
272 |     async def test_server_error(self, provider, sample_messages):
    |               ^^^^^^^^^^^^^^^^^
273 |         """–¢–µ—Å—Ç —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –æ—à–∏–±–∫–∏ (5xx)."""
274 |         mock_response = MagicMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_deepseek_provider.py:272:39
    |
271 |     @pytest.mark.asyncio
272 |     async def test_server_error(self, provider, sample_messages):
    |                                       ^^^^^^^^
273 |         """–¢–µ—Å—Ç —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –æ—à–∏–±–∫–∏ (5xx)."""
274 |         mock_response = MagicMock()
    |

ANN001 Missing type annotation for function argument `sample_messages`
   --> tests\integration\test_deepseek_provider.py:272:49
    |
271 |     @pytest.mark.asyncio
272 |     async def test_server_error(self, provider, sample_messages):
    |                                                 ^^^^^^^^^^^^^^^
273 |         """–¢–µ—Å—Ç —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –æ—à–∏–±–∫–∏ (5xx)."""
274 |         mock_response = MagicMock()
    |

SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
   --> tests\integration\test_deepseek_provider.py:278:9
    |
276 |           mock_response.text = "Service Temporarily Unavailable"
277 |
278 | /         with patch("httpx.AsyncClient.post", return_value=mock_response):
279 | |             with pytest.raises(
280 | |                 APIConnectionError,
281 | |                 match="–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ DeepSeek: 503",
282 | |             ):
    | |______________^
283 |                   await provider.generate_response(sample_messages)
    |
help: Combine `with` statements

ANN201 Missing return type annotation for public function `test_connection_timeout`
   --> tests\integration\test_deepseek_provider.py:286:15
    |
285 |     @pytest.mark.asyncio
286 |     async def test_connection_timeout(self, provider, sample_messages):
    |               ^^^^^^^^^^^^^^^^^^^^^^^
287 |         """–¢–µ—Å—Ç —Ç–∞–π–º–∞—É—Ç–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è."""
288 |         with patch(
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_deepseek_provider.py:286:45
    |
285 |     @pytest.mark.asyncio
286 |     async def test_connection_timeout(self, provider, sample_messages):
    |                                             ^^^^^^^^
287 |         """–¢–µ—Å—Ç —Ç–∞–π–º–∞—É—Ç–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è."""
288 |         with patch(
    |

ANN001 Missing type annotation for function argument `sample_messages`
   --> tests\integration\test_deepseek_provider.py:286:55
    |
285 |     @pytest.mark.asyncio
286 |     async def test_connection_timeout(self, provider, sample_messages):
    |                                                       ^^^^^^^^^^^^^^^
287 |         """–¢–µ—Å—Ç —Ç–∞–π–º–∞—É—Ç–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è."""
288 |         with patch(
    |

SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
   --> tests\integration\test_deepseek_provider.py:288:9
    |
286 |       async def test_connection_timeout(self, provider, sample_messages):
287 |           """–¢–µ—Å—Ç —Ç–∞–π–º–∞—É—Ç–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è."""
288 | /         with patch(
289 | |             "httpx.AsyncClient.post",
290 | |             side_effect=httpx.TimeoutException("Request timeout"),
291 | |         ):
292 | |             with pytest.raises(
293 | |                 APIConnectionError,
294 | |                 match="Timeout –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ DeepSeek API",
295 | |             ):
    | |______________^
296 |                   await provider.generate_response(sample_messages)
    |
help: Combine `with` statements

ANN201 Missing return type annotation for public function `provider`
   --> tests\integration\test_deepseek_provider.py:305:9
    |
304 |     @pytest.fixture
305 |     def provider(self, mock_config):
    |         ^^^^^^^^
306 |         """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞."""
307 |         return DeepSeekProvider()
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `mock_config`
   --> tests\integration\test_deepseek_provider.py:305:24
    |
304 |     @pytest.fixture
305 |     def provider(self, mock_config):
    |                        ^^^^^^^^^^^
306 |         """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞."""
307 |         return DeepSeekProvider()
    |

ARG002 Unused method argument: `mock_config`
   --> tests\integration\test_deepseek_provider.py:305:24
    |
304 |     @pytest.fixture
305 |     def provider(self, mock_config):
    |                        ^^^^^^^^^^^
306 |         """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞."""
307 |         return DeepSeekProvider()
    |

ANN201 Missing return type annotation for public function `test_complete_response_parsing`
   --> tests\integration\test_deepseek_provider.py:310:15
    |
309 |     @pytest.mark.asyncio
310 |     async def test_complete_response_parsing(self, provider):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
311 |         """–¢–µ—Å—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞."""
312 |         mock_response = MagicMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_deepseek_provider.py:310:52
    |
309 |     @pytest.mark.asyncio
310 |     async def test_complete_response_parsing(self, provider):
    |                                                    ^^^^^^^^
311 |         """–¢–µ—Å—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞."""
312 |         mock_response = MagicMock()
    |

ANN201 Missing return type annotation for public function `test_streaming_response_handling`
   --> tests\integration\test_deepseek_provider.py:347:15
    |
346 |     @pytest.mark.asyncio
347 |     async def test_streaming_response_handling(self, provider):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
348 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ streaming –æ—Ç–≤–µ—Ç–æ–≤ (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)."""
349 |         # DeepSeek –º–æ–∂–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å streaming, —Ç–µ—Å—Ç–∏—Ä—É–µ–º –±–∞–∑–æ–≤—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_deepseek_provider.py:347:54
    |
346 |     @pytest.mark.asyncio
347 |     async def test_streaming_response_handling(self, provider):
    |                                                      ^^^^^^^^
348 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ streaming –æ—Ç–≤–µ—Ç–æ–≤ (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)."""
349 |         # DeepSeek –º–æ–∂–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å streaming, —Ç–µ—Å—Ç–∏—Ä—É–µ–º –±–∞–∑–æ–≤—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É
    |

ANN201 Missing return type annotation for public function `test_chinese_content_handling`
   --> tests\integration\test_deepseek_provider.py:365:15
    |
364 |     @pytest.mark.asyncio
365 |     async def test_chinese_content_handling(self, provider):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
366 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–∏—Ç–∞–π—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (DeepSeek —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –∫–∏—Ç–∞–π—Å–∫–æ–º)."""
367 |         mock_response = MagicMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_deepseek_provider.py:365:51
    |
364 |     @pytest.mark.asyncio
365 |     async def test_chinese_content_handling(self, provider):
    |                                                   ^^^^^^^^
366 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–∏—Ç–∞–π—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (DeepSeek —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –∫–∏—Ç–∞–π—Å–∫–æ–º)."""
367 |         mock_response = MagicMock()
    |

E501 Line too long (90 > 88)
   --> tests\integration\test_deepseek_provider.py:366:89
    |
364 |     @pytest.mark.asyncio
365 |     async def test_chinese_content_handling(self, provider):
366 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–∏—Ç–∞–π—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (DeepSeek —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –∫–∏—Ç–∞–π—Å–∫–æ–º)."""
    |                                                                                         ^^
367 |         mock_response = MagicMock()
368 |         mock_response.status_code = 200
    |

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:391:5
    |
389 |     # def test_message_formatting(self, mock_config):
390 |     #     """–¢–µ—Å—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è DeepSeek API."""
391 |     #     provider = DeepSeekProvider()
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
392 |     #
393 |     #     messages = [
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:393:5
    |
391 |     #     provider = DeepSeekProvider()
392 |     #
393 |     #     messages = [
    |     ^^^^^^^^^^^^^^^^^^
394 |     #         ConversationMessage(role="system", content="–¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ AI"),
395 |     #         ConversationMessage(role="user", content="–†–∞—Å—Å–∫–∞–∂–∏ –æ –Ω–µ–π—Ä–æ—Å–µ—Ç—è—Ö"),
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:394:5
    |
392 |     #
393 |     #     messages = [
394 |     #         ConversationMessage(role="system", content="–¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ AI"),
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
395 |     #         ConversationMessage(role="user", content="–†–∞—Å—Å–∫–∞–∂–∏ –æ –Ω–µ–π—Ä–æ—Å–µ—Ç—è—Ö"),
396 |     #         ConversationMessage(role="assistant", content="–ù–µ–π—Ä–æ—Å–µ—Ç–∏ —ç—Ç–æ...")
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:395:5
    |
393 |     #     messages = [
394 |     #         ConversationMessage(role="system", content="–¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ AI"),
395 |     #         ConversationMessage(role="user", content="–†–∞—Å—Å–∫–∞–∂–∏ –æ –Ω–µ–π—Ä–æ—Å–µ—Ç—è—Ö"),
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
396 |     #         ConversationMessage(role="assistant", content="–ù–µ–π—Ä–æ—Å–µ—Ç–∏ —ç—Ç–æ...")
397 |     #     ]
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:396:5
    |
394 |     #         ConversationMessage(role="system", content="–¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ AI"),
395 |     #         ConversationMessage(role="user", content="–†–∞—Å—Å–∫–∞–∂–∏ –æ –Ω–µ–π—Ä–æ—Å–µ—Ç—è—Ö"),
396 |     #         ConversationMessage(role="assistant", content="–ù–µ–π—Ä–æ—Å–µ—Ç–∏ —ç—Ç–æ...")
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
397 |     #     ]
398 |     #
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:397:5
    |
395 |     #         ConversationMessage(role="user", content="–†–∞—Å—Å–∫–∞–∂–∏ –æ –Ω–µ–π—Ä–æ—Å–µ—Ç—è—Ö"),
396 |     #         ConversationMessage(role="assistant", content="–ù–µ–π—Ä–æ—Å–µ—Ç–∏ —ç—Ç–æ...")
397 |     #     ]
    |     ^^^^^^^
398 |     #
399 |     #     formatted = provider._format_messages(messages)
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:399:5
    |
397 |     #     ]
398 |     #
399 |     #     formatted = provider._format_messages(messages)
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
400 |     #
401 |     #     assert len(formatted) == 3
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:401:5
    |
399 |     #     formatted = provider._format_messages(messages)
400 |     #
401 |     #     assert len(formatted) == 3
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
402 |     #     assert all(msg["role"] in ["system", "user", "assistant"] for msg in formatted)
403 |     #     assert formatted[0]["content"] == "–¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ AI"
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:402:5
    |
400 |     #
401 |     #     assert len(formatted) == 3
402 |     #     assert all(msg["role"] in ["system", "user", "assistant"] for msg in formatted)
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
403 |     #     assert formatted[0]["content"] == "–¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ AI"
    |
help: Remove commented-out code

E501 Line too long (89 > 88)
   --> tests\integration\test_deepseek_provider.py:402:89
    |
400 |     #
401 |     #     assert len(formatted) == 3
402 |     #     assert all(msg["role"] in ["system", "user", "assistant"] for msg in formatted)
    |                                                                                         ^
403 |     #     assert formatted[0]["content"] == "–¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ AI"
    |

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:403:5
    |
401 |     #     assert len(formatted) == 3
402 |     #     assert all(msg["role"] in ["system", "user", "assistant"] for msg in formatted)
403 |     #     assert formatted[0]["content"] == "–¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ AI"
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
404 |
405 |     # def test_request_preparation(self, mock_config):
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:407:5
    |
405 |     # def test_request_preparation(self, mock_config):
406 |     #     """–¢–µ—Å—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞."""
407 |     #     provider = DeepSeekProvider()
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
408 |     #
409 |     #     messages = [ConversationMessage(role="user", content="–¢–µ—Å—Ç –∑–∞–ø—Ä–æ—Å–∞")]
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:409:5
    |
407 |     #     provider = DeepSeekProvider()
408 |     #
409 |     #     messages = [ConversationMessage(role="user", content="–¢–µ—Å—Ç –∑–∞–ø—Ä–æ—Å–∞")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
410 |     #
411 |     #     request_data = provider._prepare_request_data(
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:411:5
    |
409 |     #     messages = [ConversationMessage(role="user", content="–¢–µ—Å—Ç –∑–∞–ø—Ä–æ—Å–∞")]
410 |     #
411 |     #     request_data = provider._prepare_request_data(
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
412 |     #         messages,
413 |     #         temperature=0.7,
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:413:5
    |
411 |     #     request_data = provider._prepare_request_data(
412 |     #         messages,
413 |     #         temperature=0.7,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^
414 |     #         max_tokens=2000
415 |     #     )
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:414:5
    |
412 |     #         messages,
413 |     #         temperature=0.7,
414 |     #         max_tokens=2000
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
415 |     #     )
416 |     #
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:415:5
    |
413 |     #         temperature=0.7,
414 |     #         max_tokens=2000
415 |     #     )
    |     ^^^^^^^
416 |     #
417 |     #     assert request_data["model"] == mock_config.deepseek.deepseek_model
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:417:5
    |
415 |     #     )
416 |     #
417 |     #     assert request_data["model"] == mock_config.deepseek.deepseek_model
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
418 |     #     assert request_data["temperature"] == 0.7
419 |     #     assert request_data["max_tokens"] == 2000
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:418:5
    |
416 |     #
417 |     #     assert request_data["model"] == mock_config.deepseek.deepseek_model
418 |     #     assert request_data["temperature"] == 0.7
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
419 |     #     assert request_data["max_tokens"] == 2000
420 |     #     assert "messages" in request_data
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:419:5
    |
417 |     #     assert request_data["model"] == mock_config.deepseek.deepseek_model
418 |     #     assert request_data["temperature"] == 0.7
419 |     #     assert request_data["max_tokens"] == 2000
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
420 |     #     assert "messages" in request_data
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:424:5
    |
422 |     # def test_error_extraction(self, mock_config):
423 |     #     """–¢–µ—Å—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –∏–∑ –æ—Ç–≤–µ—Ç–∞."""
424 |     #     provider = DeepSeekProvider()
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
425 |     #
426 |     #     error_response = {
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:426:5
    |
424 |     #     provider = DeepSeekProvider()
425 |     #
426 |     #     error_response = {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^
427 |     #         "error": {
428 |     #             "message": "Test error message",
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:427:5
    |
425 |     #
426 |     #     error_response = {
427 |     #         "error": {
    |     ^^^^^^^^^^^^^^^^^^^^
428 |     #             "message": "Test error message",
429 |     #             "type": "test_error",
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:428:5
    |
426 |     #     error_response = {
427 |     #         "error": {
428 |     #             "message": "Test error message",
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
429 |     #             "type": "test_error",
430 |     #             "code": "test_code"
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:429:5
    |
427 |     #         "error": {
428 |     #             "message": "Test error message",
429 |     #             "type": "test_error",
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
430 |     #             "code": "test_code"
431 |     #         }
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:431:5
    |
429 |     #             "type": "test_error",
430 |     #             "code": "test_code"
431 |     #         }
    |     ^^^^^^^^^^^
432 |     #     }
433 |     #
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:432:5
    |
430 |     #             "code": "test_code"
431 |     #         }
432 |     #     }
    |     ^^^^^^^
433 |     #
434 |     #     error_msg = provider._extract_error_message(error_response)
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:434:5
    |
432 |     #     }
433 |     #
434 |     #     error_msg = provider._extract_error_message(error_response)
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
435 |     #     assert "Test error message" in error_msg
    |
help: Remove commented-out code

ANN201 Missing return type annotation for public function `test_provider_close`
   --> tests\integration\test_deepseek_provider.py:444:15
    |
443 |     @pytest.mark.asyncio
444 |     async def test_provider_close(self, mock_config):
    |               ^^^^^^^^^^^^^^^^^^^
445 |         """–¢–µ—Å—Ç –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
446 |         provider = DeepSeekProvider()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_config`
   --> tests\integration\test_deepseek_provider.py:444:41
    |
443 |     @pytest.mark.asyncio
444 |     async def test_provider_close(self, mock_config):
    |                                         ^^^^^^^^^^^
445 |         """–¢–µ—Å—Ç –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
446 |         provider = DeepSeekProvider()
    |

ARG002 Unused method argument: `mock_config`
   --> tests\integration\test_deepseek_provider.py:444:41
    |
443 |     @pytest.mark.asyncio
444 |     async def test_provider_close(self, mock_config):
    |                                         ^^^^^^^^^^^
445 |         """–¢–µ—Å—Ç –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
446 |         provider = DeepSeekProvider()
    |

SLF001 Private member accessed: `_client`
   --> tests\integration\test_deepseek_provider.py:450:9
    |
448 |         # –°–æ–∑–¥–∞–µ–º –º–æ–∫ –∫–ª–∏–µ–Ω—Ç–∞
449 |         mock_client = AsyncMock()
450 |         provider._client = mock_client
    |         ^^^^^^^^^^^^^^^^
451 |
452 |         await provider.close()
    |

SLF001 Private member accessed: `_client`
   --> tests\integration\test_deepseek_provider.py:455:16
    |
454 |         mock_client.aclose.assert_called_once()
455 |         assert provider._client is None
    |                ^^^^^^^^^^^^^^^^
456 |
457 |     # @pytest.mark.asyncio
    |

ERA001 Found commented-out code
   --> tests\integration\test_deepseek_provider.py:462:5
    |
460 |     #     async with DeepSeekProvider(mock_config.deepseek) as provider:
461 |     #         assert provider is not None
462 |     #         assert hasattr(provider, '_config')
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
463 |     #
464 |     #     # –ü–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–∫—Ä—ã—Ç
    |
help: Remove commented-out code

ANN201 Missing return type annotation for public function `provider`
   --> tests\integration\test_deepseek_provider.py:474:9
    |
473 |     @pytest.fixture
474 |     def provider(self, mock_config):
    |         ^^^^^^^^
475 |         """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π."""
476 |         return DeepSeekProvider()
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `mock_config`
   --> tests\integration\test_deepseek_provider.py:474:24
    |
473 |     @pytest.fixture
474 |     def provider(self, mock_config):
    |                        ^^^^^^^^^^^
475 |         """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π."""
476 |         return DeepSeekProvider()
    |

ARG002 Unused method argument: `mock_config`
   --> tests\integration\test_deepseek_provider.py:474:24
    |
473 |     @pytest.fixture
474 |     def provider(self, mock_config):
    |                        ^^^^^^^^^^^
475 |         """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π."""
476 |         return DeepSeekProvider()
    |

ANN201 Missing return type annotation for public function `test_code_generation_request`
   --> tests\integration\test_deepseek_provider.py:479:15
    |
478 |     @pytest.mark.asyncio
479 |     async def test_code_generation_request(self, provider):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
480 |         """–¢–µ—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–æ–¥–∞ (DeepSeek —Ö–æ—Ä–æ—à –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏)."""
481 |         mock_response = MagicMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_deepseek_provider.py:479:50
    |
478 |     @pytest.mark.asyncio
479 |     async def test_code_generation_request(self, provider):
    |                                                  ^^^^^^^^
480 |         """–¢–µ—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–æ–¥–∞ (DeepSeek —Ö–æ—Ä–æ—à –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏)."""
481 |         mock_response = MagicMock()
    |

E501 Line too long (149 > 88)
   --> tests\integration\test_deepseek_provider.py:487:89
    |
485 | ‚Ä¶
486 | ‚Ä¶
487 | ‚Ä¶bonacci(n):\n    if n <= 1:\n        return n\n    return fibonacci(n-1) + fibonacci(n-2)\n```",
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
488 | ‚Ä¶
489 | ‚Ä¶
    |

ANN201 Missing return type annotation for public function `test_math_problem_solving`
   --> tests\integration\test_deepseek_provider.py:510:15
    |
509 |     @pytest.mark.asyncio
510 |     async def test_math_problem_solving(self, provider):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
511 |         """–¢–µ—Å—Ç —Ä–µ—à–µ–Ω–∏—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á."""
512 |         mock_response = MagicMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_deepseek_provider.py:510:47
    |
509 |     @pytest.mark.asyncio
510 |     async def test_math_problem_solving(self, provider):
    |                                               ^^^^^^^^
511 |         """–¢–µ—Å—Ç —Ä–µ—à–µ–Ω–∏—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á."""
512 |         mock_response = MagicMock()
    |

E501 Line too long (174 > 88)
   --> tests\integration\test_deepseek_provider.py:518:89
    |
516 | ‚Ä¶
517 | ‚Ä¶
518 | ‚Ä¶ + 6 = 0:\n\n–ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–≤–∞–¥—Ä–∞—Ç–Ω—É—é —Ñ–æ—Ä–º—É–ª—É:\nx = (-5 ¬± ‚àö(25-24))/2 = (-5 ¬± 1)/2\n\n–û—Ç–≤–µ—Ç—ã: x‚ÇÅ = -2, x‚ÇÇ = -3",
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
519 | ‚Ä¶
520 | ‚Ä¶
    |

ANN201 Missing return type annotation for public function `test_real_api_connection`
   --> tests\integration\test_deepseek_provider.py:546:15
    |
545 |     @pytest.mark.asyncio
546 |     async def test_real_api_connection(self, mock_config):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
547 |         """–¢–µ—Å—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ DeepSeek API."""
548 |         # –≠—Ç–æ—Ç —Ç–µ—Å—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–π –∫–ª—é—á
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_config`
   --> tests\integration\test_deepseek_provider.py:546:46
    |
545 |     @pytest.mark.asyncio
546 |     async def test_real_api_connection(self, mock_config):
    |                                              ^^^^^^^^^^^
547 |         """–¢–µ—Å—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ DeepSeek API."""
548 |         # –≠—Ç–æ—Ç —Ç–µ—Å—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–π –∫–ª—é—á
    |

ANN201 Missing return type annotation for public function `mock_message`
  --> tests\integration\test_message_handler.py:38:9
   |
37 |     @pytest.fixture
38 |     def mock_message(self):
   |         ^^^^^^^^^^^^
39 |         """–°–æ–∑–¥–∞–µ—Ç –º–æ–∫ –æ–±—ä–µ–∫—Ç —Å–æ–æ–±—â–µ–Ω–∏—è."""
40 |         message = MagicMock(spec=Message)
   |
help: Add return type annotation

ANN201 Missing return type annotation for public function `test_get_existing_user`
  --> tests\integration\test_message_handler.py:48:15
   |
47 |     @pytest.mark.asyncio
48 |     async def test_get_existing_user(self, mock_message, mock_session):
   |               ^^^^^^^^^^^^^^^^^^^^^^
49 |         """–¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
50 |         # Arrange
   |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_message`
  --> tests\integration\test_message_handler.py:48:44
   |
47 |     @pytest.mark.asyncio
48 |     async def test_get_existing_user(self, mock_message, mock_session):
   |                                            ^^^^^^^^^^^^
49 |         """–¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
50 |         # Arrange
   |

ANN001 Missing type annotation for function argument `mock_session`
  --> tests\integration\test_message_handler.py:48:58
   |
47 |     @pytest.mark.asyncio
48 |     async def test_get_existing_user(self, mock_message, mock_session):
   |                                                          ^^^^^^^^^^^^
49 |         """–¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
50 |         # Arrange
   |

ANN201 Missing return type annotation for public function `test_user_not_found`
  --> tests\integration\test_message_handler.py:74:15
   |
73 |     @pytest.mark.asyncio
74 |     async def test_user_not_found(self, mock_message, mock_session):
   |               ^^^^^^^^^^^^^^^^^^^
75 |         """–¢–µ—Å—Ç —Å–ª—É—á–∞—è –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω."""
76 |         # Arrange
   |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_message`
  --> tests\integration\test_message_handler.py:74:41
   |
73 |     @pytest.mark.asyncio
74 |     async def test_user_not_found(self, mock_message, mock_session):
   |                                         ^^^^^^^^^^^^
75 |         """–¢–µ—Å—Ç —Å–ª—É—á–∞—è –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω."""
76 |         # Arrange
   |

ANN001 Missing type annotation for function argument `mock_session`
  --> tests\integration\test_message_handler.py:74:55
   |
73 |     @pytest.mark.asyncio
74 |     async def test_user_not_found(self, mock_message, mock_session):
   |                                                       ^^^^^^^^^^^^
75 |         """–¢–µ—Å—Ç —Å–ª—É—á–∞—è –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω."""
76 |         # Arrange
   |

ANN201 Missing return type annotation for public function `test_message_without_user`
  --> tests\integration\test_message_handler.py:89:15
   |
88 |     @pytest.mark.asyncio
89 |     async def test_message_without_user(self, mock_session):
   |               ^^^^^^^^^^^^^^^^^^^^^^^^^
90 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
91 |         # Arrange
   |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_session`
  --> tests\integration\test_message_handler.py:89:47
   |
88 |     @pytest.mark.asyncio
89 |     async def test_message_without_user(self, mock_session):
   |                                               ^^^^^^^^^^^^
90 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
91 |         # Arrange
   |

ARG002 Unused method argument: `mock_session`
  --> tests\integration\test_message_handler.py:89:47
   |
88 |     @pytest.mark.asyncio
89 |     async def test_message_without_user(self, mock_session):
   |                                               ^^^^^^^^^^^^
90 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
91 |         # Arrange
   |

ANN201 Missing return type annotation for public function `test_database_error`
   --> tests\integration\test_message_handler.py:102:15
    |
101 |     @pytest.mark.asyncio
102 |     async def test_database_error(self, mock_message, mock_session):
    |               ^^^^^^^^^^^^^^^^^^^
103 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö."""
104 |         # Arrange
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_message`
   --> tests\integration\test_message_handler.py:102:41
    |
101 |     @pytest.mark.asyncio
102 |     async def test_database_error(self, mock_message, mock_session):
    |                                         ^^^^^^^^^^^^
103 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö."""
104 |         # Arrange
    |

ANN001 Missing type annotation for function argument `mock_session`
   --> tests\integration\test_message_handler.py:102:55
    |
101 |     @pytest.mark.asyncio
102 |     async def test_database_error(self, mock_message, mock_session):
    |                                                       ^^^^^^^^^^^^
103 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö."""
104 |         # Arrange
    |

ANN201 Missing return type annotation for public function `test_get_conversation_history`
   --> tests\integration\test_message_handler.py:122:15
    |
121 |     @pytest.mark.asyncio
122 |     async def test_get_conversation_history(self, mock_session):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
123 |         """–¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–æ–≤."""
124 |         # Arrange
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_session`
   --> tests\integration\test_message_handler.py:122:51
    |
121 |     @pytest.mark.asyncio
122 |     async def test_get_conversation_history(self, mock_session):
    |                                                   ^^^^^^^^^^^^
123 |         """–¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–æ–≤."""
124 |         # Arrange
    |

DTZ001 `datetime.datetime()` called without a `tzinfo` argument
   --> tests\integration\test_message_handler.py:131:28
    |
129 |                 role="USER",
130 |                 content="Hello",
131 |                 created_at=datetime(2025, 9, 12, 10, 0),
    |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
132 |             ),
133 |             Conversation(
    |
help: Pass a `datetime.timezone` object to the `tzinfo` parameter

DTZ001 `datetime.datetime()` called without a `tzinfo` argument
   --> tests\integration\test_message_handler.py:137:28
    |
135 |                 role="ASSISTANT",
136 |                 content="Hi there!",
137 |                 created_at=datetime(2025, 9, 12, 10, 1),
    |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
138 |             ),
139 |         ]
    |
help: Pass a `datetime.timezone` object to the `tzinfo` parameter

ANN201 Missing return type annotation for public function `test_empty_conversation_history`
   --> tests\integration\test_message_handler.py:157:15
    |
156 |     @pytest.mark.asyncio
157 |     async def test_empty_conversation_history(self, mock_session):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
158 |         """–¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –ø—É—Å—Ç–æ–π –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–æ–≤."""
159 |         # Arrange
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_session`
   --> tests\integration\test_message_handler.py:157:53
    |
156 |     @pytest.mark.asyncio
157 |     async def test_empty_conversation_history(self, mock_session):
    |                                                     ^^^^^^^^^^^^
158 |         """–¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –ø—É—Å—Ç–æ–π –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–æ–≤."""
159 |         # Arrange
    |

ANN201 Missing return type annotation for public function `test_conversation_history_database_error`
   --> tests\integration\test_message_handler.py:171:15
    |
170 |     @pytest.mark.asyncio
171 |     async def test_conversation_history_database_error(self, mock_session):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
172 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∏—Å—Ç–æ—Ä–∏–∏."""
173 |         # Arrange
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_session`
   --> tests\integration\test_message_handler.py:171:62
    |
170 |     @pytest.mark.asyncio
171 |     async def test_conversation_history_database_error(self, mock_session):
    |                                                              ^^^^^^^^^^^^
172 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∏—Å—Ç–æ—Ä–∏–∏."""
173 |         # Arrange
    |

ANN201 Missing return type annotation for public function `test_save_conversation_success`
   --> tests\integration\test_message_handler.py:187:15
    |
186 |     @pytest.mark.asyncio
187 |     async def test_save_conversation_success(self, mock_session):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
188 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞."""
189 |         # Arrange
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_session`
   --> tests\integration\test_message_handler.py:187:52
    |
186 |     @pytest.mark.asyncio
187 |     async def test_save_conversation_success(self, mock_session):
    |                                                    ^^^^^^^^^^^^
188 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞."""
189 |         # Arrange
    |

ANN201 Missing return type annotation for public function `test_save_conversation_database_error`
   --> tests\integration\test_message_handler.py:214:15
    |
213 |     @pytest.mark.asyncio
214 |     async def test_save_conversation_database_error(self, mock_session):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
215 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–∫–∏ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∏–∞–ª–æ–≥–∞."""
216 |         # Arrange
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_session`
   --> tests\integration\test_message_handler.py:214:59
    |
213 |     @pytest.mark.asyncio
214 |     async def test_save_conversation_database_error(self, mock_session):
    |                                                           ^^^^^^^^^^^^
215 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–∫–∏ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∏–∞–ª–æ–≥–∞."""
216 |         # Arrange
    |

ANN201 Missing return type annotation for public function `test_create_system_message`
   --> tests\integration\test_message_handler.py:238:9
    |
236 |     """–¢–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏ create_system_message."""
237 |
238 |     def test_create_system_message(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^
239 |         """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è."""
240 |         # Act
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `mock_user`
   --> tests\integration\test_message_handler.py:254:9
    |
253 |     @pytest.fixture
254 |     def mock_user(self):
    |         ^^^^^^^^^
255 |         """–°–æ–∑–¥–∞–µ—Ç –º–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
256 |         user = User(
    |
help: Add return type annotation

RET504 Unnecessary assignment to `user` before `return` statement
   --> tests\integration\test_message_handler.py:262:16
    |
260 |             daily_message_count=1,
261 |         )
262 |         return user
    |                ^^^^
263 |
264 |     @pytest.mark.asyncio
    |
help: Remove unnecessary assignment

ANN201 Missing return type annotation for public function `test_generate_ai_response_success`
   --> tests\integration\test_message_handler.py:265:15
    |
264 |     @pytest.mark.asyncio
265 |     async def test_generate_ai_response_success(self, mock_user, mock_session):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
266 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ AI –æ—Ç–≤–µ—Ç–∞."""
267 |         # Arrange
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_user`
   --> tests\integration\test_message_handler.py:265:55
    |
264 |     @pytest.mark.asyncio
265 |     async def test_generate_ai_response_success(self, mock_user, mock_session):
    |                                                       ^^^^^^^^^
266 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ AI –æ—Ç–≤–µ—Ç–∞."""
267 |         # Arrange
    |

ANN001 Missing type annotation for function argument `mock_session`
   --> tests\integration\test_message_handler.py:265:66
    |
264 |     @pytest.mark.asyncio
265 |     async def test_generate_ai_response_success(self, mock_user, mock_session):
    |                                                                  ^^^^^^^^^^^^
266 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ AI –æ—Ç–≤–µ—Ç–∞."""
267 |         # Arrange
    |

ANN201 Missing return type annotation for public function `test_generate_ai_response_api_error`
   --> tests\integration\test_message_handler.py:301:15
    |
300 |     @pytest.mark.asyncio
301 |     async def test_generate_ai_response_api_error(self, mock_user, mock_session):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
302 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–∫–∏ AI API."""
303 |         # Arrange
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_user`
   --> tests\integration\test_message_handler.py:301:57
    |
300 |     @pytest.mark.asyncio
301 |     async def test_generate_ai_response_api_error(self, mock_user, mock_session):
    |                                                         ^^^^^^^^^
302 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–∫–∏ AI API."""
303 |         # Arrange
    |

ANN001 Missing type annotation for function argument `mock_session`
   --> tests\integration\test_message_handler.py:301:68
    |
300 |     @pytest.mark.asyncio
301 |     async def test_generate_ai_response_api_error(self, mock_user, mock_session):
    |                                                                    ^^^^^^^^^^^^
302 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–∫–∏ AI API."""
303 |         # Arrange
    |

ANN201 Missing return type annotation for public function `test_generate_ai_response_unexpected_error`
   --> tests\integration\test_message_handler.py:331:15
    |
330 |     @pytest.mark.asyncio
331 |     async def test_generate_ai_response_unexpected_error(self, mock_user, mock_session):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
332 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–π –æ—à–∏–±–∫–∏."""
333 |         # Arrange
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_user`
   --> tests\integration\test_message_handler.py:331:64
    |
330 |     @pytest.mark.asyncio
331 |     async def test_generate_ai_response_unexpected_error(self, mock_user, mock_session):
    |                                                                ^^^^^^^^^
332 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–π –æ—à–∏–±–∫–∏."""
333 |         # Arrange
    |

ANN001 Missing type annotation for function argument `mock_session`
   --> tests\integration\test_message_handler.py:331:75
    |
330 |     @pytest.mark.asyncio
331 |     async def test_generate_ai_response_unexpected_error(self, mock_user, mock_session):
    |                                                                           ^^^^^^^^^^^^
332 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–π –æ—à–∏–±–∫–∏."""
333 |         # Arrange
    |

ANN201 Missing return type annotation for public function `mock_message`
   --> tests\integration\test_message_handler.py:357:9
    |
356 |     @pytest.fixture
357 |     def mock_message(self):
    |         ^^^^^^^^^^^^
358 |         """–°–æ–∑–¥–∞–µ—Ç –ø–æ–ª–Ω—ã–π –º–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏—è."""
359 |         message = MagicMock(spec=Message)
    |
help: Add return type annotation

ANN201 Missing return type annotation for public function `mock_user`
   --> tests\integration\test_message_handler.py:370:9
    |
369 |     @pytest.fixture
370 |     def mock_user(self):
    |         ^^^^^^^^^
371 |         """–°–æ–∑–¥–∞–µ—Ç –º–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –ª–∏–º–∏—Ç–∞–º–∏."""
372 |         user = MagicMock(spec=User)
    |
help: Add return type annotation

ANN201 Missing return type annotation for public function `test_handle_text_message_success`
   --> tests\integration\test_message_handler.py:381:15
    |
380 |     @pytest.mark.asyncio
381 |     async def test_handle_text_message_success(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
382 |         self,
383 |         mock_message,
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_message`
   --> tests\integration\test_message_handler.py:383:9
    |
381 |     async def test_handle_text_message_success(
382 |         self,
383 |         mock_message,
    |         ^^^^^^^^^^^^
384 |         mock_user,
385 |         mock_session,
    |

ANN001 Missing type annotation for function argument `mock_user`
   --> tests\integration\test_message_handler.py:384:9
    |
382 |         self,
383 |         mock_message,
384 |         mock_user,
    |         ^^^^^^^^^
385 |         mock_session,
386 |     ):
    |

ANN001 Missing type annotation for function argument `mock_session`
   --> tests\integration\test_message_handler.py:385:9
    |
383 |         mock_message,
384 |         mock_user,
385 |         mock_session,
    |         ^^^^^^^^^^^^
386 |     ):
387 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è."""
    |

ANN201 Missing return type annotation for public function `test_handle_text_message_no_user_data`
   --> tests\integration\test_message_handler.py:413:15
    |
412 |     @pytest.mark.asyncio
413 |     async def test_handle_text_message_no_user_data(self):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
414 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
415 |         # Arrange
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_handle_text_message_no_text`
   --> tests\integration\test_message_handler.py:426:15
    |
425 |     @pytest.mark.asyncio
426 |     async def test_handle_text_message_no_text(self, mock_message):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
427 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –±–µ–∑ —Ç–µ–∫—Å—Ç–∞."""
428 |         # Arrange
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_message`
   --> tests\integration\test_message_handler.py:426:54
    |
425 |     @pytest.mark.asyncio
426 |     async def test_handle_text_message_no_text(self, mock_message):
    |                                                      ^^^^^^^^^^^^
427 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –±–µ–∑ —Ç–µ–∫—Å—Ç–∞."""
428 |         # Arrange
    |

ANN201 Missing return type annotation for public function `test_handle_text_message_too_short`
   --> tests\integration\test_message_handler.py:437:15
    |
436 |     @pytest.mark.asyncio
437 |     async def test_handle_text_message_too_short(self, mock_message):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
438 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è."""
439 |         # Arrange
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_message`
   --> tests\integration\test_message_handler.py:437:56
    |
436 |     @pytest.mark.asyncio
437 |     async def test_handle_text_message_too_short(self, mock_message):
    |                                                        ^^^^^^^^^^^^
438 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è."""
439 |         # Arrange
    |

ANN201 Missing return type annotation for public function `test_handle_text_message_too_long`
   --> tests\integration\test_message_handler.py:452:15
    |
451 |     @pytest.mark.asyncio
452 |     async def test_handle_text_message_too_long(self, mock_message):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
453 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è."""
454 |         # Arrange
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_message`
   --> tests\integration\test_message_handler.py:452:55
    |
451 |     @pytest.mark.asyncio
452 |     async def test_handle_text_message_too_long(self, mock_message):
    |                                                       ^^^^^^^^^^^^
453 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è."""
454 |         # Arrange
    |

ANN201 Missing return type annotation for public function `test_handle_text_message_unregistered_user`
   --> tests\integration\test_message_handler.py:465:15
    |
464 |     @pytest.mark.asyncio
465 |     async def test_handle_text_message_unregistered_user(self, mock_message):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
466 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –Ω–µ–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
467 |         # Arrange
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_message`
   --> tests\integration\test_message_handler.py:465:64
    |
464 |     @pytest.mark.asyncio
465 |     async def test_handle_text_message_unregistered_user(self, mock_message):
    |                                                                ^^^^^^^^^^^^
466 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –Ω–µ–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
467 |         # Arrange
    |

ANN201 Missing return type annotation for public function `test_handle_text_message_limit_exceeded`
   --> tests\integration\test_message_handler.py:479:15
    |
478 |     @pytest.mark.asyncio
479 |     async def test_handle_text_message_limit_exceeded(self, mock_message, mock_session):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
480 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞."""
481 |         # Arrange
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_message`
   --> tests\integration\test_message_handler.py:479:61
    |
478 |     @pytest.mark.asyncio
479 |     async def test_handle_text_message_limit_exceeded(self, mock_message, mock_session):
    |                                                             ^^^^^^^^^^^^
480 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞."""
481 |         # Arrange
    |

ANN001 Missing type annotation for function argument `mock_session`
   --> tests\integration\test_message_handler.py:479:75
    |
478 |     @pytest.mark.asyncio
479 |     async def test_handle_text_message_limit_exceeded(self, mock_message, mock_session):
    |                                                                           ^^^^^^^^^^^^
480 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞."""
481 |         # Arrange
    |

ARG002 Unused method argument: `mock_session`
   --> tests\integration\test_message_handler.py:479:75
    |
478 |     @pytest.mark.asyncio
479 |     async def test_handle_text_message_limit_exceeded(self, mock_message, mock_session):
    |                                                                           ^^^^^^^^^^^^
480 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞."""
481 |         # Arrange
    |

ANN201 Missing return type annotation for public function `test_handle_text_message_critical_error`
   --> tests\integration\test_message_handler.py:506:15
    |
505 |     @pytest.mark.asyncio
506 |     async def test_handle_text_message_critical_error(self, mock_message, mock_user):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
507 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–∏."""
508 |         # Arrange
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_message`
   --> tests\integration\test_message_handler.py:506:61
    |
505 |     @pytest.mark.asyncio
506 |     async def test_handle_text_message_critical_error(self, mock_message, mock_user):
    |                                                             ^^^^^^^^^^^^
507 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–∏."""
508 |         # Arrange
    |

ANN001 Missing type annotation for function argument `mock_user`
   --> tests\integration\test_message_handler.py:506:75
    |
505 |     @pytest.mark.asyncio
506 |     async def test_handle_text_message_critical_error(self, mock_message, mock_user):
    |                                                                           ^^^^^^^^^
507 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–∏."""
508 |         # Arrange
    |

ANN201 Missing return type annotation for public function `test_full_message_flow`
   --> tests\integration\test_message_handler.py:528:15
    |
526 |     @pytest.mark.asyncio
527 |     @pytest.mark.integration
528 |     async def test_full_message_flow(self, mock_message, mock_user, mock_session):
    |               ^^^^^^^^^^^^^^^^^^^^^^
529 |         """–¢–µ—Å—Ç –ø–æ–ª–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è."""
530 |         # Arrange - –º–æ–∫–∞–µ–º –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_message`
   --> tests\integration\test_message_handler.py:528:44
    |
526 |     @pytest.mark.asyncio
527 |     @pytest.mark.integration
528 |     async def test_full_message_flow(self, mock_message, mock_user, mock_session):
    |                                            ^^^^^^^^^^^^
529 |         """–¢–µ—Å—Ç –ø–æ–ª–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è."""
530 |         # Arrange - –º–æ–∫–∞–µ–º –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    |

ANN001 Missing type annotation for function argument `mock_user`
   --> tests\integration\test_message_handler.py:528:58
    |
526 |     @pytest.mark.asyncio
527 |     @pytest.mark.integration
528 |     async def test_full_message_flow(self, mock_message, mock_user, mock_session):
    |                                                          ^^^^^^^^^
529 |         """–¢–µ—Å—Ç –ø–æ–ª–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è."""
530 |         # Arrange - –º–æ–∫–∞–µ–º –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    |

ANN001 Missing type annotation for function argument `mock_session`
   --> tests\integration\test_message_handler.py:528:69
    |
526 |     @pytest.mark.asyncio
527 |     @pytest.mark.integration
528 |     async def test_full_message_flow(self, mock_message, mock_user, mock_session):
    |                                                                     ^^^^^^^^^^^^
529 |         """–¢–µ—Å—Ç –ø–æ–ª–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è."""
530 |         # Arrange - –º–æ–∫–∞–µ–º –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    |

ANN201 Missing return type annotation for public function `test_provider_initialization`
  --> tests\integration\test_openrouter_provider.py:29:9
   |
27 |     """–¢–µ—Å—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ OpenRouter –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
28 |
29 |     def test_provider_initialization(self, mock_config):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
30 |         """–¢–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
31 |         provider = OpenRouterProvider()
   |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_config`
  --> tests\integration\test_openrouter_provider.py:29:44
   |
27 |     """–¢–µ—Å—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ OpenRouter –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
28 |
29 |     def test_provider_initialization(self, mock_config):
   |                                            ^^^^^^^^^^^
30 |         """–¢–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
31 |         provider = OpenRouterProvider()
   |

ARG002 Unused method argument: `mock_config`
  --> tests\integration\test_openrouter_provider.py:29:44
   |
27 |     """–¢–µ—Å—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ OpenRouter –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
28 |
29 |     def test_provider_initialization(self, mock_config):
   |                                            ^^^^^^^^^^^
30 |         """–¢–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
31 |         provider = OpenRouterProvider()
   |

ANN201 Missing return type annotation for public function `test_provider_configuration_check`
  --> tests\integration\test_openrouter_provider.py:37:9
   |
35 |         assert hasattr(provider, "_client")
36 |
37 |     def test_provider_configuration_check(self, mock_config):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
38 |         """–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
39 |         provider = OpenRouterProvider()
   |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_config`
  --> tests\integration\test_openrouter_provider.py:37:49
   |
35 |         assert hasattr(provider, "_client")
36 |
37 |     def test_provider_configuration_check(self, mock_config):
   |                                                 ^^^^^^^^^^^
38 |         """–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
39 |         provider = OpenRouterProvider()
   |

ARG002 Unused method argument: `mock_config`
  --> tests\integration\test_openrouter_provider.py:37:49
   |
35 |         assert hasattr(provider, "_client")
36 |
37 |     def test_provider_configuration_check(self, mock_config):
   |                                                 ^^^^^^^^^^^
38 |         """–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
39 |         provider = OpenRouterProvider()
   |

ANN201 Missing return type annotation for public function `test_provider_availability_check`
  --> tests\integration\test_openrouter_provider.py:56:9
   |
54 |             assert provider_unconfigured.is_configured() is False
55 |
56 |     def test_provider_availability_check(self, mock_config):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
57 |         """–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
58 |         provider = OpenRouterProvider()
   |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_config`
  --> tests\integration\test_openrouter_provider.py:56:48
   |
54 |             assert provider_unconfigured.is_configured() is False
55 |
56 |     def test_provider_availability_check(self, mock_config):
   |                                                ^^^^^^^^^^^
57 |         """–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
58 |         provider = OpenRouterProvider()
   |

ARG002 Unused method argument: `mock_config`
  --> tests\integration\test_openrouter_provider.py:56:48
   |
54 |             assert provider_unconfigured.is_configured() is False
55 |
56 |     def test_provider_availability_check(self, mock_config):
   |                                                ^^^^^^^^^^^
57 |         """–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
58 |         provider = OpenRouterProvider()
   |

E501 Line too long (92 > 88)
  --> tests\integration\test_openrouter_provider.py:61:89
   |
60 |         # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–æ–≤–∞–π–¥–µ—Ä —Å—á–∏—Ç–∞–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
61 |         # Note: is_available() is async, –Ω–æ –≤ –ø—Ä–æ—Å—Ç—ã—Ö —Ç–µ—Å—Ç–∞—Ö –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å is_configured()
   |                                                                                         ^^^^
62 |         assert provider.is_configured() is True
   |

ANN201 Missing return type annotation for public function `provider`
  --> tests\integration\test_openrouter_provider.py:71:9
   |
70 |     @pytest.fixture
71 |     def provider(self, mock_config):
   |         ^^^^^^^^
72 |         """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤."""
73 |         return OpenRouterProvider()
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `mock_config`
  --> tests\integration\test_openrouter_provider.py:71:24
   |
70 |     @pytest.fixture
71 |     def provider(self, mock_config):
   |                        ^^^^^^^^^^^
72 |         """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤."""
73 |         return OpenRouterProvider()
   |

ARG002 Unused method argument: `mock_config`
  --> tests\integration\test_openrouter_provider.py:71:24
   |
70 |     @pytest.fixture
71 |     def provider(self, mock_config):
   |                        ^^^^^^^^^^^
72 |         """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤."""
73 |         return OpenRouterProvider()
   |

ANN201 Missing return type annotation for public function `sample_messages`
  --> tests\integration\test_openrouter_provider.py:76:9
   |
75 |     @pytest.fixture
76 |     def sample_messages(self):
   |         ^^^^^^^^^^^^^^^
77 |         """–ü—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —Ç–µ—Å—Ç–æ–≤."""
78 |         return [
   |
help: Add return type annotation

ANN201 Missing return type annotation for public function `test_successful_api_request`
  --> tests\integration\test_openrouter_provider.py:84:15
   |
83 |     @pytest.mark.asyncio
84 |     async def test_successful_api_request(self, provider, sample_messages):
   |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
85 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ API –∑–∞–ø—Ä–æ—Å–∞."""
86 |         # –ú–æ–∫–∞–µ–º HTTP –æ—Ç–≤–µ—Ç
   |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
  --> tests\integration\test_openrouter_provider.py:84:49
   |
83 |     @pytest.mark.asyncio
84 |     async def test_successful_api_request(self, provider, sample_messages):
   |                                                 ^^^^^^^^
85 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ API –∑–∞–ø—Ä–æ—Å–∞."""
86 |         # –ú–æ–∫–∞–µ–º HTTP –æ—Ç–≤–µ—Ç
   |

ANN001 Missing type annotation for function argument `sample_messages`
  --> tests\integration\test_openrouter_provider.py:84:59
   |
83 |     @pytest.mark.asyncio
84 |     async def test_successful_api_request(self, provider, sample_messages):
   |                                                           ^^^^^^^^^^^^^^^
85 |         """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ API –∑–∞–ø—Ä–æ—Å–∞."""
86 |         # –ú–æ–∫–∞–µ–º HTTP –æ—Ç–≤–µ—Ç
   |

ANN201 Missing return type annotation for public function `test_api_request_with_parameters`
   --> tests\integration\test_openrouter_provider.py:122:15
    |
121 |     @pytest.mark.asyncio
122 |     async def test_api_request_with_parameters(self, provider, sample_messages):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
123 |         """–¢–µ—Å—Ç API –∑–∞–ø—Ä–æ—Å–∞ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏."""
124 |         mock_response = MagicMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_openrouter_provider.py:122:54
    |
121 |     @pytest.mark.asyncio
122 |     async def test_api_request_with_parameters(self, provider, sample_messages):
    |                                                      ^^^^^^^^
123 |         """–¢–µ—Å—Ç API –∑–∞–ø—Ä–æ—Å–∞ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏."""
124 |         mock_response = MagicMock()
    |

ANN001 Missing type annotation for function argument `sample_messages`
   --> tests\integration\test_openrouter_provider.py:122:64
    |
121 |     @pytest.mark.asyncio
122 |     async def test_api_request_with_parameters(self, provider, sample_messages):
    |                                                                ^^^^^^^^^^^^^^^
123 |         """–¢–µ—Å—Ç API –∑–∞–ø—Ä–æ—Å–∞ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏."""
124 |         mock_response = MagicMock()
    |

ANN201 Missing return type annotation for public function `test_http_headers`
   --> tests\integration\test_openrouter_provider.py:147:15
    |
146 |     @pytest.mark.asyncio
147 |     async def test_http_headers(self, provider, sample_messages):
    |               ^^^^^^^^^^^^^^^^^
148 |         """–¢–µ—Å—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö HTTP –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤."""
149 |         mock_response = MagicMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_openrouter_provider.py:147:39
    |
146 |     @pytest.mark.asyncio
147 |     async def test_http_headers(self, provider, sample_messages):
    |                                       ^^^^^^^^
148 |         """–¢–µ—Å—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö HTTP –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤."""
149 |         mock_response = MagicMock()
    |

ANN001 Missing type annotation for function argument `sample_messages`
   --> tests\integration\test_openrouter_provider.py:147:49
    |
146 |     @pytest.mark.asyncio
147 |     async def test_http_headers(self, provider, sample_messages):
    |                                                 ^^^^^^^^^^^^^^^
148 |         """–¢–µ—Å—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö HTTP –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤."""
149 |         mock_response = MagicMock()
    |

SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
   --> tests\integration\test_openrouter_provider.py:157:9
    |
155 |           }
156 |
157 | /         with patch("httpx.AsyncClient.post", return_value=mock_response):
158 | |             with patch(
159 | |                 "httpx.AsyncClient.__init__",
160 | |                 return_value=None,
161 | |             ) as mock_client_init:
    | |__________________________________^
162 |                   # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—á–∏—â–∞–µ–º –∫–ª–∏–µ–Ω—Ç
163 |                   provider._client = None
    |
help: Combine `with` statements

SLF001 Private member accessed: `_client`
   --> tests\integration\test_openrouter_provider.py:163:17
    |
161 |             ) as mock_client_init:
162 |                 # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—á–∏—â–∞–µ–º –∫–ª–∏–µ–Ω—Ç
163 |                 provider._client = None
    |                 ^^^^^^^^^^^^^^^^
164 |
165 |                 await provider.generate_response(sample_messages)
    |

ANN201 Missing return type annotation for public function `provider`
   --> tests\integration\test_openrouter_provider.py:185:9
    |
184 |     @pytest.fixture
185 |     def provider(self, mock_config):
    |         ^^^^^^^^
186 |         """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –æ—à–∏–±–æ–∫."""
187 |         return OpenRouterProvider()
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `mock_config`
   --> tests\integration\test_openrouter_provider.py:185:24
    |
184 |     @pytest.fixture
185 |     def provider(self, mock_config):
    |                        ^^^^^^^^^^^
186 |         """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –æ—à–∏–±–æ–∫."""
187 |         return OpenRouterProvider()
    |

ARG002 Unused method argument: `mock_config`
   --> tests\integration\test_openrouter_provider.py:185:24
    |
184 |     @pytest.fixture
185 |     def provider(self, mock_config):
    |                        ^^^^^^^^^^^
186 |         """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –æ—à–∏–±–æ–∫."""
187 |         return OpenRouterProvider()
    |

ANN201 Missing return type annotation for public function `sample_messages`
   --> tests\integration\test_openrouter_provider.py:190:9
    |
189 |     @pytest.fixture
190 |     def sample_messages(self):
    |         ^^^^^^^^^^^^^^^
191 |         """–°–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –æ—à–∏–±–æ–∫."""
192 |         return [ConversationMessage(role="user", content="–¢–µ—Å—Ç –æ—à–∏–±–æ–∫")]
    |
help: Add return type annotation

ANN201 Missing return type annotation for public function `test_authentication_error`
   --> tests\integration\test_openrouter_provider.py:195:15
    |
194 |     @pytest.mark.asyncio
195 |     async def test_authentication_error(self, provider, sample_messages):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
196 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (401)."""
197 |         mock_response = MagicMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_openrouter_provider.py:195:47
    |
194 |     @pytest.mark.asyncio
195 |     async def test_authentication_error(self, provider, sample_messages):
    |                                               ^^^^^^^^
196 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (401)."""
197 |         mock_response = MagicMock()
    |

ANN001 Missing type annotation for function argument `sample_messages`
   --> tests\integration\test_openrouter_provider.py:195:57
    |
194 |     @pytest.mark.asyncio
195 |     async def test_authentication_error(self, provider, sample_messages):
    |                                                         ^^^^^^^^^^^^^^^
196 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (401)."""
197 |         mock_response = MagicMock()
    |

SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
   --> tests\integration\test_openrouter_provider.py:206:9
    |
204 |           }
205 |
206 | /         with patch("httpx.AsyncClient.post", return_value=mock_response):
207 | |             with pytest.raises(
208 | |                 APIAuthenticationError,
209 | |                 match="–ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á OpenRouter",
210 | |             ):
    | |______________^
211 |                   await provider.generate_response(sample_messages)
    |
help: Combine `with` statements

ANN201 Missing return type annotation for public function `test_quota_exceeded_error`
   --> tests\integration\test_openrouter_provider.py:214:15
    |
213 |     @pytest.mark.asyncio
214 |     async def test_quota_exceeded_error(self, provider, sample_messages):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
215 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –∫–≤–æ—Ç—ã (402)."""
216 |         mock_response = MagicMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_openrouter_provider.py:214:47
    |
213 |     @pytest.mark.asyncio
214 |     async def test_quota_exceeded_error(self, provider, sample_messages):
    |                                               ^^^^^^^^
215 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –∫–≤–æ—Ç—ã (402)."""
216 |         mock_response = MagicMock()
    |

ANN001 Missing type annotation for function argument `sample_messages`
   --> tests\integration\test_openrouter_provider.py:214:57
    |
213 |     @pytest.mark.asyncio
214 |     async def test_quota_exceeded_error(self, provider, sample_messages):
    |                                                         ^^^^^^^^^^^^^^^
215 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –∫–≤–æ—Ç—ã (402)."""
216 |         mock_response = MagicMock()
    |

SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
   --> tests\integration\test_openrouter_provider.py:225:9
    |
223 |           }
224 |
225 | /         with patch("httpx.AsyncClient.post", return_value=mock_response):
226 | |             with pytest.raises(
227 | |                 APIQuotaExceededError,
228 | |                 match="–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á–µ—Ç–µ OpenRouter API",
229 | |             ):
    | |______________^
230 |                   await provider.generate_response(sample_messages)
    |
help: Combine `with` statements

ANN201 Missing return type annotation for public function `test_rate_limit_error`
   --> tests\integration\test_openrouter_provider.py:233:15
    |
232 |     @pytest.mark.asyncio
233 |     async def test_rate_limit_error(self, provider, sample_messages):
    |               ^^^^^^^^^^^^^^^^^^^^^
234 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞ (429)."""
235 |         mock_response = MagicMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_openrouter_provider.py:233:43
    |
232 |     @pytest.mark.asyncio
233 |     async def test_rate_limit_error(self, provider, sample_messages):
    |                                           ^^^^^^^^
234 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞ (429)."""
235 |         mock_response = MagicMock()
    |

ANN001 Missing type annotation for function argument `sample_messages`
   --> tests\integration\test_openrouter_provider.py:233:53
    |
232 |     @pytest.mark.asyncio
233 |     async def test_rate_limit_error(self, provider, sample_messages):
    |                                                     ^^^^^^^^^^^^^^^
234 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞ (429)."""
235 |         mock_response = MagicMock()
    |

SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
   --> tests\integration\test_openrouter_provider.py:244:9
    |
242 |           }
243 |
244 | /         with patch("httpx.AsyncClient.post", return_value=mock_response):
245 | |             with pytest.raises(
246 | |                 APIRateLimitError,
247 | |                 match="–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ OpenRouter API",
248 | |             ):
    | |______________^
249 |                   await provider.generate_response(sample_messages)
    |
help: Combine `with` statements

ANN201 Missing return type annotation for public function `test_server_error`
   --> tests\integration\test_openrouter_provider.py:252:15
    |
251 |     @pytest.mark.asyncio
252 |     async def test_server_error(self, provider, sample_messages):
    |               ^^^^^^^^^^^^^^^^^
253 |         """–¢–µ—Å—Ç —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –æ—à–∏–±–∫–∏ (5xx)."""
254 |         mock_response = MagicMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_openrouter_provider.py:252:39
    |
251 |     @pytest.mark.asyncio
252 |     async def test_server_error(self, provider, sample_messages):
    |                                       ^^^^^^^^
253 |         """–¢–µ—Å—Ç —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –æ—à–∏–±–∫–∏ (5xx)."""
254 |         mock_response = MagicMock()
    |

ANN001 Missing type annotation for function argument `sample_messages`
   --> tests\integration\test_openrouter_provider.py:252:49
    |
251 |     @pytest.mark.asyncio
252 |     async def test_server_error(self, provider, sample_messages):
    |                                                 ^^^^^^^^^^^^^^^
253 |         """–¢–µ—Å—Ç —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –æ—à–∏–±–∫–∏ (5xx)."""
254 |         mock_response = MagicMock()
    |

SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
   --> tests\integration\test_openrouter_provider.py:258:9
    |
256 |           mock_response.text = "Internal Server Error"
257 |
258 | /         with patch("httpx.AsyncClient.post", return_value=mock_response):
259 | |             with pytest.raises(
260 | |                 APIConnectionError,
261 | |                 match="–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ OpenRouter: 500",
262 | |             ):
    | |______________^
263 |                   await provider.generate_response(sample_messages)
    |
help: Combine `with` statements

ANN201 Missing return type annotation for public function `test_connection_error`
   --> tests\integration\test_openrouter_provider.py:266:15
    |
265 |     @pytest.mark.asyncio
266 |     async def test_connection_error(self, provider, sample_messages):
    |               ^^^^^^^^^^^^^^^^^^^^^
267 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è."""
268 |         with patch(
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_openrouter_provider.py:266:43
    |
265 |     @pytest.mark.asyncio
266 |     async def test_connection_error(self, provider, sample_messages):
    |                                           ^^^^^^^^
267 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è."""
268 |         with patch(
    |

ANN001 Missing type annotation for function argument `sample_messages`
   --> tests\integration\test_openrouter_provider.py:266:53
    |
265 |     @pytest.mark.asyncio
266 |     async def test_connection_error(self, provider, sample_messages):
    |                                                     ^^^^^^^^^^^^^^^
267 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è."""
268 |         with patch(
    |

SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
   --> tests\integration\test_openrouter_provider.py:268:9
    |
266 |       async def test_connection_error(self, provider, sample_messages):
267 |           """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è."""
268 | /         with patch(
269 | |             "httpx.AsyncClient.post",
270 | |             side_effect=httpx.ConnectError("Connection failed"),
271 | |         ):
272 | |             with pytest.raises(
273 | |                 APIConnectionError,
274 | |                 match="–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ OpenRouter API",
275 | |             ):
    | |______________^
276 |                   await provider.generate_response(sample_messages)
    |
help: Combine `with` statements

ANN201 Missing return type annotation for public function `test_timeout_error`
   --> tests\integration\test_openrouter_provider.py:279:15
    |
278 |     @pytest.mark.asyncio
279 |     async def test_timeout_error(self, provider, sample_messages):
    |               ^^^^^^^^^^^^^^^^^^
280 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ —Ç–∞–π–º–∞—É—Ç–∞."""
281 |         with patch(
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_openrouter_provider.py:279:40
    |
278 |     @pytest.mark.asyncio
279 |     async def test_timeout_error(self, provider, sample_messages):
    |                                        ^^^^^^^^
280 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ —Ç–∞–π–º–∞—É—Ç–∞."""
281 |         with patch(
    |

ANN001 Missing type annotation for function argument `sample_messages`
   --> tests\integration\test_openrouter_provider.py:279:50
    |
278 |     @pytest.mark.asyncio
279 |     async def test_timeout_error(self, provider, sample_messages):
    |                                                  ^^^^^^^^^^^^^^^
280 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ —Ç–∞–π–º–∞—É—Ç–∞."""
281 |         with patch(
    |

SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
   --> tests\integration\test_openrouter_provider.py:281:9
    |
279 |       async def test_timeout_error(self, provider, sample_messages):
280 |           """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ —Ç–∞–π–º–∞—É—Ç–∞."""
281 | /         with patch(
282 | |             "httpx.AsyncClient.post",
283 | |             side_effect=httpx.TimeoutException("Request timed out"),
284 | |         ):
285 | |             with pytest.raises(
286 | |                 APIConnectionError,
287 | |                 match="Timeout –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ OpenRouter API",
288 | |             ):
    | |______________^
289 |                   await provider.generate_response(sample_messages)
    |
help: Combine `with` statements

ANN201 Missing return type annotation for public function `test_invalid_json_response`
   --> tests\integration\test_openrouter_provider.py:292:15
    |
291 |     @pytest.mark.asyncio
292 |     async def test_invalid_json_response(self, provider, sample_messages):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^
293 |         """–¢–µ—Å—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ JSON –æ—Ç–≤–µ—Ç–∞."""
294 |         mock_response = MagicMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_openrouter_provider.py:292:48
    |
291 |     @pytest.mark.asyncio
292 |     async def test_invalid_json_response(self, provider, sample_messages):
    |                                                ^^^^^^^^
293 |         """–¢–µ—Å—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ JSON –æ—Ç–≤–µ—Ç–∞."""
294 |         mock_response = MagicMock()
    |

ANN001 Missing type annotation for function argument `sample_messages`
   --> tests\integration\test_openrouter_provider.py:292:58
    |
291 |     @pytest.mark.asyncio
292 |     async def test_invalid_json_response(self, provider, sample_messages):
    |                                                          ^^^^^^^^^^^^^^^
293 |         """–¢–µ—Å—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ JSON –æ—Ç–≤–µ—Ç–∞."""
294 |         mock_response = MagicMock()
    |

SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
   --> tests\integration\test_openrouter_provider.py:299:9
    |
297 |           mock_response.text = "Invalid response"
298 |
299 | /         with patch("httpx.AsyncClient.post", return_value=mock_response):
300 | |             with pytest.raises(APIConnectionError, match="Invalid JSON"):
    | |_________________________________________________________________________^
301 |                   await provider.generate_response(sample_messages)
    |
help: Combine `with` statements

ANN201 Missing return type annotation for public function `provider`
   --> tests\integration\test_openrouter_provider.py:310:9
    |
309 |     @pytest.fixture
310 |     def provider(self, mock_config):
    |         ^^^^^^^^
311 |         """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞."""
312 |         return OpenRouterProvider()
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `mock_config`
   --> tests\integration\test_openrouter_provider.py:310:24
    |
309 |     @pytest.fixture
310 |     def provider(self, mock_config):
    |                        ^^^^^^^^^^^
311 |         """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞."""
312 |         return OpenRouterProvider()
    |

ARG002 Unused method argument: `mock_config`
   --> tests\integration\test_openrouter_provider.py:310:24
    |
309 |     @pytest.fixture
310 |     def provider(self, mock_config):
    |                        ^^^^^^^^^^^
311 |         """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞."""
312 |         return OpenRouterProvider()
    |

ANN201 Missing return type annotation for public function `test_minimal_response_parsing`
   --> tests\integration\test_openrouter_provider.py:315:15
    |
314 |     @pytest.mark.asyncio
315 |     async def test_minimal_response_parsing(self, provider):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
316 |         """–¢–µ—Å—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞."""
317 |         mock_response = MagicMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_openrouter_provider.py:315:51
    |
314 |     @pytest.mark.asyncio
315 |     async def test_minimal_response_parsing(self, provider):
    |                                                   ^^^^^^^^
316 |         """–¢–µ—Å—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞."""
317 |         mock_response = MagicMock()
    |

ANN201 Missing return type annotation for public function `test_empty_content_handling`
   --> tests\integration\test_openrouter_provider.py:335:15
    |
334 |     @pytest.mark.asyncio
335 |     async def test_empty_content_handling(self, provider):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
336 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—É—Å—Ç–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞."""
337 |         mock_response = MagicMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_openrouter_provider.py:335:49
    |
334 |     @pytest.mark.asyncio
335 |     async def test_empty_content_handling(self, provider):
    |                                                 ^^^^^^^^
336 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—É—Å—Ç–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞."""
337 |         mock_response = MagicMock()
    |

SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
   --> tests\integration\test_openrouter_provider.py:345:9
    |
343 |           messages = [ConversationMessage(role="user", content="–¢–µ—Å—Ç")]
344 |
345 | /         with patch("httpx.AsyncClient.post", return_value=mock_response):
346 | |             with pytest.raises(
347 | |                 APIConnectionError,
348 | |                 match="–ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç OpenRouter API",
349 | |             ):
    | |______________^
350 |                   await provider.generate_response(messages)
    |
help: Combine `with` statements

ANN201 Missing return type annotation for public function `test_missing_choices_handling`
   --> tests\integration\test_openrouter_provider.py:353:15
    |
352 |     @pytest.mark.asyncio
353 |     async def test_missing_choices_handling(self, provider):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
354 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö choices."""
355 |         mock_response = MagicMock()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `provider`
   --> tests\integration\test_openrouter_provider.py:353:51
    |
352 |     @pytest.mark.asyncio
353 |     async def test_missing_choices_handling(self, provider):
    |                                                   ^^^^^^^^
354 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö choices."""
355 |         mock_response = MagicMock()
    |

SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
   --> tests\integration\test_openrouter_provider.py:361:9
    |
359 |           messages = [ConversationMessage(role="user", content="–¢–µ—Å—Ç")]
360 |
361 | /         with patch("httpx.AsyncClient.post", return_value=mock_response):
362 | |             with pytest.raises(
363 | |                 APIConnectionError,
364 | |                 match="–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç OpenRouter API",
365 | |             ):
    | |______________^
366 |                   await provider.generate_response(messages)
    |
help: Combine `with` statements

ERA001 Found commented-out code
   --> tests\integration\test_openrouter_provider.py:376:5
    |
374 |     # def test_format_messages(self, mock_config):
375 |     #     """–¢–µ—Å—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è API."""
376 |     #     provider = OpenRouterProvider()
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
377 |     #
378 |     #     messages = [
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_openrouter_provider.py:378:5
    |
376 |     #     provider = OpenRouterProvider()
377 |     #
378 |     #     messages = [
    |     ^^^^^^^^^^^^^^^^^^
379 |     #         ConversationMessage(role="system", content="–¢—ã –ø–æ–º–æ—â–Ω–∏–∫"),
380 |     #         ConversationMessage(role="user", content="–ü—Ä–∏–≤–µ—Ç"),
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_openrouter_provider.py:379:5
    |
377 |     #
378 |     #     messages = [
379 |     #         ConversationMessage(role="system", content="–¢—ã –ø–æ–º–æ—â–Ω–∏–∫"),
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
380 |     #         ConversationMessage(role="user", content="–ü—Ä–∏–≤–µ—Ç"),
381 |     #         ConversationMessage(role="assistant", content="–ü—Ä–∏–≤–µ—Ç!")
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_openrouter_provider.py:380:5
    |
378 |     #     messages = [
379 |     #         ConversationMessage(role="system", content="–¢—ã –ø–æ–º–æ—â–Ω–∏–∫"),
380 |     #         ConversationMessage(role="user", content="–ü—Ä–∏–≤–µ—Ç"),
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
381 |     #         ConversationMessage(role="assistant", content="–ü—Ä–∏–≤–µ—Ç!")
382 |     #     ]
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_openrouter_provider.py:381:5
    |
379 |     #         ConversationMessage(role="system", content="–¢—ã –ø–æ–º–æ—â–Ω–∏–∫"),
380 |     #         ConversationMessage(role="user", content="–ü—Ä–∏–≤–µ—Ç"),
381 |     #         ConversationMessage(role="assistant", content="–ü—Ä–∏–≤–µ—Ç!")
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
382 |     #     ]
383 |     #
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_openrouter_provider.py:382:5
    |
380 |     #         ConversationMessage(role="user", content="–ü—Ä–∏–≤–µ—Ç"),
381 |     #         ConversationMessage(role="assistant", content="–ü—Ä–∏–≤–µ—Ç!")
382 |     #     ]
    |     ^^^^^^^
383 |     #
384 |     #     formatted = provider._format_messages(messages)
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_openrouter_provider.py:384:5
    |
382 |     #     ]
383 |     #
384 |     #     formatted = provider._format_messages(messages)
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
385 |     #
386 |     #     assert len(formatted) == 3
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_openrouter_provider.py:386:5
    |
384 |     #     formatted = provider._format_messages(messages)
385 |     #
386 |     #     assert len(formatted) == 3
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
387 |     #     assert formatted[0]["role"] == "system"
388 |     #     assert formatted[0]["content"] == "–¢—ã –ø–æ–º–æ—â–Ω–∏–∫"
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_openrouter_provider.py:387:5
    |
385 |     #
386 |     #     assert len(formatted) == 3
387 |     #     assert formatted[0]["role"] == "system"
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
388 |     #     assert formatted[0]["content"] == "–¢—ã –ø–æ–º–æ—â–Ω–∏–∫"
389 |     #     assert formatted[1]["role"] == "user"
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_openrouter_provider.py:388:5
    |
386 |     #     assert len(formatted) == 3
387 |     #     assert formatted[0]["role"] == "system"
388 |     #     assert formatted[0]["content"] == "–¢—ã –ø–æ–º–æ—â–Ω–∏–∫"
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
389 |     #     assert formatted[1]["role"] == "user"
390 |     #     assert formatted[2]["role"] == "assistant"
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_openrouter_provider.py:389:5
    |
387 |     #     assert formatted[0]["role"] == "system"
388 |     #     assert formatted[0]["content"] == "–¢—ã –ø–æ–º–æ—â–Ω–∏–∫"
389 |     #     assert formatted[1]["role"] == "user"
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
390 |     #     assert formatted[2]["role"] == "assistant"
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_openrouter_provider.py:390:5
    |
388 |     #     assert formatted[0]["content"] == "–¢—ã –ø–æ–º–æ—â–Ω–∏–∫"
389 |     #     assert formatted[1]["role"] == "user"
390 |     #     assert formatted[2]["role"] == "assistant"
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
391 |
392 |     # def test_prepare_request_data(self, mock_config):
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_openrouter_provider.py:394:5
    |
392 |     # def test_prepare_request_data(self, mock_config):
393 |     #     """–¢–µ—Å—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞."""
394 |     #     provider = OpenRouterProvider()
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
395 |     #
396 |     #     messages = [ConversationMessage(role="user", content="–¢–µ—Å—Ç")]
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_openrouter_provider.py:396:5
    |
394 |     #     provider = OpenRouterProvider()
395 |     #
396 |     #     messages = [ConversationMessage(role="user", content="–¢–µ—Å—Ç")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
397 |     #
398 |     #     request_data = provider._prepare_request_data(
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_openrouter_provider.py:398:5
    |
396 |     #     messages = [ConversationMessage(role="user", content="–¢–µ—Å—Ç")]
397 |     #
398 |     #     request_data = provider._prepare_request_data(
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
399 |     #         messages,
400 |     #         temperature=0.8,
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_openrouter_provider.py:400:5
    |
398 |     #     request_data = provider._prepare_request_data(
399 |     #         messages,
400 |     #         temperature=0.8,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^
401 |     #         max_tokens=100
402 |     #     )
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_openrouter_provider.py:401:5
    |
399 |     #         messages,
400 |     #         temperature=0.8,
401 |     #         max_tokens=100
    |     ^^^^^^^^^^^^^^^^^^^^^^^^
402 |     #     )
403 |     #
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_openrouter_provider.py:402:5
    |
400 |     #         temperature=0.8,
401 |     #         max_tokens=100
402 |     #     )
    |     ^^^^^^^
403 |     #
404 |     #     assert request_data["model"] == mock_config.openrouter.openrouter_model
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_openrouter_provider.py:404:5
    |
402 |     #     )
403 |     #
404 |     #     assert request_data["model"] == mock_config.openrouter.openrouter_model
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
405 |     #     assert request_data["temperature"] == 0.8
406 |     #     assert request_data["max_tokens"] == 100
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_openrouter_provider.py:405:5
    |
403 |     #
404 |     #     assert request_data["model"] == mock_config.openrouter.openrouter_model
405 |     #     assert request_data["temperature"] == 0.8
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
406 |     #     assert request_data["max_tokens"] == 100
407 |     #     assert "messages" in request_data
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_openrouter_provider.py:406:5
    |
404 |     #     assert request_data["model"] == mock_config.openrouter.openrouter_model
405 |     #     assert request_data["temperature"] == 0.8
406 |     #     assert request_data["max_tokens"] == 100
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
407 |     #     assert "messages" in request_data
408 |     #     assert len(request_data["messages"]) == 1
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> tests\integration\test_openrouter_provider.py:408:5
    |
406 |     #     assert request_data["max_tokens"] == 100
407 |     #     assert "messages" in request_data
408 |     #     assert len(request_data["messages"]) == 1
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
help: Remove commented-out code

ANN201 Missing return type annotation for public function `test_provider_close`
   --> tests\integration\test_openrouter_provider.py:417:15
    |
416 |     @pytest.mark.asyncio
417 |     async def test_provider_close(self, mock_config):
    |               ^^^^^^^^^^^^^^^^^^^
418 |         """–¢–µ—Å—Ç –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
419 |         provider = OpenRouterProvider()
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_config`
   --> tests\integration\test_openrouter_provider.py:417:41
    |
416 |     @pytest.mark.asyncio
417 |     async def test_provider_close(self, mock_config):
    |                                         ^^^^^^^^^^^
418 |         """–¢–µ—Å—Ç –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
419 |         provider = OpenRouterProvider()
    |

ARG002 Unused method argument: `mock_config`
   --> tests\integration\test_openrouter_provider.py:417:41
    |
416 |     @pytest.mark.asyncio
417 |     async def test_provider_close(self, mock_config):
    |                                         ^^^^^^^^^^^
418 |         """–¢–µ—Å—Ç –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
419 |         provider = OpenRouterProvider()
    |

SLF001 Private member accessed: `_client`
   --> tests\integration\test_openrouter_provider.py:423:9
    |
421 |         # –°–æ–∑–¥–∞–µ–º –º–æ–∫ –∫–ª–∏–µ–Ω—Ç–∞
422 |         mock_client = AsyncMock()
423 |         provider._client = mock_client
    |         ^^^^^^^^^^^^^^^^
424 |
425 |         await provider.close()
    |

SLF001 Private member accessed: `_client`
   --> tests\integration\test_openrouter_provider.py:428:16
    |
427 |         mock_client.aclose.assert_called_once()
428 |         assert provider._client is None
    |                ^^^^^^^^^^^^^^^^
429 |
430 |     # @pytest.mark.asyncio
    |

ERA001 Found commented-out code
   --> tests\integration\test_openrouter_provider.py:435:5
    |
433 |     #     async with OpenRouterProvider(mock_config.openrouter) as provider:
434 |     #         assert provider is not None
435 |     #         assert hasattr(provider, '_config')
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
436 |     #
437 |     #     # –ü–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–∫—Ä—ã—Ç
    |
help: Remove commented-out code

ANN201 Missing return type annotation for public function `test_real_api_call`
   --> tests\integration\test_openrouter_provider.py:448:15
    |
447 |     @pytest.mark.asyncio
448 |     async def test_real_api_call(self, mock_config):
    |               ^^^^^^^^^^^^^^^^^^
449 |         """–¢–µ—Å—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ API (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–π –∫–ª—é—á)."""
450 |         # –≠—Ç–æ—Ç —Ç–µ—Å—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Ä–µ–∞–ª—å–Ω—ã–π API –∫–ª—é—á
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_config`
   --> tests\integration\test_openrouter_provider.py:448:40
    |
447 |     @pytest.mark.asyncio
448 |     async def test_real_api_call(self, mock_config):
    |                                        ^^^^^^^^^^^
449 |         """–¢–µ—Å—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ API (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–π –∫–ª—é—á)."""
450 |         # –≠—Ç–æ—Ç —Ç–µ—Å—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Ä–µ–∞–ª—å–Ω—ã–π API –∫–ª—é—á
    |

ANN201 Missing return type annotation for public function `test_message_creation`
  --> tests\unit\test_base_ai_provider.py:30:9
   |
28 |     """–¢–µ—Å—Ç—ã –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã ConversationMessage."""
29 |
30 |     def test_message_creation(self):
   |         ^^^^^^^^^^^^^^^^^^^^^
31 |         """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞."""
32 |         msg = ConversationMessage(
   |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_message_with_timestamp`
  --> tests\unit\test_base_ai_provider.py:41:9
   |
39 |         assert msg.timestamp is None  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é None
40 |
41 |     def test_message_with_timestamp(self):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
42 |         """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è —Å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–æ–π."""
43 |         now = datetime.now()
   |
help: Add return type annotation: `None`

DTZ005 `datetime.datetime.now()` called without a `tz` argument
  --> tests\unit\test_base_ai_provider.py:43:15
   |
41 |     def test_message_with_timestamp(self):
42 |         """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è —Å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–æ–π."""
43 |         now = datetime.now()
   |               ^^^^^^^^^^^^^^
44 |         msg = ConversationMessage(
45 |             role="assistant",
   |
help: Pass a `datetime.timezone` object to the `tz` parameter

ANN201 Missing return type annotation for public function `test_message_roles_validation`
  --> tests\unit\test_base_ai_provider.py:54:9
   |
52 |         assert msg.timestamp == now
53 |
54 |     def test_message_roles_validation(self):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
55 |         """–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ä–æ–ª–µ–π —Å–æ–æ–±—â–µ–Ω–∏–π."""
56 |         # –í–∞–ª–∏–¥–Ω—ã–µ —Ä–æ–ª–∏
   |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_message_equality`
  --> tests\unit\test_base_ai_provider.py:63:9
   |
61 |             assert msg.role == role
62 |
63 |     def test_message_equality(self):
   |         ^^^^^^^^^^^^^^^^^^^^^
64 |         """–¢–µ—Å—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π."""
65 |         msg1 = ConversationMessage(role="user", content="–¢–µ—Å—Ç")
   |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_message_string_representation`
  --> tests\unit\test_base_ai_provider.py:73:9
   |
71 |         assert msg1.content != msg3.content
72 |
73 |     def test_message_string_representation(self):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
74 |         """–¢–µ—Å—Ç —Å—Ç—Ä–æ–∫–æ–≤–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è."""
75 |         msg = ConversationMessage(role="user", content="–ö–æ—Ä–æ—Ç–∫–∏–π —Ç–µ—Å—Ç")
   |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_response_creation`
  --> tests\unit\test_base_ai_provider.py:88:9
   |
86 |     """–¢–µ—Å—Ç—ã –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã AIResponse."""
87 |
88 |     def test_response_creation(self):
   |         ^^^^^^^^^^^^^^^^^^^^^^
89 |         """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è AI –æ—Ç–≤–µ—Ç–∞."""
90 |         response = AIResponse(
   |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_cached_response`
   --> tests\unit\test_base_ai_provider.py:105:9
    |
103 |         assert response.cached is False  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
104 |
105 |     def test_cached_response(self):
    |         ^^^^^^^^^^^^^^^^^^^^
106 |         """–¢–µ—Å—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞."""
107 |         response = AIResponse(
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_response_with_minimal_data`
   --> tests\unit\test_base_ai_provider.py:120:9
    |
118 |         assert response.response_time == 0.1
119 |
120 |     def test_response_with_minimal_data(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
121 |         """–¢–µ—Å—Ç –æ—Ç–≤–µ—Ç–∞ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏."""
122 |         response = AIResponse(
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_response_string_representation`
   --> tests\unit\test_base_ai_provider.py:134:9
    |
132 |         assert response.provider == "unknown"
133 |
134 |     def test_response_string_representation(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
135 |         """–¢–µ—Å—Ç —Å—Ç—Ä–æ–∫–æ–≤–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞."""
136 |         response = AIResponse(
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_base_ai_provider_error`
   --> tests\unit\test_base_ai_provider.py:154:9
    |
152 |     """–¢–µ—Å—Ç—ã –¥–ª—è –∏–µ—Ä–∞—Ä—Ö–∏–∏ –æ—à–∏–±–æ–∫ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤."""
153 |
154 |     def test_base_ai_provider_error(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
155 |         """–¢–µ—Å—Ç –±–∞–∑–æ–≤–æ–π –æ—à–∏–±–∫–∏ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
156 |         error = AIProviderError("–ë–∞–∑–æ–≤–∞—è –æ—à–∏–±–∫–∞ AI", "test-provider")
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_api_connection_error`
   --> tests\unit\test_base_ai_provider.py:161:9
    |
159 |         assert isinstance(error, Exception)
160 |
161 |     def test_api_connection_error(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^
162 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API."""
163 |         error = APIConnectionError("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ API", "test-provider")
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_api_authentication_error`
   --> tests\unit\test_base_ai_provider.py:168:9
    |
166 |         assert isinstance(error, AIProviderError)
167 |
168 |     def test_api_authentication_error(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
169 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏."""
170 |         error = APIAuthenticationError("–ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á", "test-provider")
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_api_rate_limit_error`
   --> tests\unit\test_base_ai_provider.py:175:9
    |
173 |         assert isinstance(error, AIProviderError)
174 |
175 |     def test_api_rate_limit_error(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^
176 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞."""
177 |         error = APIRateLimitError("–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤", "test-provider")
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_api_quota_exceeded_error`
   --> tests\unit\test_base_ai_provider.py:182:9
    |
180 |         assert isinstance(error, AIProviderError)
181 |
182 |     def test_api_quota_exceeded_error(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
183 |         """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –∫–≤–æ—Ç—ã."""
184 |         error = APIQuotaExceededError("–ü—Ä–µ–≤—ã—à–µ–Ω–∞ –∫–≤–æ—Ç–∞ API", "test-provider")
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_error_hierarchy`
   --> tests\unit\test_base_ai_provider.py:189:9
    |
187 |         assert isinstance(error, AIProviderError)
188 |
189 |     def test_error_hierarchy(self):
    |         ^^^^^^^^^^^^^^^^^^^^
190 |         """–¢–µ—Å—Ç –∏–µ—Ä–∞—Ä—Ö–∏–∏ –æ—à–∏–±–æ–∫."""
191 |         # –í—Å–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–¥–∫–ª–∞—Å—Å–∞–º–∏ AIProviderError
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_base_provider_is_abstract`
   --> tests\unit\test_base_ai_provider.py:208:9
    |
206 |     """–¢–µ—Å—Ç—ã –¥–ª—è –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–≥–æ –±–∞–∑–æ–≤–æ–≥–æ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
207 |
208 |     def test_base_provider_is_abstract(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
209 |         """–¢–µ—Å—Ç —á—Ç–æ BaseAIProvider —è–≤–ª—è–µ—Ç—Å—è –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–º –∫–ª–∞—Å—Å–æ–º."""
210 |         assert issubclass(BaseAIProvider, ABC)
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_concrete_provider_implementation`
   --> tests\unit\test_base_ai_provider.py:216:9
    |
214 |             BaseAIProvider("test")
215 |
216 |     def test_concrete_provider_implementation(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
217 |         """–¢–µ—Å—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
    |
help: Add return type annotation: `None`

ANN204 Missing return type annotation for special method `__init__`
   --> tests\unit\test_base_ai_provider.py:220:17
    |
219 |         class TestProvider(BaseAIProvider):
220 |             def __init__(self):
    |                 ^^^^^^^^
221 |                 self.name = "test-provider"
    |
help: Add return type annotation: `None`

ANN202 Missing return type annotation for private function `provider_name`
   --> tests\unit\test_base_ai_provider.py:224:17
    |
223 |             @property
224 |             def provider_name(self):
    |                 ^^^^^^^^^^^^^
225 |                 return "test-provider"
    |
help: Add return type annotation: `str`

ANN202 Missing return type annotation for private function `generate_response`
   --> tests\unit\test_base_ai_provider.py:227:23
    |
225 |                 return "test-provider"
226 |
227 |             async def generate_response(
    |                       ^^^^^^^^^^^^^^^^^
228 |                 self,
229 |                 messages,
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `messages`
   --> tests\unit\test_base_ai_provider.py:229:17
    |
227 |             async def generate_response(
228 |                 self,
229 |                 messages,
    |                 ^^^^^^^^
230 |                 temperature=None,
231 |                 max_tokens=None,
    |

ARG002 Unused method argument: `messages`
   --> tests\unit\test_base_ai_provider.py:229:17
    |
227 |             async def generate_response(
228 |                 self,
229 |                 messages,
    |                 ^^^^^^^^
230 |                 temperature=None,
231 |                 max_tokens=None,
    |

ANN001 Missing type annotation for function argument `temperature`
   --> tests\unit\test_base_ai_provider.py:230:17
    |
228 |                 self,
229 |                 messages,
230 |                 temperature=None,
    |                 ^^^^^^^^^^^
231 |                 max_tokens=None,
232 |                 **kwargs,
    |

ARG002 Unused method argument: `temperature`
   --> tests\unit\test_base_ai_provider.py:230:17
    |
228 |                 self,
229 |                 messages,
230 |                 temperature=None,
    |                 ^^^^^^^^^^^
231 |                 max_tokens=None,
232 |                 **kwargs,
    |

ANN001 Missing type annotation for function argument `max_tokens`
   --> tests\unit\test_base_ai_provider.py:231:17
    |
229 |                 messages,
230 |                 temperature=None,
231 |                 max_tokens=None,
    |                 ^^^^^^^^^^
232 |                 **kwargs,
233 |             ):
    |

ARG002 Unused method argument: `max_tokens`
   --> tests\unit\test_base_ai_provider.py:231:17
    |
229 |                 messages,
230 |                 temperature=None,
231 |                 max_tokens=None,
    |                 ^^^^^^^^^^
232 |                 **kwargs,
233 |             ):
    |

ANN003 Missing type annotation for `**kwargs`
   --> tests\unit\test_base_ai_provider.py:232:17
    |
230 |                 temperature=None,
231 |                 max_tokens=None,
232 |                 **kwargs,
    |                 ^^^^^^^^
233 |             ):
234 |                 return AIResponse(
    |

ARG002 Unused method argument: `kwargs`
   --> tests\unit\test_base_ai_provider.py:232:19
    |
230 |                 temperature=None,
231 |                 max_tokens=None,
232 |                 **kwargs,
    |                   ^^^^^^
233 |             ):
234 |                 return AIResponse(
    |

ANN202 Missing return type annotation for private function `is_configured`
   --> tests\unit\test_base_ai_provider.py:242:17
    |
240 |                 )
241 |
242 |             def is_configured(self):
    |                 ^^^^^^^^^^^^^
243 |                 return True
    |
help: Add return type annotation: `bool`

ANN202 Missing return type annotation for private function `is_available`
   --> tests\unit\test_base_ai_provider.py:245:23
    |
243 |                 return True
244 |
245 |             async def is_available(self):
    |                       ^^^^^^^^^^^^
246 |                 return True
    |
help: Add return type annotation: `bool`

ANN202 Missing return type annotation for private function `health_check`
   --> tests\unit\test_base_ai_provider.py:248:23
    |
246 |                 return True
247 |
248 |             async def health_check(self):
    |                       ^^^^^^^^^^^^
249 |                 return {"status": "healthy"}
    |
help: Add return type annotation

ANN202 Missing return type annotation for private function `close`
   --> tests\unit\test_base_ai_provider.py:251:23
    |
249 |                 return {"status": "healthy"}
250 |
251 |             async def close(self):
    |                       ^^^^^
252 |                 pass
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_provider_interface_methods`
   --> tests\unit\test_base_ai_provider.py:259:15
    |
258 |     @pytest.mark.asyncio
259 |     async def test_provider_interface_methods(self):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
260 |         """–¢–µ—Å—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –º–µ—Ç–æ–¥–æ–≤ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
    |
help: Add return type annotation: `None`

ANN204 Missing return type annotation for special method `__init__`
   --> tests\unit\test_base_ai_provider.py:263:17
    |
262 |         class MockProvider(BaseAIProvider):
263 |             def __init__(self):
    |                 ^^^^^^^^
264 |                 self.name = "mock-provider"
265 |                 self._configured = True
    |
help: Add return type annotation: `None`

ANN202 Missing return type annotation for private function `provider_name`
   --> tests\unit\test_base_ai_provider.py:269:17
    |
268 |             @property
269 |             def provider_name(self):
    |                 ^^^^^^^^^^^^^
270 |                 return "mock-provider"
    |
help: Add return type annotation: `str`

ANN202 Missing return type annotation for private function `generate_response`
   --> tests\unit\test_base_ai_provider.py:272:23
    |
270 |                 return "mock-provider"
271 |
272 |             async def generate_response(
    |                       ^^^^^^^^^^^^^^^^^
273 |                 self,
274 |                 messages,
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `messages`
   --> tests\unit\test_base_ai_provider.py:274:17
    |
272 |             async def generate_response(
273 |                 self,
274 |                 messages,
    |                 ^^^^^^^^
275 |                 temperature=None,
276 |                 max_tokens=None,
    |

ANN001 Missing type annotation for function argument `temperature`
   --> tests\unit\test_base_ai_provider.py:275:17
    |
273 |                 self,
274 |                 messages,
275 |                 temperature=None,
    |                 ^^^^^^^^^^^
276 |                 max_tokens=None,
277 |                 **kwargs,
    |

ARG002 Unused method argument: `temperature`
   --> tests\unit\test_base_ai_provider.py:275:17
    |
273 |                 self,
274 |                 messages,
275 |                 temperature=None,
    |                 ^^^^^^^^^^^
276 |                 max_tokens=None,
277 |                 **kwargs,
    |

ANN001 Missing type annotation for function argument `max_tokens`
   --> tests\unit\test_base_ai_provider.py:276:17
    |
274 |                 messages,
275 |                 temperature=None,
276 |                 max_tokens=None,
    |                 ^^^^^^^^^^
277 |                 **kwargs,
278 |             ):
    |

ARG002 Unused method argument: `max_tokens`
   --> tests\unit\test_base_ai_provider.py:276:17
    |
274 |                 messages,
275 |                 temperature=None,
276 |                 max_tokens=None,
    |                 ^^^^^^^^^^
277 |                 **kwargs,
278 |             ):
    |

ANN003 Missing type annotation for `**kwargs`
   --> tests\unit\test_base_ai_provider.py:277:17
    |
275 |                 temperature=None,
276 |                 max_tokens=None,
277 |                 **kwargs,
    |                 ^^^^^^^^
278 |             ):
279 |                 return AIResponse(
    |

ARG002 Unused method argument: `kwargs`
   --> tests\unit\test_base_ai_provider.py:277:19
    |
275 |                 temperature=None,
276 |                 max_tokens=None,
277 |                 **kwargs,
    |                   ^^^^^^
278 |             ):
279 |                 return AIResponse(
    |

ANN202 Missing return type annotation for private function `is_configured`
   --> tests\unit\test_base_ai_provider.py:287:17
    |
285 |                 )
286 |
287 |             def is_configured(self):
    |                 ^^^^^^^^^^^^^
288 |                 return self._configured
    |
help: Add return type annotation

ANN202 Missing return type annotation for private function `is_available`
   --> tests\unit\test_base_ai_provider.py:290:23
    |
288 |                 return self._configured
289 |
290 |             async def is_available(self):
    |                       ^^^^^^^^^^^^
291 |                 return self._available
    |
help: Add return type annotation

ANN202 Missing return type annotation for private function `health_check`
   --> tests\unit\test_base_ai_provider.py:293:23
    |
291 |                 return self._available
292 |
293 |             async def health_check(self):
    |                       ^^^^^^^^^^^^
294 |                 return {"status": "healthy" if self._available else "unhealthy"}
    |
help: Add return type annotation

ANN202 Missing return type annotation for private function `close`
   --> tests\unit\test_base_ai_provider.py:296:23
    |
294 |                 return {"status": "healthy" if self._available else "unhealthy"}
295 |
296 |             async def close(self):
    |                       ^^^^^
297 |                 self._available = False
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_provider_configuration_states`
   --> tests\unit\test_base_ai_provider.py:323:15
    |
322 |     @pytest.mark.asyncio
323 |     async def test_provider_configuration_states(self):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
324 |         """–¢–µ—Å—Ç —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞."""
    |
help: Add return type annotation: `None`

ANN204 Missing return type annotation for special method `__init__`
   --> tests\unit\test_base_ai_provider.py:327:17
    |
326 |         class ConfigurableProvider(BaseAIProvider):
327 |             def __init__(self, api_key=None):
    |                 ^^^^^^^^
328 |                 self.name = "configurable-provider"
329 |                 self._api_key = api_key
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `api_key`
   --> tests\unit\test_base_ai_provider.py:327:32
    |
326 |         class ConfigurableProvider(BaseAIProvider):
327 |             def __init__(self, api_key=None):
    |                                ^^^^^^^
328 |                 self.name = "configurable-provider"
329 |                 self._api_key = api_key
    |

ANN202 Missing return type annotation for private function `provider_name`
   --> tests\unit\test_base_ai_provider.py:332:17
    |
331 |             @property
332 |             def provider_name(self):
    |                 ^^^^^^^^^^^^^
333 |                 return "configurable-provider"
    |
help: Add return type annotation: `str`

ANN202 Missing return type annotation for private function `generate_response`
   --> tests\unit\test_base_ai_provider.py:335:23
    |
333 |                 return "configurable-provider"
334 |
335 |             async def generate_response(
    |                       ^^^^^^^^^^^^^^^^^
336 |                 self,
337 |                 messages,
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `messages`
   --> tests\unit\test_base_ai_provider.py:337:17
    |
335 |             async def generate_response(
336 |                 self,
337 |                 messages,
    |                 ^^^^^^^^
338 |                 temperature=None,
339 |                 max_tokens=None,
    |

ARG002 Unused method argument: `messages`
   --> tests\unit\test_base_ai_provider.py:337:17
    |
335 |             async def generate_response(
336 |                 self,
337 |                 messages,
    |                 ^^^^^^^^
338 |                 temperature=None,
339 |                 max_tokens=None,
    |

ANN001 Missing type annotation for function argument `temperature`
   --> tests\unit\test_base_ai_provider.py:338:17
    |
336 |                 self,
337 |                 messages,
338 |                 temperature=None,
    |                 ^^^^^^^^^^^
339 |                 max_tokens=None,
340 |                 **kwargs,
    |

ARG002 Unused method argument: `temperature`
   --> tests\unit\test_base_ai_provider.py:338:17
    |
336 |                 self,
337 |                 messages,
338 |                 temperature=None,
    |                 ^^^^^^^^^^^
339 |                 max_tokens=None,
340 |                 **kwargs,
    |

ANN001 Missing type annotation for function argument `max_tokens`
   --> tests\unit\test_base_ai_provider.py:339:17
    |
337 |                 messages,
338 |                 temperature=None,
339 |                 max_tokens=None,
    |                 ^^^^^^^^^^
340 |                 **kwargs,
341 |             ):
    |

ARG002 Unused method argument: `max_tokens`
   --> tests\unit\test_base_ai_provider.py:339:17
    |
337 |                 messages,
338 |                 temperature=None,
339 |                 max_tokens=None,
    |                 ^^^^^^^^^^
340 |                 **kwargs,
341 |             ):
    |

ANN003 Missing type annotation for `**kwargs`
   --> tests\unit\test_base_ai_provider.py:340:17
    |
338 |                 temperature=None,
339 |                 max_tokens=None,
340 |                 **kwargs,
    |                 ^^^^^^^^
341 |             ):
342 |                 if not self.is_configured():
    |

ARG002 Unused method argument: `kwargs`
   --> tests\unit\test_base_ai_provider.py:340:19
    |
338 |                 temperature=None,
339 |                 max_tokens=None,
340 |                 **kwargs,
    |                   ^^^^^^
341 |             ):
342 |                 if not self.is_configured():
    |

TRY003 Avoid specifying long messages outside the exception class
   --> tests\unit\test_base_ai_provider.py:343:27
    |
341 |               ):
342 |                   if not self.is_configured():
343 |                       raise APIAuthenticationError(
    |  ___________________________^
344 | |                         "–ü—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω",
345 | |                         "configurable",
346 | |                     )
    | |_____________________^
347 |                   return AIResponse(
348 |                       content="–ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç",
    |

EM101 Exception must not use a string literal, assign to variable first
   --> tests\unit\test_base_ai_provider.py:344:25
    |
342 |                 if not self.is_configured():
343 |                     raise APIAuthenticationError(
344 |                         "–ü—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω",
    |                         ^^^^^^^^^^^^^^^^^^^^^^^
345 |                         "configurable",
346 |                     )
    |
help: Assign to variable; remove string literal

ANN202 Missing return type annotation for private function `is_configured`
   --> tests\unit\test_base_ai_provider.py:355:17
    |
353 |                 )
354 |
355 |             def is_configured(self):
    |                 ^^^^^^^^^^^^^
356 |                 return self._api_key is not None and self._api_key != ""
    |
help: Add return type annotation

ANN202 Missing return type annotation for private function `is_available`
   --> tests\unit\test_base_ai_provider.py:358:23
    |
356 |                 return self._api_key is not None and self._api_key != ""
357 |
358 |             async def is_available(self):
    |                       ^^^^^^^^^^^^
359 |                 return self.is_configured()
    |
help: Add return type annotation

ANN202 Missing return type annotation for private function `health_check`
   --> tests\unit\test_base_ai_provider.py:361:23
    |
359 |                 return self.is_configured()
360 |
361 |             async def health_check(self):
    |                       ^^^^^^^^^^^^
362 |                 return {"status": "healthy" if self.is_configured() else "unhealthy"}
    |
help: Add return type annotation

ANN202 Missing return type annotation for private function `close`
   --> tests\unit\test_base_ai_provider.py:364:23
    |
362 |                 return {"status": "healthy" if self.is_configured() else "unhealthy"}
363 |
364 |             async def close(self):
    |                       ^^^^^
365 |                 pass
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_provider_error_handling`
   --> tests\unit\test_base_ai_provider.py:382:15
    |
381 |     @pytest.mark.asyncio
382 |     async def test_provider_error_handling(self):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
383 |         """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–µ."""
    |
help: Add return type annotation: `None`

ANN204 Missing return type annotation for special method `__init__`
   --> tests\unit\test_base_ai_provider.py:386:17
    |
385 |         class ErrorProvider(BaseAIProvider):
386 |             def __init__(self, error_type=None):
    |                 ^^^^^^^^
387 |                 self.name = "error-provider"
388 |                 self._error_type = error_type
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `error_type`
   --> tests\unit\test_base_ai_provider.py:386:32
    |
385 |         class ErrorProvider(BaseAIProvider):
386 |             def __init__(self, error_type=None):
    |                                ^^^^^^^^^^
387 |                 self.name = "error-provider"
388 |                 self._error_type = error_type
    |

ANN202 Missing return type annotation for private function `provider_name`
   --> tests\unit\test_base_ai_provider.py:391:17
    |
390 |             @property
391 |             def provider_name(self):
    |                 ^^^^^^^^^^^^^
392 |                 return "error-provider"
    |
help: Add return type annotation: `str`

ANN202 Missing return type annotation for private function `generate_response`
   --> tests\unit\test_base_ai_provider.py:394:23
    |
392 |                 return "error-provider"
393 |
394 |             async def generate_response(
    |                       ^^^^^^^^^^^^^^^^^
395 |                 self,
396 |                 messages,
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `messages`
   --> tests\unit\test_base_ai_provider.py:396:17
    |
394 |             async def generate_response(
395 |                 self,
396 |                 messages,
    |                 ^^^^^^^^
397 |                 temperature=None,
398 |                 max_tokens=None,
    |

ARG002 Unused method argument: `messages`
   --> tests\unit\test_base_ai_provider.py:396:17
    |
394 |             async def generate_response(
395 |                 self,
396 |                 messages,
    |                 ^^^^^^^^
397 |                 temperature=None,
398 |                 max_tokens=None,
    |

ANN001 Missing type annotation for function argument `temperature`
   --> tests\unit\test_base_ai_provider.py:397:17
    |
395 |                 self,
396 |                 messages,
397 |                 temperature=None,
    |                 ^^^^^^^^^^^
398 |                 max_tokens=None,
399 |                 **kwargs,
    |

ARG002 Unused method argument: `temperature`
   --> tests\unit\test_base_ai_provider.py:397:17
    |
395 |                 self,
396 |                 messages,
397 |                 temperature=None,
    |                 ^^^^^^^^^^^
398 |                 max_tokens=None,
399 |                 **kwargs,
    |

ANN001 Missing type annotation for function argument `max_tokens`
   --> tests\unit\test_base_ai_provider.py:398:17
    |
396 |                 messages,
397 |                 temperature=None,
398 |                 max_tokens=None,
    |                 ^^^^^^^^^^
399 |                 **kwargs,
400 |             ):
    |

ARG002 Unused method argument: `max_tokens`
   --> tests\unit\test_base_ai_provider.py:398:17
    |
396 |                 messages,
397 |                 temperature=None,
398 |                 max_tokens=None,
    |                 ^^^^^^^^^^
399 |                 **kwargs,
400 |             ):
    |

ANN003 Missing type annotation for `**kwargs`
   --> tests\unit\test_base_ai_provider.py:399:17
    |
397 |                 temperature=None,
398 |                 max_tokens=None,
399 |                 **kwargs,
    |                 ^^^^^^^^
400 |             ):
401 |                 if self._error_type == "auth":
    |

ARG002 Unused method argument: `kwargs`
   --> tests\unit\test_base_ai_provider.py:399:19
    |
397 |                 temperature=None,
398 |                 max_tokens=None,
399 |                 **kwargs,
    |                   ^^^^^^
400 |             ):
401 |                 if self._error_type == "auth":
    |

TRY003 Avoid specifying long messages outside the exception class
   --> tests\unit\test_base_ai_provider.py:402:27
    |
400 |             ):
401 |                 if self._error_type == "auth":
402 |                     raise APIAuthenticationError("–û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏", "error")
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
403 |                 if self._error_type == "rate_limit":
404 |                     raise APIRateLimitError("–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç", "error")
    |

EM101 Exception must not use a string literal, assign to variable first
   --> tests\unit\test_base_ai_provider.py:402:50
    |
400 |             ):
401 |                 if self._error_type == "auth":
402 |                     raise APIAuthenticationError("–û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏", "error")
    |                                                  ^^^^^^^^^^^^^^^^^^^^^^^
403 |                 if self._error_type == "rate_limit":
404 |                     raise APIRateLimitError("–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç", "error")
    |
help: Assign to variable; remove string literal

TRY003 Avoid specifying long messages outside the exception class
   --> tests\unit\test_base_ai_provider.py:404:27
    |
402 |                     raise APIAuthenticationError("–û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏", "error")
403 |                 if self._error_type == "rate_limit":
404 |                     raise APIRateLimitError("–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç", "error")
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
405 |                 if self._error_type == "connection":
406 |                     raise APIConnectionError("–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è", "error")
    |

EM101 Exception must not use a string literal, assign to variable first
   --> tests\unit\test_base_ai_provider.py:404:45
    |
402 |                     raise APIAuthenticationError("–û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏", "error")
403 |                 if self._error_type == "rate_limit":
404 |                     raise APIRateLimitError("–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç", "error")
    |                                             ^^^^^^^^^^^^^^^^
405 |                 if self._error_type == "connection":
406 |                     raise APIConnectionError("–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è", "error")
    |
help: Assign to variable; remove string literal

TRY003 Avoid specifying long messages outside the exception class
   --> tests\unit\test_base_ai_provider.py:406:27
    |
404 |                     raise APIRateLimitError("–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç", "error")
405 |                 if self._error_type == "connection":
406 |                     raise APIConnectionError("–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è", "error")
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
407 |                 if self._error_type == "quota":
408 |                     raise APIQuotaExceededError("–ü—Ä–µ–≤—ã—à–µ–Ω–∞ –∫–≤–æ—Ç–∞", "error-provider")
    |

EM101 Exception must not use a string literal, assign to variable first
   --> tests\unit\test_base_ai_provider.py:406:46
    |
404 |                     raise APIRateLimitError("–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç", "error")
405 |                 if self._error_type == "connection":
406 |                     raise APIConnectionError("–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è", "error")
    |                                              ^^^^^^^^^^^^^^^^^^^
407 |                 if self._error_type == "quota":
408 |                     raise APIQuotaExceededError("–ü—Ä–µ–≤—ã—à–µ–Ω–∞ –∫–≤–æ—Ç–∞", "error-provider")
    |
help: Assign to variable; remove string literal

TRY003 Avoid specifying long messages outside the exception class
   --> tests\unit\test_base_ai_provider.py:408:27
    |
406 |                     raise APIConnectionError("–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è", "error")
407 |                 if self._error_type == "quota":
408 |                     raise APIQuotaExceededError("–ü—Ä–µ–≤—ã—à–µ–Ω–∞ –∫–≤–æ—Ç–∞", "error-provider")
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
409 |
410 |                 return AIResponse(
    |

EM101 Exception must not use a string literal, assign to variable first
   --> tests\unit\test_base_ai_provider.py:408:49
    |
406 |                     raise APIConnectionError("–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è", "error")
407 |                 if self._error_type == "quota":
408 |                     raise APIQuotaExceededError("–ü—Ä–µ–≤—ã—à–µ–Ω–∞ –∫–≤–æ—Ç–∞", "error-provider")
    |                                                 ^^^^^^^^^^^^^^^^^
409 |
410 |                 return AIResponse(
    |
help: Assign to variable; remove string literal

ANN202 Missing return type annotation for private function `is_configured`
   --> tests\unit\test_base_ai_provider.py:418:17
    |
416 |                 )
417 |
418 |             def is_configured(self):
    |                 ^^^^^^^^^^^^^
419 |                 return True
    |
help: Add return type annotation: `bool`

ANN202 Missing return type annotation for private function `is_available`
   --> tests\unit\test_base_ai_provider.py:421:23
    |
419 |                 return True
420 |
421 |             async def is_available(self):
    |                       ^^^^^^^^^^^^
422 |                 return True
    |
help: Add return type annotation: `bool`

ANN202 Missing return type annotation for private function `health_check`
   --> tests\unit\test_base_ai_provider.py:424:23
    |
422 |                 return True
423 |
424 |             async def health_check(self):
    |                       ^^^^^^^^^^^^
425 |                 return {"status": "healthy"}
    |
help: Add return type annotation

ANN202 Missing return type annotation for private function `close`
   --> tests\unit\test_base_ai_provider.py:427:23
    |
425 |                 return {"status": "healthy"}
426 |
427 |             async def close(self):
    |                       ^^^^^
428 |                 pass
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_parameter_passing`
   --> tests\unit\test_base_ai_provider.py:461:15
    |
460 |     @pytest.mark.asyncio
461 |     async def test_parameter_passing(self):
    |               ^^^^^^^^^^^^^^^^^^^^^^
462 |         """–¢–µ—Å—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –ø—Ä–æ–≤–∞–π–¥–µ—Ä."""
    |
help: Add return type annotation: `None`

ANN204 Missing return type annotation for special method `__init__`
   --> tests\unit\test_base_ai_provider.py:465:17
    |
464 |         class ParameterProvider(BaseAIProvider):
465 |             def __init__(self):
    |                 ^^^^^^^^
466 |                 self.name = "parameter-provider"
467 |                 self.last_params = {}
    |
help: Add return type annotation: `None`

ANN202 Missing return type annotation for private function `provider_name`
   --> tests\unit\test_base_ai_provider.py:470:17
    |
469 |             @property
470 |             def provider_name(self):
    |                 ^^^^^^^^^^^^^
471 |                 return "parameter-provider"
    |
help: Add return type annotation: `str`

ANN202 Missing return type annotation for private function `generate_response`
   --> tests\unit\test_base_ai_provider.py:473:23
    |
471 |                 return "parameter-provider"
472 |
473 |             async def generate_response(
    |                       ^^^^^^^^^^^^^^^^^
474 |                 self,
475 |                 messages,
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `messages`
   --> tests\unit\test_base_ai_provider.py:475:17
    |
473 |             async def generate_response(
474 |                 self,
475 |                 messages,
    |                 ^^^^^^^^
476 |                 temperature=None,
477 |                 max_tokens=None,
    |

ARG002 Unused method argument: `messages`
   --> tests\unit\test_base_ai_provider.py:475:17
    |
473 |             async def generate_response(
474 |                 self,
475 |                 messages,
    |                 ^^^^^^^^
476 |                 temperature=None,
477 |                 max_tokens=None,
    |

ANN001 Missing type annotation for function argument `temperature`
   --> tests\unit\test_base_ai_provider.py:476:17
    |
474 |                 self,
475 |                 messages,
476 |                 temperature=None,
    |                 ^^^^^^^^^^^
477 |                 max_tokens=None,
478 |                 **kwargs,
    |

ANN001 Missing type annotation for function argument `max_tokens`
   --> tests\unit\test_base_ai_provider.py:477:17
    |
475 |                 messages,
476 |                 temperature=None,
477 |                 max_tokens=None,
    |                 ^^^^^^^^^^
478 |                 **kwargs,
479 |             ):
    |

ANN003 Missing type annotation for `**kwargs`
   --> tests\unit\test_base_ai_provider.py:478:17
    |
476 |                 temperature=None,
477 |                 max_tokens=None,
478 |                 **kwargs,
    |                 ^^^^^^^^
479 |             ):
480 |                 self.last_params = {
    |

ANN202 Missing return type annotation for private function `is_configured`
   --> tests\unit\test_base_ai_provider.py:494:17
    |
492 |                 )
493 |
494 |             def is_configured(self):
    |                 ^^^^^^^^^^^^^
495 |                 return True
    |
help: Add return type annotation: `bool`

ANN202 Missing return type annotation for private function `is_available`
   --> tests\unit\test_base_ai_provider.py:497:23
    |
495 |                 return True
496 |
497 |             async def is_available(self):
    |                       ^^^^^^^^^^^^
498 |                 return True
    |
help: Add return type annotation: `bool`

ANN202 Missing return type annotation for private function `health_check`
   --> tests\unit\test_base_ai_provider.py:500:23
    |
498 |                 return True
499 |
500 |             async def health_check(self):
    |                       ^^^^^^^^^^^^
501 |                 return {"status": "healthy"}
    |
help: Add return type annotation

ANN202 Missing return type annotation for private function `close`
   --> tests\unit\test_base_ai_provider.py:503:23
    |
501 |                 return {"status": "healthy"}
502 |
503 |             async def close(self):
    |                       ^^^^^
504 |                 pass
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_provider_context_manager`
   --> tests\unit\test_base_ai_provider.py:535:15
    |
534 |     @pytest.mark.asyncio
535 |     async def test_provider_context_manager(self):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
536 |         """–¢–µ—Å—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∫–∞–∫ async context manager."""
    |
help: Add return type annotation: `None`

ANN204 Missing return type annotation for special method `__init__`
   --> tests\unit\test_base_ai_provider.py:539:17
    |
538 |         class ContextProvider(BaseAIProvider):
539 |             def __init__(self):
    |                 ^^^^^^^^
540 |                 self.name = "context-provider"
541 |                 self.closed = False
    |
help: Add return type annotation: `None`

ANN202 Missing return type annotation for private function `provider_name`
   --> tests\unit\test_base_ai_provider.py:544:17
    |
543 |             @property
544 |             def provider_name(self):
    |                 ^^^^^^^^^^^^^
545 |                 return "context-provider"
    |
help: Add return type annotation: `str`

ANN202 Missing return type annotation for private function `generate_response`
   --> tests\unit\test_base_ai_provider.py:547:23
    |
545 |                 return "context-provider"
546 |
547 |             async def generate_response(
    |                       ^^^^^^^^^^^^^^^^^
548 |                 self,
549 |                 messages,
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `messages`
   --> tests\unit\test_base_ai_provider.py:549:17
    |
547 |             async def generate_response(
548 |                 self,
549 |                 messages,
    |                 ^^^^^^^^
550 |                 temperature=None,
551 |                 max_tokens=None,
    |

ARG002 Unused method argument: `messages`
   --> tests\unit\test_base_ai_provider.py:549:17
    |
547 |             async def generate_response(
548 |                 self,
549 |                 messages,
    |                 ^^^^^^^^
550 |                 temperature=None,
551 |                 max_tokens=None,
    |

ANN001 Missing type annotation for function argument `temperature`
   --> tests\unit\test_base_ai_provider.py:550:17
    |
548 |                 self,
549 |                 messages,
550 |                 temperature=None,
    |                 ^^^^^^^^^^^
551 |                 max_tokens=None,
552 |                 **kwargs,
    |

ARG002 Unused method argument: `temperature`
   --> tests\unit\test_base_ai_provider.py:550:17
    |
548 |                 self,
549 |                 messages,
550 |                 temperature=None,
    |                 ^^^^^^^^^^^
551 |                 max_tokens=None,
552 |                 **kwargs,
    |

ANN001 Missing type annotation for function argument `max_tokens`
   --> tests\unit\test_base_ai_provider.py:551:17
    |
549 |                 messages,
550 |                 temperature=None,
551 |                 max_tokens=None,
    |                 ^^^^^^^^^^
552 |                 **kwargs,
553 |             ):
    |

ARG002 Unused method argument: `max_tokens`
   --> tests\unit\test_base_ai_provider.py:551:17
    |
549 |                 messages,
550 |                 temperature=None,
551 |                 max_tokens=None,
    |                 ^^^^^^^^^^
552 |                 **kwargs,
553 |             ):
    |

ANN003 Missing type annotation for `**kwargs`
   --> tests\unit\test_base_ai_provider.py:552:17
    |
550 |                 temperature=None,
551 |                 max_tokens=None,
552 |                 **kwargs,
    |                 ^^^^^^^^
553 |             ):
554 |                 if self.closed:
    |

ARG002 Unused method argument: `kwargs`
   --> tests\unit\test_base_ai_provider.py:552:19
    |
550 |                 temperature=None,
551 |                 max_tokens=None,
552 |                 **kwargs,
    |                   ^^^^^^
553 |             ):
554 |                 if self.closed:
    |

TRY003 Avoid specifying long messages outside the exception class
   --> tests\unit\test_base_ai_provider.py:555:27
    |
553 |             ):
554 |                 if self.closed:
555 |                     raise APIConnectionError("–ü—Ä–æ–≤–∞–π–¥–µ—Ä –∑–∞–∫—Ä—ã—Ç", "context")
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
556 |
557 |                 return AIResponse(
    |

EM101 Exception must not use a string literal, assign to variable first
   --> tests\unit\test_base_ai_provider.py:555:46
    |
553 |             ):
554 |                 if self.closed:
555 |                     raise APIConnectionError("–ü—Ä–æ–≤–∞–π–¥–µ—Ä –∑–∞–∫—Ä—ã—Ç", "context")
    |                                              ^^^^^^^^^^^^^^^^^^
556 |
557 |                 return AIResponse(
    |
help: Assign to variable; remove string literal

ANN202 Missing return type annotation for private function `is_configured`
   --> tests\unit\test_base_ai_provider.py:565:17
    |
563 |                 )
564 |
565 |             def is_configured(self):
    |                 ^^^^^^^^^^^^^
566 |                 return True
    |
help: Add return type annotation: `bool`

ANN202 Missing return type annotation for private function `is_available`
   --> tests\unit\test_base_ai_provider.py:568:23
    |
566 |                 return True
567 |
568 |             async def is_available(self):
    |                       ^^^^^^^^^^^^
569 |                 return not self.closed
    |
help: Add return type annotation: `bool`

ANN202 Missing return type annotation for private function `health_check`
   --> tests\unit\test_base_ai_provider.py:571:23
    |
569 |                 return not self.closed
570 |
571 |             async def health_check(self):
    |                       ^^^^^^^^^^^^
572 |                 return {"status": "healthy" if not self.closed else "unhealthy"}
    |
help: Add return type annotation

ANN202 Missing return type annotation for private function `close`
   --> tests\unit\test_base_ai_provider.py:574:23
    |
572 |                 return {"status": "healthy" if not self.closed else "unhealthy"}
573 |
574 |             async def close(self):
    |                       ^^^^^
575 |                 self.closed = True
    |
help: Add return type annotation: `None`

ANN204 Missing return type annotation for special method `__aenter__`
   --> tests\unit\test_base_ai_provider.py:577:23
    |
575 |                 self.closed = True
576 |
577 |             async def __aenter__(self):
    |                       ^^^^^^^^^^
578 |                 return self
    |
help: Add return type annotation

ANN204 Missing return type annotation for special method `__aexit__`
   --> tests\unit\test_base_ai_provider.py:580:23
    |
578 |                 return self
579 |
580 |             async def __aexit__(self, exc_type, exc_val, exc_tb):
    |                       ^^^^^^^^^
581 |                 await self.close()
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `exc_type`
   --> tests\unit\test_base_ai_provider.py:580:39
    |
578 |                 return self
579 |
580 |             async def __aexit__(self, exc_type, exc_val, exc_tb):
    |                                       ^^^^^^^^
581 |                 await self.close()
    |

ANN001 Missing type annotation for function argument `exc_val`
   --> tests\unit\test_base_ai_provider.py:580:49
    |
578 |                 return self
579 |
580 |             async def __aexit__(self, exc_type, exc_val, exc_tb):
    |                                                 ^^^^^^^
581 |                 await self.close()
    |

ANN001 Missing type annotation for function argument `exc_tb`
   --> tests\unit\test_base_ai_provider.py:580:58
    |
578 |                 return self
579 |
580 |             async def __aexit__(self, exc_type, exc_val, exc_tb):
    |                                                          ^^^^^^
581 |                 await self.close()
    |

E402 Module level import not at top of file
  --> tests\unit\test_config.py:20:1
   |
19 | # –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
20 | from app.utils.logging import setup_logging
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
21 |
22 | setup_logging(
   |

ANN201 Missing return type annotation for public function `test_telegram_config_validation`
  --> tests\unit\test_config.py:33:9
   |
31 |     """–¢–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏."""
32 |
33 |     def test_telegram_config_validation(self):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
34 |         """–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ TelegramConfig."""
35 |         from app.config import TelegramConfig
   |
help: Add return type annotation: `None`

PLC0415 `import` should be at the top-level of a file
  --> tests\unit\test_config.py:35:9
   |
33 |     def test_telegram_config_validation(self):
34 |         """–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ TelegramConfig."""
35 |         from app.config import TelegramConfig
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
36 |
37 |         # –¢–µ—Å—Ç —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º (–ø—É—Å—Ç–æ–π)
   |

S106 Possible hardcoded password assigned to argument: "BOT_TOKEN"
  --> tests\unit\test_config.py:41:28
   |
39 |             ValueError, match="BOT_TOKEN must be set to a valid Telegram bot token"
40 |         ):
41 |             TelegramConfig(BOT_TOKEN="your_telegram_bot_token_here")
   |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
42 |
43 |         # –¢–µ—Å—Ç —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º (–±–µ–∑ –¥–≤–æ–µ—Ç–æ—á–∏—è)
   |

S106 Possible hardcoded password assigned to argument: "BOT_TOKEN"
  --> tests\unit\test_config.py:47:28
   |
45 |             ValueError, match="BOT_TOKEN must be in format 'number:hash'"
46 |         ):
47 |             TelegramConfig(BOT_TOKEN="invalid_token")
   |                            ^^^^^^^^^^^^^^^^^^^^^^^^^
48 |
49 |         # –¢–µ—Å—Ç —Å –≤–∞–ª–∏–¥–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º
   |

S106 Possible hardcoded password assigned to argument: "BOT_TOKEN"
  --> tests\unit\test_config.py:50:33
   |
49 |         # –¢–µ—Å—Ç —Å –≤–∞–ª–∏–¥–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º
50 |         config = TelegramConfig(BOT_TOKEN="123456789:ABCdefGHIjklMNOpqrsTUVwxyz")
   |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
51 |         assert config.bot_token is not None
52 |         logger.success("‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è TelegramConfig —Ä–∞–±–æ—Ç–∞–µ—Ç")
   |

ANN201 Missing return type annotation for public function `test_deepseek_config_validation`
  --> tests\unit\test_config.py:54:9
   |
52 |         logger.success("‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è TelegramConfig —Ä–∞–±–æ—Ç–∞–µ—Ç")
53 |
54 |     def test_deepseek_config_validation(self):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
55 |         """–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ DeepSeekConfig."""
56 |         from app.config import DeepSeekConfig
   |
help: Add return type annotation: `None`

PLC0415 `import` should be at the top-level of a file
  --> tests\unit\test_config.py:56:9
   |
54 |     def test_deepseek_config_validation(self):
55 |         """–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ DeepSeekConfig."""
56 |         from app.config import DeepSeekConfig
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
57 |
58 |         # –¢–µ—Å—Ç —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º API –∫–ª—é—á–æ–º (placeholder)
   |

ANN201 Missing return type annotation for public function `test_database_config_url_building`
  --> tests\unit\test_config.py:85:9
   |
83 |         logger.success("‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è DeepSeekConfig —Ä–∞–±–æ—Ç–∞–µ—Ç")
84 |
85 |     def test_database_config_url_building(self):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
86 |         """–¢–µ—Å—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è URL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö."""
87 |         from app.config import DatabaseConfig
   |
help: Add return type annotation: `None`

PLC0415 `import` should be at the top-level of a file
  --> tests\unit\test_config.py:87:9
   |
85 |     def test_database_config_url_building(self):
86 |         """–¢–µ—Å—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è URL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö."""
87 |         from app.config import DatabaseConfig
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
88 |
89 |         config = DatabaseConfig(
   |

S106 Possible hardcoded password assigned to argument: "DATABASE_PASSWORD"
  --> tests\unit\test_config.py:94:13
   |
92 |             DATABASE_NAME="test_db",
93 |             DATABASE_USER="test_user",
94 |             DATABASE_PASSWORD="test_password",
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
95 |         )
   |

ANN201 Missing return type annotation for public function `test_user_limits_validation`
   --> tests\unit\test_config.py:103:9
    |
101 |         logger.success("‚úÖ –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ URL –ë–î —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ")
102 |
103 |     def test_user_limits_validation(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
104 |         """–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ UserLimitsConfig."""
105 |         from app.config import UserLimitsConfig
    |
help: Add return type annotation: `None`

PLC0415 `import` should be at the top-level of a file
   --> tests\unit\test_config.py:105:9
    |
103 |     def test_user_limits_validation(self):
104 |         """–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ UserLimitsConfig."""
105 |         from app.config import UserLimitsConfig
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
106 |
107 |         # –¢–µ—Å—Ç —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º –ª–∏–º–∏—Ç–æ–º
    |

B017 Do not assert blind exception: `Exception`
   --> tests\unit\test_config.py:108:14
    |
107 |         # –¢–µ—Å—Ç —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º –ª–∏–º–∏—Ç–æ–º
108 |         with pytest.raises(Exception):
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
109 |             UserLimitsConfig(FREE_MESSAGES_LIMIT=-1)
    |

PT011 `pytest.raises(Exception)` is too broad, set the `match` parameter or use a more specific exception
   --> tests\unit\test_config.py:108:28
    |
107 |         # –¢–µ—Å—Ç —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º –ª–∏–º–∏—Ç–æ–º
108 |         with pytest.raises(Exception):
    |                            ^^^^^^^^^
109 |             UserLimitsConfig(FREE_MESSAGES_LIMIT=-1)
    |

B017 Do not assert blind exception: `Exception`
   --> tests\unit\test_config.py:112:14
    |
111 |         # –¢–µ—Å—Ç —Å –Ω—É–ª–µ–≤–æ–π —Ü–µ–Ω–æ–π
112 |         with pytest.raises(Exception):
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
113 |             UserLimitsConfig(PREMIUM_PRICE=0)
    |

PT011 `pytest.raises(Exception)` is too broad, set the `match` parameter or use a more specific exception
   --> tests\unit\test_config.py:112:28
    |
111 |         # –¢–µ—Å—Ç —Å –Ω—É–ª–µ–≤–æ–π —Ü–µ–Ω–æ–π
112 |         with pytest.raises(Exception):
    |                            ^^^^^^^^^
113 |             UserLimitsConfig(PREMIUM_PRICE=0)
    |

ANN201 Missing return type annotation for public function `test_admin_config_validation`
   --> tests\unit\test_config.py:125:9
    |
123 |         logger.success("‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è UserLimitsConfig —Ä–∞–±–æ—Ç–∞–µ—Ç")
124 |
125 |     def test_admin_config_validation(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
126 |         """–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ AdminConfig."""
127 |         from app.config import AdminConfig
    |
help: Add return type annotation: `None`

PLC0415 `import` should be at the top-level of a file
   --> tests\unit\test_config.py:127:9
    |
125 |     def test_admin_config_validation(self):
126 |         """–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ AdminConfig."""
127 |         from app.config import AdminConfig
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
128 |
129 |         # –¢–µ—Å—Ç —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º ID
    |

B017 Do not assert blind exception: `Exception`
   --> tests\unit\test_config.py:130:14
    |
129 |         # –¢–µ—Å—Ç —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º ID
130 |         with pytest.raises(Exception):
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
131 |             AdminConfig(ADMIN_USER_ID=0)
    |

PT011 `pytest.raises(Exception)` is too broad, set the `match` parameter or use a more specific exception
   --> tests\unit\test_config.py:130:28
    |
129 |         # –¢–µ—Å—Ç —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º ID
130 |         with pytest.raises(Exception):
    |                            ^^^^^^^^^
131 |             AdminConfig(ADMIN_USER_ID=0)
    |

ANN201 Missing return type annotation for public function `test_config_loading_without_env_file`
   --> tests\unit\test_config.py:152:9
    |
151 |     @pytest.mark.skip(reason="Temporarily disabled due to commit issues")
152 |     def test_config_loading_without_env_file(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
153 |         """–¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–µ–∑ .env —Ñ–∞–π–ª–∞."""
154 |         from app.config import get_config
    |
help: Add return type annotation: `None`

PLC0415 `import` should be at the top-level of a file
   --> tests\unit\test_config.py:154:9
    |
152 |     def test_config_loading_without_env_file(self):
153 |         """–¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–µ–∑ .env —Ñ–∞–π–ª–∞."""
154 |         from app.config import get_config
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
155 |
156 |         # –ë–µ–∑ .env —Ñ–∞–π–ª–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
    |

B017 Do not assert blind exception: `Exception`
   --> tests\unit\test_config.py:157:14
    |
156 |         # –ë–µ–∑ .env —Ñ–∞–π–ª–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
157 |         with pytest.raises(Exception):
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
158 |             config = get_config()
    |

PT011 `pytest.raises(Exception)` is too broad, set the `match` parameter or use a more specific exception
   --> tests\unit\test_config.py:157:28
    |
156 |         # –ë–µ–∑ .env —Ñ–∞–π–ª–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
157 |         with pytest.raises(Exception):
    |                            ^^^^^^^^^
158 |             config = get_config()
    |

F841 Local variable `config` is assigned to but never used
   --> tests\unit\test_config.py:158:13
    |
156 |         # –ë–µ–∑ .env —Ñ–∞–π–ª–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
157 |         with pytest.raises(Exception):
158 |             config = get_config()
    |             ^^^^^^
159 |
160 |         logger.success("‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç")
    |
help: Remove assignment to unused variable `config`

ANN201 Missing return type annotation for public function `test_config_loading_with_env_file`
   --> tests\unit\test_config.py:173:9
    |
171 | """,
172 |     )
173 |     def test_config_loading_with_env_file(self, mock_exists, mock_open):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
174 |         """–¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å .env —Ñ–∞–π–ª–æ–º."""
175 |         mock_exists.return_value = True
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `mock_exists`
   --> tests\unit\test_config.py:173:49
    |
171 | """,
172 |     )
173 |     def test_config_loading_with_env_file(self, mock_exists, mock_open):
    |                                                 ^^^^^^^^^^^
174 |         """–¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å .env —Ñ–∞–π–ª–æ–º."""
175 |         mock_exists.return_value = True
    |

ANN001 Missing type annotation for function argument `mock_open`
   --> tests\unit\test_config.py:173:62
    |
171 | """,
172 |     )
173 |     def test_config_loading_with_env_file(self, mock_exists, mock_open):
    |                                                              ^^^^^^^^^
174 |         """–¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å .env —Ñ–∞–π–ª–æ–º."""
175 |         mock_exists.return_value = True
    |

ARG002 Unused method argument: `mock_open`
   --> tests\unit\test_config.py:173:62
    |
171 | """,
172 |     )
173 |     def test_config_loading_with_env_file(self, mock_exists, mock_open):
    |                                                              ^^^^^^^^^
174 |         """–¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å .env —Ñ–∞–π–ª–æ–º."""
175 |         mock_exists.return_value = True
    |

PLC0415 `import` should be at the top-level of a file
   --> tests\unit\test_config.py:178:9
    |
177 |         # –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∫–µ—à –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
178 |         import app.config
    |         ^^^^^^^^^^^^^^^^^
179 |
180 |         app.config._config_instance = None
    |

SLF001 Private member accessed: `_config_instance`
   --> tests\unit\test_config.py:180:9
    |
178 |         import app.config
179 |
180 |         app.config._config_instance = None
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
181 |
182 |         try:
    |

PLC0415 `import` should be at the top-level of a file
   --> tests\unit\test_config.py:183:13
    |
182 |         try:
183 |             from app.config import get_config
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
184 |
185 |             config = get_config()
    |

S105 Possible hardcoded password assigned to: "bot_token"
   --> tests\unit\test_config.py:187:49
    |
185 |             config = get_config()
186 |
187 |             assert config.telegram.bot_token == "123456789:ABCdefGHIjklMNOpqrsTUVwxyz"
    |                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
188 |             assert config.deepseek.deepseek_api_key == "sk-test123456789"
189 |             assert config.secret_key == "test_secret_key_with_32_characters_minimum"
    |

S105 Possible hardcoded password assigned to: "secret_key"
   --> tests\unit\test_config.py:189:41
    |
187 |             assert config.telegram.bot_token == "123456789:ABCdefGHIjklMNOpqrsTUVwxyz"
188 |             assert config.deepseek.deepseek_api_key == "sk-test123456789"
189 |             assert config.secret_key == "test_secret_key_with_32_characters_minimum"
    |                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
190 |             assert config.admin.admin_user_id == 123456789
    |

ANN201 Missing return type annotation for public function `test_config_singleton_behavior`
   --> tests\unit\test_config.py:199:9
    |
198 |     @pytest.mark.skip(reason="Temporarily disabled due to commit issues")
199 |     def test_config_singleton_behavior(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
200 |         """–¢–µ—Å—Ç –ø–æ–≤–µ–¥–µ–Ω–∏—è —Å–∏–Ω–≥–ª—Ç–æ–Ω–∞ –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏."""
201 |         import app.config
    |
help: Add return type annotation: `None`

PLC0415 `import` should be at the top-level of a file
   --> tests\unit\test_config.py:201:9
    |
199 |     def test_config_singleton_behavior(self):
200 |         """–¢–µ—Å—Ç –ø–æ–≤–µ–¥–µ–Ω–∏—è —Å–∏–Ω–≥–ª—Ç–æ–Ω–∞ –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏."""
201 |         import app.config
    |         ^^^^^^^^^^^^^^^^^
202 |
203 |         # –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∫–µ—à
    |

SLF001 Private member accessed: `_config_instance`
   --> tests\unit\test_config.py:204:9
    |
203 |         # –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∫–µ—à
204 |         app.config._config_instance = None
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
205 |
206 |         from app.config import get_config
    |

PLC0415 `import` should be at the top-level of a file
   --> tests\unit\test_config.py:206:9
    |
204 |         app.config._config_instance = None
205 |
206 |         from app.config import get_config
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
207 |
208 |         # –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ .env —Ñ–∞–π–ª–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞
    |

B017 Do not assert blind exception: `Exception`
   --> tests\unit\test_config.py:209:14
    |
208 |         # –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ .env —Ñ–∞–π–ª–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞
209 |         with pytest.raises(Exception):
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
210 |             config1 = get_config()
    |

PT011 `pytest.raises(Exception)` is too broad, set the `match` parameter or use a more specific exception
   --> tests\unit\test_config.py:209:28
    |
208 |         # –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ .env —Ñ–∞–π–ª–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞
209 |         with pytest.raises(Exception):
    |                            ^^^^^^^^^
210 |             config1 = get_config()
    |

F841 Local variable `config1` is assigned to but never used
   --> tests\unit\test_config.py:210:13
    |
208 |         # –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ .env —Ñ–∞–π–ª–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞
209 |         with pytest.raises(Exception):
210 |             config1 = get_config()
    |             ^^^^^^^
211 |
212 |         logger.success("‚úÖ Singleton –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ")
    |
help: Remove assignment to unused variable `config1`

ANN201 Missing return type annotation for public function `test_env_example_completeness`
   --> tests\unit\test_config.py:218:9
    |
216 |     """–¢–µ—Å—Ç—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è."""
217 |
218 |     def test_env_example_completeness(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
219 |         """–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–Ω–æ—Ç—ã .env.example —Ñ–∞–π–ª–∞."""
220 |         env_example = project_root / ".env.example"
    |
help: Add return type annotation: `None`

I001 [*] Import block is un-sorted or un-formatted
  --> tests\unit\test_models.py:8:1
   |
 6 |   """
 7 |
 8 | / from collections.abc import AsyncGenerator
 9 | | from datetime import date, datetime, timedelta
10 | |
11 | | import pytest
12 | | from sqlalchemy.ext.asyncio import AsyncSession
13 | |
14 | | from app.database import get_session
15 | | from app.models.conversation import (
16 | |     Conversation,
17 | |     ConversationCreate,
18 | |     ConversationResponse,
19 | |     ConversationUpdate,
20 | |     ConversationStatus,
21 | |     MessageRole,
22 | | )
23 | | from app.models.user import User, UserCreate, UserResponse, UserUpdate
   | |______________________________________________________________________^
   |
help: Organize imports

ANN201 Missing return type annotation for public function `test_user_data`
  --> tests\unit\test_models.py:31:9
   |
30 |     @pytest.fixture
31 |     def test_user_data(self):
   |         ^^^^^^^^^^^^^^
32 |         """–§–∏–∫—Å—Ç—É—Ä–∞ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
33 |         return {
   |
help: Add return type annotation

DTZ011 `datetime.date.today()` used
  --> tests\unit\test_models.py:42:34
   |
40 |             "premium_expires_at": None,
41 |             "daily_message_count": 0,
42 |             "last_message_date": date.today(),
   |                                  ^^^^^^^^^^^^
43 |         }
   |
help: Use `datetime.datetime.now(tz=...).date()` instead

ANN201 Missing return type annotation for public function `test_user_creation`
  --> tests\unit\test_models.py:45:9
   |
43 |         }
44 |
45 |     def test_user_creation(self, test_user_data):
   |         ^^^^^^^^^^^^^^^^^^
46 |         """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
47 |         user = User(**test_user_data)
   |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `test_user_data`
  --> tests\unit\test_models.py:45:34
   |
43 |         }
44 |
45 |     def test_user_creation(self, test_user_data):
   |                                  ^^^^^^^^^^^^^^
46 |         """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
47 |         user = User(**test_user_data)
   |

DTZ011 `datetime.date.today()` used
  --> tests\unit\test_models.py:57:42
   |
55 |         assert user.premium_expires_at is None
56 |         assert user.daily_message_count == 0
57 |         assert user.last_message_date == date.today()
   |                                          ^^^^^^^^^^^^
58 |
59 |     def test_user_defaults(self):
   |
help: Use `datetime.datetime.now(tz=...).date()` instead

ANN201 Missing return type annotation for public function `test_user_defaults`
  --> tests\unit\test_models.py:59:9
   |
57 |         assert user.last_message_date == date.today()
58 |
59 |     def test_user_defaults(self):
   |         ^^^^^^^^^^^^^^^^^^
60 |         """–¢–µ—Å—Ç –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è User."""
61 |         user = User(telegram_id=999999999)
   |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_user_display_name_method`
  --> tests\unit\test_models.py:75:9
   |
73 |         assert user.last_activity_at is None
74 |
75 |     def test_user_display_name_method(self):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
76 |         """–¢–µ—Å—Ç –º–µ—Ç–æ–¥–∞ get_display_name."""
77 |         # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –∏–º–µ–Ω–µ–º –∏ —Ñ–∞–º–∏–ª–∏–µ–π
   |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_is_premium_active_method`
  --> tests\unit\test_models.py:93:9
   |
91 |         assert user4.get_display_name() == "User 4"
92 |
93 |     def test_is_premium_active_method(self):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
94 |         """–¢–µ—Å—Ç –º–µ—Ç–æ–¥–∞ is_premium_active."""
95 |         # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–µ–∑ –ø—Ä–µ–º–∏—É–º–∞
   |
help: Add return type annotation: `None`

DTZ005 `datetime.datetime.now()` called without a `tz` argument
   --> tests\unit\test_models.py:103:32
    |
101 |             telegram_id=2,
102 |             is_premium=True,
103 |             premium_expires_at=datetime.now() + timedelta(days=10),
    |                                ^^^^^^^^^^^^^^
104 |         )
105 |         assert user2.is_premium_active() is True
    |
help: Pass a `datetime.timezone` object to the `tz` parameter

DTZ005 `datetime.datetime.now()` called without a `tz` argument
   --> tests\unit\test_models.py:111:32
    |
109 |             telegram_id=3,
110 |             is_premium=True,
111 |             premium_expires_at=datetime.now() - timedelta(days=1),
    |                                ^^^^^^^^^^^^^^
112 |         )
113 |         assert user3.is_premium_active() is False
    |
help: Pass a `datetime.timezone` object to the `tz` parameter

ANN201 Missing return type annotation for public function `test_can_send_message_method`
   --> tests\unit\test_models.py:119:9
    |
117 |         assert user4.is_premium_active() is True
118 |
119 |     def test_can_send_message_method(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
120 |         """–¢–µ—Å—Ç –º–µ—Ç–æ–¥–∞ can_send_message."""
121 |         # –ü—Ä–µ–º–∏—É–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    |
help: Add return type annotation: `None`

DTZ011 `datetime.date.today()` used
   --> tests\unit\test_models.py:126:31
    |
124 |             is_premium=True,
125 |             daily_message_count=100,
126 |             last_message_date=date.today(),
    |                               ^^^^^^^^^^^^
127 |         )
128 |         assert premium_user.can_send_message() is True
    |
help: Use `datetime.datetime.now(tz=...).date()` instead

DTZ011 `datetime.date.today()` used
   --> tests\unit\test_models.py:135:31
    |
133 |             is_premium=False,
134 |             daily_message_count=5,
135 |             last_message_date=date.today(),
    |                               ^^^^^^^^^^^^
136 |         )
137 |         assert regular_user.can_send_message() is True
    |
help: Use `datetime.datetime.now(tz=...).date()` instead

DTZ011 `datetime.date.today()` used
   --> tests\unit\test_models.py:144:31
    |
142 |             is_premium=False,
143 |             daily_message_count=20,
144 |             last_message_date=date.today(),
    |                               ^^^^^^^^^^^^
145 |         )
146 |         assert limited_user.can_send_message() is False
    |
help: Use `datetime.datetime.now(tz=...).date()` instead

ANN201 Missing return type annotation for public function `test_reset_daily_count_if_needed_method`
   --> tests\unit\test_models.py:148:9
    |
146 |         assert limited_user.can_send_message() is False
147 |
148 |     def test_reset_daily_count_if_needed_method(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
149 |         """–¢–µ—Å—Ç –º–µ—Ç–æ–¥–∞ reset_daily_count_if_needed."""
150 |         # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–π –¥–∞—Ç–æ–π
    |
help: Add return type annotation: `None`

DTZ011 `datetime.date.today()` used
   --> tests\unit\test_models.py:154:31
    |
152 |             telegram_id=1,
153 |             daily_message_count=5,
154 |             last_message_date=date.today(),
    |                               ^^^^^^^^^^^^
155 |         )
156 |         result1 = user1.reset_daily_count_if_needed()
    |
help: Use `datetime.datetime.now(tz=...).date()` instead

DTZ011 `datetime.date.today()` used
   --> tests\unit\test_models.py:164:31
    |
162 |             telegram_id=2,
163 |             daily_message_count=10,
164 |             last_message_date=date.today() - timedelta(days=1),
    |                               ^^^^^^^^^^^^
165 |         )
166 |         result2 = user2.reset_daily_count_if_needed()
    |
help: Use `datetime.datetime.now(tz=...).date()` instead

DTZ011 `datetime.date.today()` used
   --> tests\unit\test_models.py:169:43
    |
167 |         assert result2 is True  # –°–±—Ä–æ—à–µ–Ω
168 |         assert user2.daily_message_count == 0
169 |         assert user2.last_message_date == date.today()
    |                                           ^^^^^^^^^^^^
    |
help: Use `datetime.datetime.now(tz=...).date()` instead

ANN201 Missing return type annotation for public function `test_user_create_schema`
   --> tests\unit\test_models.py:176:9
    |
174 |     """–¢–µ—Å—Ç—ã –¥–ª—è Pydantic —Å—Ö–µ–º User."""
175 |
176 |     def test_user_create_schema(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^
177 |         """–¢–µ—Å—Ç —Å—Ö–µ–º—ã UserCreate."""
178 |         data = {
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_user_create_minimal`
   --> tests\unit\test_models.py:192:9
    |
190 |         assert user_create.language_code == "en"
191 |
192 |     def test_user_create_minimal(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^
193 |         """–¢–µ—Å—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Å—Ö–µ–º—ã UserCreate."""
194 |         user_create = UserCreate(telegram_id=999999999)
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_user_update_schema`
   --> tests\unit\test_models.py:201:9
    |
199 |         assert user_create.language_code == "ru"  # –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
200 |
201 |     def test_user_update_schema(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^
202 |         """–¢–µ—Å—Ç —Å—Ö–µ–º—ã UserUpdate."""
203 |         data = {
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_user_response_schema`
   --> tests\unit\test_models.py:216:9
    |
214 |         assert user_update.last_name is None  # –ù–µ —É–∫–∞–∑–∞–Ω–æ
215 |
216 |     def test_user_response_schema(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^
217 |         """–¢–µ—Å—Ç —Å—Ö–µ–º—ã UserResponse."""
218 |         # –°–æ–∑–¥–∞–µ–º User –æ–±—ä–µ–∫—Ç
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_conversation_data`
   --> tests\unit\test_models.py:242:9
    |
241 |     @pytest.fixture
242 |     def test_conversation_data(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^
243 |         """–§–∏–∫—Å—Ç—É—Ä–∞ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –¥–∏–∞–ª–æ–≥–∞."""
244 |         return {
    |
help: Add return type annotation

ANN201 Missing return type annotation for public function `test_conversation_creation`
   --> tests\unit\test_models.py:253:9
    |
251 |         }
252 |
253 |     def test_conversation_creation(self, test_conversation_data):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^
254 |         """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞."""
255 |         conversation = Conversation(**test_conversation_data)
    |
help: Add return type annotation: `None`

ANN001 Missing type annotation for function argument `test_conversation_data`
   --> tests\unit\test_models.py:253:42
    |
251 |         }
252 |
253 |     def test_conversation_creation(self, test_conversation_data):
    |                                          ^^^^^^^^^^^^^^^^^^^^^^
254 |         """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞."""
255 |         conversation = Conversation(**test_conversation_data)
    |

ANN201 Missing return type annotation for public function `test_conversation_with_ai_response`
   --> tests\unit\test_models.py:265:9
    |
263 |         assert isinstance(conversation.created_at, datetime)
264 |
265 |     def test_conversation_with_ai_response(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
266 |         """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞ —Å –æ—Ç–≤–µ—Ç–æ–º AI."""
267 |         conversation = Conversation(
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_conversation_role_enum`
   --> tests\unit\test_models.py:282:9
    |
280 |         assert conversation.response_time_ms == 1500
281 |
282 |     def test_conversation_role_enum(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
283 |         """–¢–µ—Å—Ç enum –¥–ª—è —Ä–æ–ª–µ–π —Å–æ–æ–±—â–µ–Ω–∏–π."""
284 |         assert MessageRole.USER == "user"
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_conversation_content_validation`
   --> tests\unit\test_models.py:305:9
    |
303 |         assert system_msg.role == MessageRole.SYSTEM
304 |
305 |     def test_conversation_content_validation(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
306 |         """–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è."""
307 |         # –ù–æ—Ä–º–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_conversation_create_schema`
   --> tests\unit\test_models.py:329:9
    |
327 |     """–¢–µ—Å—Ç—ã –¥–ª—è Pydantic —Å—Ö–µ–º Conversation."""
328 |
329 |     def test_conversation_create_schema(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
330 |         """–¢–µ—Å—Ç —Å—Ö–µ–º—ã ConversationCreate."""
331 |         data = {
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_conversation_create_minimal`
   --> tests\unit\test_models.py:347:9
    |
345 |         assert conv_create.chat_id == 456
346 |
347 |     def test_conversation_create_minimal(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
348 |         """–¢–µ—Å—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Å—Ö–µ–º—ã ConversationCreate."""
349 |         conv_create = ConversationCreate(
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_conversation_update_schema`
   --> tests\unit\test_models.py:360:9
    |
358 |         assert conv_create.chat_id is None
359 |
360 |     def test_conversation_update_schema(self):
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
361 |         """–¢–µ—Å—Ç —Å—Ö–µ–º—ã ConversationUpdate."""
362 |         data = {
    |
help: Add return type annotation: `None`

ANN201 Missing return type annotation for public function `test_conversation_response_schema`
   --> tests\unit\test_models.py:377:15
    |
375 |         assert conv_update.response_time is None  # –ù–µ —É–∫–∞–∑–∞–Ω–æ
376 |
377 |     async def test_conversation_response_schema(self):
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
378 |         """–¢–µ—Å—Ç —Å—Ö–µ–º—ã ConversationResponse."""
379 |         # –°–æ–∑–¥–∞–µ–º Conversation –æ–±—ä–µ–∫—Ç
    |
help: Add return type annotation: `None`

Found 1358 errors.
[*] 25 fixable with the `--fix` option (356 hidden fixes can be enabled with the `--unsafe-fixes` option).
